var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();!function(){function e(t,a,s){function i(o,l){if(!a[o]){if(!t[o]){var r="function"==typeof require&&require;if(!l&&r)return r(o,!0);if(n)return n(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){var a=t[o][1][e];return i(a||e)},c,c.exports,e,t,a,s)}return a[o].exports}for(var n="function"==typeof require&&require,o=0;o<s.length;o++)i(s[o]);return i}return e}()({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./script/scene/Achievementreach"),i=e("./script/scene/AchievementControl"),n=e("./script/Tools/closeTouchEffect"),o=e("./script/scene/CheckInControl"),l=e("./script/scene/Exchange"),r=e("./script/scene/LoadSceneControl"),h=e("./script/role/role"),c=e("./script/playing/PlayingSceneControl"),u=e("./script/Effect/ButtonTouchEffect"),p=e("./script/scene/AchievementButton"),f=e("./script/main/EquipUpdate"),d=e("./script/scene/SettlementFailControl"),y=e("./script/scene/RewardDialogControl"),_=e("./script/scene/RewardTenControl"),m=e("./script/scene/PopDialogRunTime"),g=e("./script/scene/PopDialogControl"),b=e("./script/scene/RankingControl"),v=e("./script/Effect/ReqLoadingControl"),k=e("./script/scene/Setting"),S=e("./script/scene/SettlementControl"),B=e("./script/scene/ShopControl"),w=e("./script/manage/EndlessChooseSkills"),O=e("./script/manage/EndlessSuspend_explain"),C=e("./script/scene/ItemDetailControl"),L=e("./script/manage/EndlessSuspend"),T=e("./script/GameUI"),I=e("./script/GameControl"),D=e("./script/role/BaoZha"),x=e("./script/playing/Enemy"),P=e("./script/scene/BossWarning"),j=e("./script/playing/BuffControl"),E=e("./script/role/BuffProgressControl"),A=e("./script/Bullet"),N=e("./script/playing/Bullet_face"),M=e("./script/playing/Bullet_boss"),R=e("./script/role/MuzzleControl"),H=e("./script/role/Bullet_second"),z=e("./script/role/EnemySelfSkillControl"),F=e("./script/DropBox"),U=e("./script/role/GoldDrop"),W=e("./script/manage/EndlessBuyItem"),Y=e("./script/role/movementLocus"),X=e("./script/manage/toast"),V=function(){function e(){}return e.init=function(){var e=Laya.ClassUtils.regClass;e("script/scene/Achievementreach.ts",s["default"]),e("script/scene/AchievementControl.ts",i["default"]),e("script/Tools/closeTouchEffect.ts",n["default"]),e("script/scene/CheckInControl.ts",o["default"]),e("script/scene/Exchange.ts",l["default"]),e("script/scene/LoadSceneControl.ts",r["default"]),e("script/role/role.ts",h["default"]),e("script/playing/PlayingSceneControl.ts",c["default"]),e("script/Effect/ButtonTouchEffect.ts",u["default"]),e("script/scene/AchievementButton.ts",p["default"]),e("script/main/EquipUpdate.ts",f["default"]),e("script/scene/SettlementFailControl.ts",d["default"]),e("script/scene/RewardDialogControl.ts",y["default"]),e("script/scene/RewardTenControl.ts",_["default"]),e("script/scene/PopDialogRunTime.ts",m["default"]),e("script/scene/PopDialogControl.ts",g["default"]),e("script/scene/RankingControl.ts",b["default"]),e("script/Effect/ReqLoadingControl.ts",v["default"]),e("script/scene/Setting.ts",k["default"]),e("script/scene/SettlementControl.ts",S["default"]),e("script/scene/ShopControl.ts",B["default"]),e("script/manage/EndlessChooseSkills.ts",w["default"]),e("script/manage/EndlessSuspend_explain.ts",O["default"]),e("script/scene/ItemDetailControl.ts",C["default"]),e("script/manage/EndlessSuspend.ts",L["default"]),e("script/GameUI.ts",T["default"]),e("script/GameControl.ts",I["default"]),e("script/role/BaoZha.ts",D["default"]),e("script/playing/Enemy.ts",x["default"]),e("script/scene/BossWarning.ts",P["default"]),e("script/playing/BuffControl.ts",j["default"]),e("script/role/BuffProgressControl.ts",E["default"]),e("script/Bullet.ts",A["default"]),e("script/playing/Bullet_face.ts",N["default"]),e("script/playing/Bullet_boss.ts",M["default"]),e("script/role/MuzzleControl.ts",R["default"]),e("script/role/Bullet_second.ts",H["default"]),e("script/role/EnemySelfSkillControl.ts",z["default"]),e("script/DropBox.ts",F["default"]),e("script/role/GoldDrop.ts",U["default"]),e("script/manage/EndlessBuyItem.ts",W["default"]),e("script/role/movementLocus.ts",Y["default"]),e("script/manage/toast.ts",X["default"])},e.width=750,e.height=1334,e.scaleMode="fixedwidth",e.screenMode="vertical",e.alignV="middle",e.alignH="center",e.startScene="test/faceFighting_loadingScene.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e}();a["default"]=V,V.init()},{"./script/Bullet":19,"./script/DropBox":29,"./script/Effect/ButtonTouchEffect":30,"./script/Effect/ReqLoadingControl":31,"./script/GameControl":33,"./script/GameUI":34,"./script/Tools/closeTouchEffect":41,"./script/main/EquipUpdate":42,"./script/manage/EndlessBuyItem":47,"./script/manage/EndlessChooseSkills":48,"./script/manage/EndlessSuspend":52,"./script/manage/EndlessSuspend_explain":53,"./script/manage/toast":61,"./script/playing/BuffControl":63,"./script/playing/Bullet_boss":64,"./script/playing/Bullet_face":65,"./script/playing/Enemy":66,"./script/playing/PlayingSceneControl":67,"./script/role/BaoZha":68,"./script/role/BuffProgressControl":71,"./script/role/Bullet_second":73,"./script/role/EnemySelfSkillControl":76,"./script/role/GoldDrop":78,"./script/role/MuzzleControl":79,"./script/role/movementLocus":80,"./script/role/role":81,"./script/scene/AchievementButton":82,"./script/scene/AchievementControl":83,"./script/scene/Achievementreach":84,"./script/scene/BossWarning":85,"./script/scene/CheckInControl":86,"./script/scene/Exchange":87,"./script/scene/ItemDetailControl":88,"./script/scene/LoadSceneControl":89,"./script/scene/PopDialogControl":90,"./script/scene/PopDialogRunTime":91,"./script/scene/RankingControl":92,"./script/scene/RewardDialogControl":93,"./script/scene/RewardTenControl":94,"./script/scene/Setting":95,"./script/scene/SettlementControl":96,"./script/scene/SettlementFailControl":97,"./script/scene/ShopControl":98}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./GameConfig"),i=e("./script/manage/Playing_var"),n=e("./script/manage/AdaptScene"),o=function(){function e(){if(window.Laya3D?Laya3D.init(s["default"].width,s["default"].height):Laya.init(s["default"].width,s["default"].height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.Browser.onPC){var e=Laya.Stage.SCALE_SHOWALL;Laya.stage.scaleMode=e}else Laya.stage.scaleMode=s["default"].scaleMode;Laya.stage.screenMode=s["default"].screenMode,Laya.URL.exportSceneToJson=s["default"].exportSceneToJson,UIConfig.closeDialogOnSide=!0,(s["default"].debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),s["default"].physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),s["default"].stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.Physics.I.box2d.DEBUG=!1,Laya.stage.alignV=s["default"].alignV,Laya.stage.alignH=s["default"].alignH,i["default"].getInstance().gameStatus="loading",Laya.URL.basePath="https://ssl.xdieg.com/StaticFiles/wxgame/",Laya.stage.on(Laya.Event.RESIZE,this,this.onResize),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return e.prototype.onResize=function(e){console.log("onResize----:",e,"stage.height",Laya.stage.height),n["default"].getInstance().setSceneAdaptHeight()},e.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))},e.prototype.onConfigLoaded=function(){Laya.Browser.onMiniGame?this.handleMiniGame():(console.error("仅支持微信客户端"),s["default"].startScene&&Laya.Scene.open(s["default"].startScene,!0))},e.prototype.handleMiniGame=function(){Laya.Browser.window.wx.login({success:function(e){if(e.code){var t=e.code;console.error("登陆成功,获取到code",t),i["default"].getInstance().wecode=t,s["default"].startScene&&Laya.Scene.open(s["default"].startScene,!0)}}})},e.prototype.requestUUID=function(e){console.error("~~~~~~~~~~~~dadadada111~~~~~~~~~",e)},e}();new o},{"./GameConfig":1,"./script/manage/AdaptScene":43,"./script/manage/Playing_var":58}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("../Boss/bingqilinzuhe_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.attackCounter=0,t.attack_Delayed_01=0,t.attack_02_Delayed_01=0,t.skill_01_Delayed_01=0,t.skill_01_Angle_01=40,t.skill_01_Delayed_02=0,t.skill_01_Angle_02=40,t.skill_01_Delayed_03=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.initProperty(),this.creatBossAni()},t.prototype.initProperty=function(){this.self=this.owner,this.moveOnOff=!1,this.attack_Interval=8e3,this.firstAttack=!0,this.firstAttack_Interval=2e3,this.attackCounter=0,this.attack_NowTime=Date.now(),this.attack_02_Delayed_01=0,this.skill_01_Delayed_01=0,this.skill_01_Angle_01=40,this.skill_01_Delayed_02=0,this.skill_01_Angle_02=40,this.skill_01_Delayed_03=0,this.self.name="bingqilinzuhe"},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_bingqilinzuhe"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(205,165),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+50&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4&&(this.moveDirection="left"))},t.prototype.attack=function(e){this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),Laya.timer.frameOnce(10,this,function(){if(null!==this.owner.scene)if("random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_01_Bullet_01():this.attack_02_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()})},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new s["default"](i["default"].BulletType.boss,30732),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=o["default"].copydata(t),a.vars_.propertyObj.bossBulletType=i["default"].bossBulletType.common,a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a},t.prototype.attack_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=[],t=0;30>t;t++){var a=30+Math.floor(120*Math.random());e.push(a)}for(var s=function(t){for(var a=function(a){50+Math.floor(80*Math.random());i.attack_Delayed_01+=12,Laya.timer.frameOnce(i.attack_Delayed_01,i,function(){if(null!=this.owner.scene){var s=this.initBullet();s.name="attack_01_Bullet_01";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+150;s.pos(i,n);var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.row=t,o.line=a,o.moveOnOff=!0,o.bossName=this.owner.name,o.randomAngle=e[a]}})},s=0;30>s;s++)a(s);i.attack_Delayed_01=0},i=this,n=0;6>n;n++)s(n)},t.prototype.attack_02_Bullet_01=function(){for(var e=function(e){for(var a=function(a){t.attack_02_Delayed_01+=2,Laya.timer.frameOnce(t.attack_02_Delayed_01,t,function(){if(null!=this.owner.scene){var t=this.initBullet();t.name="attack_02_Bullet_01";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;t.pos(s,i);var n=t.getComponent(l["default"]);switch(n||t.addComponent(l["default"]),n=t.getComponent(l["default"]),n.group=a,e){case 0:n.firstAngle=12*a;break;case 1:n.firstAngle=12*a+45}n.moveOnOff=!0,n.bossName=this.owner.name}})},s=0;180>s;s++)a(s);t.attack_02_Delayed_01=0},t=this,a=0;2>a;a++)e(a)},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_01()},t.prototype.skill_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){for(var a=function(a){t.skill_01_Delayed_01+=2,Laya.timer.frameOnce(t.skill_01_Delayed_01,t,function(){if(null!=this.owner.scene){var t=this.initBullet(),s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;switch(e){case 0:t.pos(s+200,i);break;case 1:t.pos(s-200,i)}t.name="skill_01_Bullet_01";var n=t.getComponent(l["default"]);n||t.addComponent(l["default"]),n=t.getComponent(l["default"]),n.moveOnOff=!0,n.row=e,n.bossName=this.owner.name,n.bossPosX=s,n.bossPosY=i,a>=0&&10>a||a>=20&&30>a||a>=40&&50>a||a>=60&&70>a||a>=80&&90>a?(0===n.row?this.skill_01_Angle_01-=6:1===n.row&&(this.skill_01_Angle_01-=46),n.skill_01_FirstAngle_01=this.skill_01_Angle_01):(a>=10&&20>a||a>=30&&40>a||a>=50&&60>a||a>=70&&80>a||a>=90&&100>a)&&(0===n.row?this.skill_01_Angle_01-=46:1===n.row&&(this.skill_01_Angle_01+=6),n.skill_01_FirstAngle_01=this.skill_01_Angle_01),1===e&&99===a&&this.skill_01_Bullet_02()}})},s=0;100>s;s++)a(s);t.skill_01_Angle_01=40,t.skill_01_Delayed_01=0},t=this,a=0;2>a;a++)e(a)},t.prototype.skill_01_Bullet_02=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){for(var a=function(a){t.skill_01_Delayed_02+=2,Laya.timer.frameOnce(t.skill_01_Delayed_02,t,function(){if(null!=this.owner.scene){var t=this.initBullet(),s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;switch(e){case 0:t.pos(s,i);break;case 1:t.pos(s,i)}t.name="skill_01_Bullet_02";var n=t.getComponent(l["default"]);n||t.addComponent(l["default"]),n=t.getComponent(l["default"]),n.moveOnOff=!0,n.row=e,n.bossName=this.owner.name,n.bossPosX=s,n.bossPosY=i,a>=0&&10>a||a>=20&&30>a||a>=40&&50>a||a>=60&&70>a||a>=80&&90>a?(this.skill_01_Angle_02+=12,n.skill_01_FirstAngle_02=this.skill_01_Angle_02):(a>=10&&20>a||a>=30&&40>a||a>=50&&60>a||a>=70&&80>a||a>=90&&100>a)&&(this.skill_01_Angle_02-=12,n.skill_01_FirstAngle_02=this.skill_01_Angle_02),0===e&&99===a&&this.skill_01_Bullet_03()}})},s=0;100>s;s++)a(s);t.skill_01_Angle_02=40,t.skill_01_Delayed_02=0},t=this,a=0;1>a;a++)e(a)},t.prototype.skill_01_Bullet_03=function(){for(var e=function(e){for(var a=function(a){t.skill_01_Delayed_03+=2,Laya.timer.frameOnce(t.skill_01_Delayed_03,t,function(){if(null!=this.owner.scene){var t=this.initBullet();t.name="skill_01_Bullet_03";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;t.pos(s,i);var n=t.getComponent(l["default"]);switch(n||t.addComponent(l["default"]),n=t.getComponent(l["default"]),n.group=a,e){case 0:n.skill_01_FirstAngle_03=12*a-12;break;case 1:n.skill_01_FirstAngle_03=12*a;break;case 2:n.skill_01_FirstAngle_03=12*a+108;break;case 3:n.skill_01_FirstAngle_03=12*a+120;break;case 4:n.skill_01_FirstAngle_03=12*a+228;break;case 5:n.skill_01_FirstAngle_03=12*a+240}n.moveOnOff=!0,n.bossName=this.owner.name}})},s=0;150>s;s++)a(s);t.skill_01_Delayed_03=0},t=this,a=0;6>a;a++)e(a)},t.prototype.onUpdate=function(){if(this.moveOnOff&&!n["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_NowTime>this.firstAttack_Interval)this.attack_NowTime=e,this.firstAttack=!1,this.attack("null");else if(e-this.attack_NowTime>this.attack_Interval)if(this.attack_NowTime=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?(this.attack_Interval=15e3,this.skill()):(8e3!==this.attack_Interval&&(this.attack_Interval=8e3),this.attack("random"))}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Boss/bingqilinzuhe_bullet":4,"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.accelerated_01_01=.06,t.accelerated_02_01=.05,t.skill_accelerated_01_01=.1,t.skill_accelerated_01_02=.1,t.skill_accelerated_01_03=.1,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.selfFirstPoint=new Laya.Point(this.self.x,this.self.y),this.self.bingqilinzuhe_bullet=this,this.initProperty()},t.prototype.initProperty=function(){this.accelerated_01_01=.06,this.accelerated_02_01=.05,this.skill_accelerated_01_01=.1,this.skill_accelerated_01_02=.1,this.skill_accelerated_01_03=.1},t.prototype.bingQiLinZuHe_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)switch(this.self.name){case"attack_01_Bullet_01":this.attack_01_01();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"skill_01_Bullet_01":this.skill_01_01();break;case"skill_01_Bullet_02":this.skill_01_02();break;case"skill_01_Bullet_03":this.skill_01_03()}},t.prototype.attack_01_01=function(){var e=6;switch(this.row){case 0:this.attack_01_01_move1(this.randomAngle+45,e);break;case 1:this.attack_01_01_move1(this.randomAngle+30,e);break;case 2:this.attack_01_01_move1(this.randomAngle+15,e);break;case 3:this.attack_01_01_move1(this.randomAngle,e);break;case 4:this.attack_01_01_move1(this.randomAngle-15,e);break;case 5:this.attack_01_01_move1(this.randomAngle-30,e);break;case 6:this.attack_01_01_move1(this.randomAngle-45,e)}this.accelerated_01_01+=.05},t.prototype.attack_01_01_move1=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.accelerated_01_01).y},t.prototype.attack_02_01=function(){var e=4;this.self.x+=s["default"].speedXYByAngle(this.firstAngle,e+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(this.firstAngle,e+this.accelerated_02_01).y,this.accelerated_02_01+=.05},t.prototype.attack_02_01_move1=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t).x,this.self.y+=s["default"].speedXYByAngle(e,t).y},t.prototype.skill_01_01=function(){this.self.x+=s["default"].speedXYByAngle(this.skill_01_FirstAngle_01,6+this.skill_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(this.skill_01_FirstAngle_01,6+this.skill_accelerated_01_01).y,this.skill_accelerated_01_01+=.05},t.prototype.skill_01_02=function(){var e=4;this.self.x+=s["default"].speedXYByAngle(this.skill_01_FirstAngle_02,e+this.skill_accelerated_01_02).x,this.self.y+=s["default"].speedXYByAngle(this.skill_01_FirstAngle_02,e+this.skill_accelerated_01_02).y,this.skill_accelerated_01_02+=.05},t.prototype.skill_01_03=function(){var e;e=4,this.self.x+=s["default"].speedXYByAngle(this.skill_01_FirstAngle_03,e+this.skill_accelerated_01_03).x,this.self.y+=s["default"].speedXYByAngle(this.skill_01_FirstAngle_03,e+this.skill_accelerated_01_03).y,this.skill_accelerated_01_03+=.05},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("../Boss/bingtouxiang_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.attack_01_Delayed_01=0,t.attack_01_Launches_01=1,t.attack_02_Delayed_01=0,t.S_01_Delayed_01=0,t.S_01_Delayed_02=0,t.S_01_Delayed_03=0,t.S_01_Delayed_04=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.initProperty(),this.creatBossAni()},t.prototype.initProperty=function(){this.attack_NowTime=Date.now(),this.self=this.owner,this.moveOnOff=!1,this.attack_Interval=8e3,this.firstAttack=!0,this.firstAttack_Interval=2e3,this.attackCounter=0,this.self.name="bingtouxiang",this.attack_01_Delayed_01=0,this.attack_02_Delayed_01=0,this.S_01_Delayed_01=0,this.S_01_Delayed_02=0,this.S_01_Delayed_03=0,this.S_01_Delayed_04=0},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_bingtouxiang"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(205,165),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+50&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4&&(this.moveDirection="left"))},t.prototype.attack=function(e){this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),Laya.timer.frameOnce(30,this,function(){if(null!==this.owner.scene)if("random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_01_Bullet_01():this.attack_02_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()})},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new s["default"](i["default"].BulletType.boss,30836),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=o["default"].copydata(t),a.vars_.propertyObj.bossBulletType=i["default"].bossBulletType.common,a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a},t.prototype.attack_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=[60,70,90,100,110,120],t=function(t){a.attack_01_Launches_01+=35,a.attack_01_Delayed_01+=20,Laya.timer.frameOnce(a.attack_01_Delayed_01,a,function(){if(null!=this.owner.scene){var a=this.initBullet(),s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;a.pos(s,i),a.name="attack_01_Group_0"+t.toString()+this.attack_01_Launches_01.toString();var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.group=t,n.moveOnOff=!0,n.bossName=this.owner.name,n.randomAngle=e[Math.floor(Math.random()*e.length)],n.specialName="attack_01_01_Special",this.attack_01_Bullet_02(t.toString()+this.attack_01_Launches_01.toString())}})},a=this,s=0;18>s;s++)t(s);this.attack_01_Delayed_01=0},t.prototype.attack_01_Bullet_02=function(e){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var t=0;3>t;t++)for(var a=0;6>a;a++){var s=this.initBullet();s.name="attack_01_Bullet_02";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+50;s.pos(i,n);var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.moveOnOff=!0,o.bossName=this.owner.name,o.attack_01_02_firstAngle=60*a,o.specialName=null}},t.prototype.attack_02_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.attack_02_Delayed_01+=20,Laya.timer.frameOnce(t.attack_02_Delayed_01,t,function(){if(null!=this.owner.scene)for(var t=0;6>t;t++)for(var a=0;5>a;a++){var s=this.initBullet();s.name="attack_02_Bullet_01";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+50;s.pos(i,n);var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.A_02_01_firstAngle=60*t+45+24*e,o.moveOnOff=!0,o.bossName=this.owner.name,o.specialName=null}})},t=this,a=0;15>a;a++)e(a);this.attack_02_Delayed_01=0},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_03()},t.prototype.skill_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_01+=30,Laya.timer.frameOnce(t.S_01_Delayed_01,t,function(){if(null!=this.owner.scene)for(var t=0;8>t;t++){var a=this.initBullet(),s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;a.pos(s,i),a.name="skill_01_Bullet_01";var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.moveOnOff=!0,n.row=e,n.line=t,n.bossName=this.owner.name,n.bossPosX=s,n.bossPosY=i,n.S_01_FirstAngle_01=90,n.specialName=null}})},t=this,a=0;10>a;a++)e(a);this.S_01_Delayed_01=0},t.prototype.skill_01_Bullet_02=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_02+=25,Laya.timer.frameOnce(t.S_01_Delayed_02,t,function(){if(null!=this.owner.scene)for(var t=0;4>t;t++)for(var a=0;5>a;a++){var s=this.initBullet(),i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+50;s.pos(i,n),s.name="skill_01_Bullet_02";var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.moveOnOff=!0,o.row=t,o.line=a,o.bossName=this.owner.name,o.bossPosX=i,o.bossPosY=n,o.S_01_FirstAngle_02=90*t+45*e,o.specialName=null}})},t=this,a=0;14>a;a++)e(a);this.S_01_Delayed_02=0},t.prototype.skill_01_Bullet_03=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){e>60?t.S_01_Delayed_03+=5:t.S_01_Delayed_03+=15,Laya.timer.frameOnce(t.S_01_Delayed_03,t,function(){if(null!=this.owner.scene)for(var t=0;8>t;t++){var a=this.initBullet();a.name="skill_01_Bullet_03";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;a.pos(s,i);var n=a.getComponent(l["default"]);switch(n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.S_01_FirstAngle_03=45*t+45,t){case 0:n.S_01_FirstAngle_03=45;break;case 1:n.S_01_FirstAngle_03=30;break;case 2:n.S_01_FirstAngle_03=135;break;case 3:n.S_01_FirstAngle_03=120;break;case 4:n.S_01_FirstAngle_03=225;break;case 5:n.S_01_FirstAngle_03=210;break;case 6:n.S_01_FirstAngle_03=315;break;case 7:n.S_01_FirstAngle_03=300}n.S_01_FirstAngle_03+=30,n.S_01_FirstAngle_03+=45*e,n.moveOnOff=!0,n.bossName=this.owner.name,n.specialName=null,0===n.row&&7===n.line?this.skill_01_Bullet_01():22===n.row&&7===n.line?this.skill_01_Bullet_02():50===n.row&&7===n.line&&this.skill_01_Bullet_04()}})},t=this,a=0;80>a;a++)e(a);this.S_01_Delayed_03=0},t.prototype.skill_01_Bullet_04=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){10>=e?t.S_01_Delayed_04+=20:t.S_01_Delayed_04+=10,Laya.timer.frameOnce(t.S_01_Delayed_04,t,function(){if(null!=this.owner.scene)for(var t=0;20>t;t++){var a=this.initBullet();a.name="skill_01_Bullet_04";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.group=t,n.S_01_FirstAngle_04=18*t,n.moveOnOff=!0,n.bossName=this.owner.name,n.specialName=null}})},t=this,a=0;15>a;a++)e(a);this.S_01_Delayed_04=0},t.prototype.onUpdate=function(){if(this.moveOnOff&&!n["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_NowTime>this.firstAttack_Interval)this.attack_NowTime=e,this.firstAttack=!1,this.attack("null");else if(e-this.attack_NowTime>this.attack_Interval)if(this.attack_NowTime=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?(this.attack_Interval=2e4,this.skill()):(7e3!==this.attack_Interval&&(this.attack_Interval=7e3),this.attack("random"))}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Boss/bingtouxiang_bullet":6,"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.A_accelerated_01_01=.06,t.attack_01_02_radius_00=0,t.attack_01_02_radius_01=0,t.attack_01_02_radius_02=0,t.A_accelerated_01_02=.05,t.accelerated_02_01=.05,t.radius_01=0,t.radius_01Variable=0,t.S_accelerated_01_01=.1,t.S_accelerated_01_02=.1,t.S_accelerated_01_03=.1,t.S_01_FirstAngle_03=.1,t.S_accelerated_01_04=.1,t.S_01_FirstAngle_04=.1,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.self.bingtouxiang_bullet=this,this.initProperty()},t.prototype.initProperty=function(){this.A_accelerated_01_01=.06,this.attack_01_02_radius_00=0,this.attack_01_02_radius_01=0,this.attack_01_02_radius_02=0,this.A_accelerated_01_02=.05,this.accelerated_02_01=.05,this.radius_01=0,this.radius_01Variable=0,this.S_accelerated_01_01=.1,this.S_accelerated_01_02=.1,this.S_accelerated_01_03=.1,this.S_accelerated_01_04=.1},t.prototype.bingTouXiang_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)switch("attack_01_01_Special"===this.specialName&&this.attack_01_01_Special(),this.self.name){case"attack_01_Bullet_02":this.attack_01_02();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"skill_01_Bullet_01":this.skill_01_01();break;case"skill_01_Bullet_02":this.skill_01_02();break;case"skill_01_Bullet_03":this.skill_01_03();break;case"skill_01_Bullet_04":this.skill_01_04()}},t.prototype.attack_01_01_Special=function(){var e=4;this.self.x+=s["default"].speedXYByAngle(this.randomAngle,e+this.A_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(this.randomAngle,e+this.A_accelerated_01_01).y,this.A_accelerated_01_01+=.05},t.prototype.attack_01_02=function(){var e=this.self.parent,t=e.getChildByName("attack_01_Group_0"+this.group.toString());if("attack_01_Bullet_02"===this.self.name&&null===t)this.A_accelerated_01_02+=.05,this.self.x+=s["default"].speedXYByAngle(90,10+this.A_accelerated_01_02).x,this.self.y+=s["default"].speedXYByAngle(90,10+this.A_accelerated_01_02).y;else{var a=t.x,i=t.y,n=new Laya.Point(a,i);0===this.row?this.attack_01_02_move(this.attack_01_02_firstAngle,this.attack_01_02_radius_00,n):1===this.row?this.attack_01_02_move(this.attack_01_02_firstAngle,this.attack_01_02_radius_01,n):2===this.row&&this.attack_01_02_move(this.attack_01_02_firstAngle,this.attack_01_02_radius_02,n),this.attack_01_02_firstAngle+=1,this.attack_01_02_radius_00+=.62,this.attack_01_02_radius_01+=.65,this.attack_01_02_radius_01+=.68;
}},t.prototype.attack_01_02_move=function(e,t,a){this.self.x=s["default"].getRoundPos(e,t,a).x,this.self.y=s["default"].getRoundPos(e,t,a).y},t.prototype.attack_02_01=function(){var e=8;switch(this.line){case 0:this.attack_02_01_move1(this.A_02_01_firstAngle-6,e-2);break;case 1:this.attack_02_01_move1(this.A_02_01_firstAngle-3,e-1);break;case 2:this.attack_02_01_move1(this.A_02_01_firstAngle,e);break;case 3:this.attack_02_01_move1(this.A_02_01_firstAngle+3,e-1);break;case 4:this.attack_02_01_move1(this.A_02_01_firstAngle+6,e-2);break;case 5:this.attack_02_01_move1(this.A_02_01_firstAngle+10,e-2);break;case 6:this.attack_02_01_move1(this.A_02_01_firstAngle+15,e-3)}this.accelerated_02_01+=.05},t.prototype.attack_02_01_move1=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.accelerated_02_01).y},t.prototype.skill_01_01=function(){var e=10;switch(this.line){case 0:this.S_01_01_move(this.S_01_FirstAngle_01-3,e-3);break;case 1:this.S_01_01_move(this.S_01_FirstAngle_01-6,e-2);break;case 2:this.S_01_01_move(this.S_01_FirstAngle_01-3,e-1);break;case 3:this.S_01_01_move(this.S_01_FirstAngle_01,e);break;case 4:this.S_01_01_move(this.S_01_FirstAngle_01,e-4);break;case 5:this.S_01_01_move(this.S_01_FirstAngle_01+3,e-1);break;case 6:this.S_01_01_move(this.S_01_FirstAngle_01+6,e-2);break;case 7:this.S_01_01_move(this.S_01_FirstAngle_01+3,e-3)}this.S_accelerated_01_01+=.05},t.prototype.S_01_01_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_01).y},t.prototype.skill_01_02=function(){var e=5;switch(this.line){case 0:this.S_01_02_move(this.S_01_FirstAngle_02-22,e-.6);break;case 1:this.S_01_02_move(this.S_01_FirstAngle_02-11,e-.3);break;case 2:this.S_01_02_move(this.S_01_FirstAngle_02,e);break;case 3:this.S_01_02_move(this.S_01_FirstAngle_02+11,e-.3);break;case 4:this.S_01_02_move(this.S_01_FirstAngle_02+22,e-.6)}this.S_accelerated_01_02+=.05},t.prototype.S_01_02_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_02).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_02).y},t.prototype.skill_01_03=function(){var e=8;this.S_01_03_move(this.S_01_FirstAngle_03,e),this.S_accelerated_01_03+=.05},t.prototype.S_01_03_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_03).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_03).y},t.prototype.skill_01_04=function(){5===this.line||10===this.line||15===this.line||20===this.line?this.S_01_04_move(this.S_01_FirstAngle_04,9):4===this.line||6===this.line||9===this.line||11===this.line||14===this.line||16===this.line||19===this.line||1===this.line?this.S_01_04_move(this.S_01_FirstAngle_04,8):this.S_01_04_move(this.S_01_FirstAngle_04,7),this.S_accelerated_01_04+=.05},t.prototype.S_01_04_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_04).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_04).y},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("./daShuRen_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.attack_01Interval=5e3,t.firstAttack=!0,t.firstAttack_Interval=500,t.attackCounter=0,t.attack_01_01_Delayed=0,t.attack_Delayed=10,t.skill_Delayed=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.attack_01Time=Date.now(),this.self=this.owner,this.self.name="dashuren",this.creatBossAni()},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_dashuren"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(205,165),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+50&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4&&(this.moveDirection="left"))},t.prototype.attack=function(e){if(this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),"random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_02_Bullet_01():this.attack_01_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new s["default"](i["default"].BulletType.boss,30420),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=o["default"].copydata(t),a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a},t.prototype.attack_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){Laya.timer.frameOnce(t.attack_01_01_Delayed,t,function(){if(null!==this.owner.scene)for(var t=0;8>t;t++){var a=this.initBullet();a.name="attack_01_Bullet_01";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+100;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0;var o=10,r=80;n.firstAngle=35*t-r+e*o}}),t.attack_01_01_Delayed+=10},t=this,a=0;10>a;a++)e(a);this.attack_01_01_Delayed=0},t.prototype.attack_02_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){Laya.timer.frameOnce(t.attack_Delayed,t,function(){if(null!==this.owner.scene)for(var t=0;4>t;t++)for(var a=0;5>a;a++){var s=this.initBullet();s.name="attack_02_Bullet_01";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+100;switch(t){case 0:s.pos(i-100,n);break;case 1:s.pos(i-50,n);break;case 2:s.pos(i+50,n);break;case 3:s.pos(i+100,n)}var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.moveOnOff=!0,o.velocityRandom=15*Math.random()+5}}),t.attack_Delayed+=15},t=this,a=0;5>a;a++)e(a);this.attack_Delayed=0},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_01()},t.prototype.skill_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){Laya.timer.frameOnce(t.skill_Delayed,t,function(){if(null!==this.owner.scene)for(var t=0;10>t;t++)for(var a=0;8>a;a++){var s=this.initBullet();s.testvar&&console.error("创建标记zidan"),s.name="skill_01_Bullet_01";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3;s.pos(i,n);var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.moveOnOff=!0,o.velocityRandom=15*Math.random()+5}}),t.skill_Delayed+=10},t=this,a=0;5>a;a++)e(a);this.skill_Delayed=0},t.prototype.onUpdate=function(){if(this.moveOnOff&&!n["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_01Time>this.firstAttack_Interval&&(this.attack("null"),this.firstAttack=!1,this.attack_01Time=e),e-this.attack_01Time>this.attack_01Interval)if(this.attack_01Time=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?this.skill():this.attack("random")}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72,"./daShuRen_bullet":8}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.accelerated_01_01=.06,t.accelerated_02_01=.05,t.stepSwitch=!0,t.skill_accelerated_01_01=.1,t.timer_01=0,t.skill_stepSwitch_01=!0,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.bossName="dashuren",this.self.daShuRen_bullet=this,this.initProperty()},t.prototype.initProperty=function(){this.accelerated_01_01=.06,this.accelerated_02_01=.05,this.stepSwitch=!0,this.timer_01=0,this.skill_accelerated_01_01=.1,this.skill_stepSwitch_01=!0},t.prototype.daShuRen_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)switch(this.self.name){case"attack_01_Bullet_01":this.attack_01_01();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"skill_01_Bullet_01":this.skill_01_01()}},t.prototype.attack_01_01=function(){var e=6,t=this.firstAngle;this.self.x+=s["default"].speedXYByAngle(t,e+this.accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(t,e+this.accelerated_01_01).y,this.accelerated_01_01+=.01},t.prototype.attack_02_01=function(){if(this.self.y<1*Laya.stage.height/4&&this.stepSwitch)switch(this.row){case 0:this.self.x+=s["default"].speedXYByAngle(130,3+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(130,3+this.accelerated_02_01).y;break;case 1:this.self.x+=s["default"].speedXYByAngle(95,2+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(95,2+this.accelerated_02_01).y;break;case 2:this.self.x+=s["default"].speedXYByAngle(85,2+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(85,2+this.accelerated_02_01).y;break;case 3:this.self.x+=s["default"].speedXYByAngle(130,3+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(130,3+this.accelerated_02_01).y}else{var e=10;this.stepSwitch=!1;var t=32.5+25*this.line;this.self.x+=s["default"].speedXYByAngle(t,e+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(t,e+this.accelerated_02_01).y}this.accelerated_02_01+=.01},t.prototype.skill_01_01=function(){var e=4;if(this.timer_01<8&&this.skill_stepSwitch_01){var t=36*this.row;this.self.x+=s["default"].speedXYByAngle(t,e-4+this.skill_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(t,e-4+this.skill_accelerated_01_01).y}else{this.skill_stepSwitch_01=!1;var t=45+45*this.line;this.self.x+=s["default"].speedXYByAngle(t,e+this.skill_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(t,e+this.skill_accelerated_01_01).y}this.timer_01+=.1,this.skill_accelerated_01_01+=.05},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("../Boss/jibaobao_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.attack_Interval=1e4,t.firstAttack=!0,t.attackCounter=0,t.attack_01_Delayed_01=0,t.attack_01_Launches_01=1,t.attack_02_Delayed_01=0,t.S_01_Delayed_01=0,t.S_01_Delayed_02=0,t.S_01_Delayed_03=0,t.S_01_Delayed_04=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.initProperty(),this.creatBossAni(),this.self.name="jibaobao"},t.prototype.initProperty=function(){this.self=this.owner,this.moveOnOff=!1,this.attack_Interval=8e3,this.firstAttack=!0,this.firstAttack_Interval=4e3,this.attackCounter=0,this.attack_NowTime=Date.now(),this.attack_01_Delayed_01=0,this.attack_02_Delayed_01=0,this.S_01_Delayed_02=0,this.S_01_Delayed_03=0,this.S_01_Delayed_04=0},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_jibaobao"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(205,165),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+50&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4&&(this.moveDirection="left"))},t.prototype.attack=function(e){this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),Laya.timer.frameOnce(30,this,function(){if(null!==this.owner.scene)if("random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_01_Bullet_01():this.attack_02_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()})},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new s["default"](i["default"].BulletType.boss,31044),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=o["default"].copydata(t),a.vars_.propertyObj.bossBulletType=i["default"].bossBulletType.common,a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a},t.prototype.attack_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){Laya.timer.frameOnce(t.attack_01_Delayed_01,t,function(){if(null!=this.owner.scene)for(var t=0;18>t;t++){var a=this.initBullet();a.name="attack_01_Bullet_01";var s=a.getComponent(l["default"]);s||a.addComponent(l["default"]),s=a.getComponent(l["default"]),s.row=e,s.line=t,s.moveOnOff=!0,s.bossName=this.owner.name,s.A_01_01_FirstAngle=60*e+45;var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3,r=new Laya.Point(i,n),h=o.tools.getRoundPos(60*e+45,150,r);a.pos(h.x,h.y)}}),t.attack_01_Delayed_01+=15},t=this,a=0;20>a;a++)e(a);this.attack_01_Delayed_01=0},t.prototype.attack_02_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){Laya.timer.frameOnce(t.attack_02_Delayed_01,t,function(){if(null!=this.owner.scene)for(var t=0;20>t;t++){var a=this.initBullet();a.name="attack_02_Bullet_01";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+150;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.A_02_01_firstAngle=30*e,n.moveOnOff=!0,n.bossName=this.owner.name,n.bossPosX=s,n.bossPosX=i}}),t.attack_02_Delayed_01+=30},t=this,a=0;10>a;a++)e(a);this.attack_02_Delayed_01=0},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_03()},t.prototype.skill_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=0;5>e;e++)this.S_01_Delayed_01+=45,Laya.timer.frameOnce(this.S_01_Delayed_01,this,function(){if(null!=this.owner.scene)for(var e=0;4>e;e++)for(var t=0;20>t;t++){var a=this.initBullet(),s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50,n=new Laya.Point(s,i),r=o.tools.getRoundPos(90*e+45,150,n);a.pos(r.x,r.y),a.name="skill_01_Bullet_01";var h=a.getComponent(l["default"]);h||a.addComponent(l["default"]),h=a.getComponent(l["default"]),h.moveOnOff=!0,h.row=e,h.line=t,h.bossName=this.owner.name,h.bossPosX=s,h.bossPosY=i}});this.S_01_Delayed_01=0},t.prototype.skill_01_Bullet_02=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_02+=60,Laya.timer.frameOnce(t.S_01_Delayed_02,t,function(){if(null!=this.owner.scene)for(var t=0;8>t;t++)for(var a=0;4>a;a++){var s=this.initBullet(),i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+100;s.pos(i,n),s.name="skill_01_Bullet_02";var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.bossName=this.owner.name,o.bossPosX=i,o.bossPosY=n,o.S_01_02_firstAngle=45*t}})},t=this,a=0;8>a;a++)e(a);this.S_01_Delayed_02=0},t.prototype.skill_01_Bullet_03=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_03+=40,Laya.timer.frameOnce(t.S_01_Delayed_03,t,function(){if(null!=this.owner.scene)for(var t=0;2>t;t++)for(var a=0;4>a;a++){var s=this.initBullet();s.name="skill_01_Bullet_03";var i=void 0,n=void 0;switch(0===t?(i=this.self.x+1*this.self.width/3+130,n=this.self.y+1*this.self.height/3+50):(i=this.self.x+1*this.self.width/3-130,n=this.self.y+1*this.self.height/3+50),a){case 0:s.pos(i,n);break;case 1:s.pos(i+40,n);break;case 2:s.pos(i,n+40);break;case 3:s.pos(i+40,n+40)}var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.moveOnOff=!0,o.bossName=this.owner.name,0===o.group&&1===o.row&&3===o.line?this.skill_01_Bullet_02():14===o.group&&1===o.row&&3===o.line?this.skill_01_Bullet_01():22===o.group&&1===o.row&&3===o.line&&this.skill_01_Bullet_04()}})},t=this,a=0;25>a;a++)e(a);this.S_01_Delayed_03=0},t.prototype.skill_01_Bullet_04=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_04+=5,Laya.timer.frameOnce(t.S_01_Delayed_04,t,function(){if(null!=this.owner.scene)for(var t=0;10>t;t++){var a=this.initBullet();a.name="skill_01_Bullet_04";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+50;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0,n.bossName=this.owner.name,n.S_01_firstAngle_04=30*e}})},t=this,a=0;30>a;a++)e(a);this.S_01_Delayed_04=0},t.prototype.onUpdate=function(){if(this.moveOnOff&&!n["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_NowTime>this.firstAttack_Interval)this.attack_NowTime=e,this.firstAttack=!1,this.attack("null");else if(e-this.attack_NowTime>this.attack_Interval)if(this.attack_NowTime=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?(this.attack_Interval=22e3,this.skill()):(8e3!==this.attack_Interval&&(this.attack_Interval=8e3),this.attack("random"))}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Boss/jibaobao_bullet":10,"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.A_accelerated_01_01=.06,t.accelerated_02_01=.05,t.A_02_01_changeAngle=.1,t.A_02_01_longRadius=0,t.A_02_01_timer=.1,t.S_01_01_accelerated=.1,t.S_01_02_accelerated=.1,t.S_01_02_timer=0,t.S_accelerated_01_03=.1,t.S_accelerated_01_04=.1,t.S_01_firstAngle_04=.1,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.self.jibaobao_bullet=this,this.initProperty()},t.prototype.initProperty=function(){this.A_accelerated_01_01=.06,this.accelerated_02_01=.05,this.A_02_01_changeAngle=.1,this.A_02_01_longRadius=0,this.A_02_01_timer=.1,this.S_01_01_accelerated=.1,this.S_01_02_accelerated=.1,this.S_01_02_timer=0,this.S_accelerated_01_03=.1,this.S_accelerated_01_04=.1},t.prototype.jibaobao_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)switch(this.self.name){case"attack_01_Bullet_01":this.attack_01_01();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"skill_01_Bullet_01":this.skill_01_01();break;case"skill_01_Bullet_02":this.skill_01_02();break;case"skill_01_Bullet_03":this.skill_01_03();break;case"skill_01_Bullet_04":this.skill_01_04()}},t.prototype.attack_01_01=function(){var e=20*this.line,t=5;this.attack_01_01_move(e,t),this.A_accelerated_01_01+=.03},t.prototype.attack_01_01_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.A_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.A_accelerated_01_01).y},t.prototype.attack_01_02_move=function(e,t){var a=this.owner.scene.getChildByName("EnemySpite");if(this.boss=a.getChildByName(this.bossName),null!==this.boss){var i=this.boss.x+1*this.boss.width/3,n=this.boss.y+1*this.boss.height/3+50;this.bossPoint=new Laya.Point(i,n),this.self.x=s["default"].getRoundPos(e,t,this.bossPoint).x,this.self.y=s["default"].getRoundPos(e,t,this.bossPoint).y}},t.prototype.attack_02_01=function(){var e=this.owner.scene.getChildByName("EnemySpite");if(this.boss=e.getChildByName(this.bossName),null!==this.boss){var t=this.boss.x+1*this.boss.width/3,a=this.boss.y+1*this.boss.height/3+100;this.bossPoint=new Laya.Point(t,a),this.A_02_01_timer+=.1;var i,n=this.A_02_01_firstAngle+18*this.line+this.A_02_01_changeAngle;if(this.A_02_01_timer>0&&this.A_02_01_timer<3)this.line%2!==0?this.A_02_01_longRadius+=1.3:this.A_02_01_longRadius+=2,i=this.A_02_01_longRadius,this.attack_02_01_move2(n,i,this.bossPoint);else if(this.A_02_01_timer>=3&&this.A_02_01_timer<7)this.self.x+=s["default"].speedXYByAngle(90,5).x,this.self.y+=s["default"].speedXYByAngle(90,5).y;else if(this.A_02_01_timer>=7&&this.A_02_01_timer<10);else{this.accelerated_02_01+=.1;var o=void 0;this.line%2!==0?(o=2,this.self.x+=s["default"].speedXYByAngle(n,o+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(n,o+this.accelerated_02_01).y):(o=4,this.self.x+=s["default"].speedXYByAngle(n,o+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(n,o+this.accelerated_02_01).y)}}},t.prototype.attack_02_01_move1=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.accelerated_02_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.accelerated_02_01).y},t.prototype.attack_02_01_move2=function(e,t,a){this.self.x=s["default"].getRoundPos(e,t,a).x,this.self.y=s["default"].getRoundPos(e,t,a).y},t.prototype.skill_01_01=function(){var e=5,t=18*this.line;this.S_01_01_move(t,e),this.S_01_01_accelerated+=.03},t.prototype.S_01_01_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_01_01_accelerated).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_01_01_accelerated).y},t.prototype.skill_01_02=function(){var e;this.S_01_02_timer+=.1,this.S_01_02_timer>=0&&this.S_01_02_timer<2?(e=1,this.S_01_02_move_01(this.S_01_02_firstAngle,e-.4*this.line)):this.S_01_02_timer>=2&&this.S_01_02_timer<4?(e=1,this.S_01_02_move_01(this.S_01_02_firstAngle,e+.4*this.line)):this.S_01_02_timer>=4&&this.S_01_02_timer<5||this.S_01_02_timer>=5&&(e=4,this.S_01_02_move_01(this.S_01_02_firstAngle,e-.6*this.line+this.S_01_02_accelerated)),this.S_01_02_accelerated+=.03},t.prototype.S_01_02_move_01=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_01_02_accelerated).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_01_02_accelerated).y},t.prototype.skill_01_03=function(){var e=6;this.S_01_03_move(90,e),this.S_accelerated_01_03+=.03},t.prototype.S_01_03_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_03).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_03).y},t.prototype.skill_01_04=function(){var e=15*this.line+this.S_01_firstAngle_04,t=10;this.S_01_04_move(e,t),this.S_accelerated_01_04+=.03},t.prototype.S_01_04_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_04).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_accelerated_01_04).y},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("./maoWangHou_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.firstAttack=!0,t.firstAttack_Interval=500,t.attack_01Interval=5e3,t.attackCounter=0,t.attack_01_01_Delayed=0,t.attack_02_01_Delayed=0,t.skill_01_01_Delayed=0,t.skill_01_02_Delayed=40,t}return __extends(t,e),t.prototype.onEnable=function(){this.attack_01Time=Date.now(),this.self=this.owner,this.self.name="maoWangHou",this.creatBossAni()},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_maowanghou"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(205,165),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+120&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4-30&&(this.moveDirection="left"))},t.prototype.attack=function(e){if(this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),"random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_01_Bullet_01():this.attack_02_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new s["default"](i["default"].BulletType.boss,30212),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=o["default"].copydata(t),a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a},t.prototype.attack_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.line=1;for(var e=function(e){for(var a=function(a){t.attack_01_01_Delayed+=3,Laya.timer.frameOnce(t.attack_01_01_Delayed,t,function(){if(null!==this.owner.scene){var t=this.initBullet();t.name="attack_01_Bullet_01";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+80;switch(a){case 0:t.pos(s-200-50,i);break;case 1:t.pos(s-200,i+50);break;case 2:t.pos(s-200,i);break;case 3:t.pos(s-200,i-50);break;case 4:t.pos(s-200+50,i);break;case 5:t.pos(s+200-50,i);break;case 6:t.pos(s+200,i+50);break;case 7:t.pos(s+200,i);break;case 8:t.pos(s+200,i-50);break;case 9:t.pos(s+200+50,i)}var n=t.getComponent(l["default"]);n||t.addComponent(l["default"]),n=t.getComponent(l["default"]),n.row=e,n.line=a,n.moveOnOff=!0}})},s=0;10>s;s++)a(s)},t=this,a=0;5>a;a++)e(a);this.attack_01_01_Delayed=0},t.prototype.attack_02_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.line=1;for(var e=function(e){Laya.timer.frameOnce(t.attack_02_01_Delayed,t,function(){if(null!==this.owner.scene)for(var t=0;17>t;t++){var a=this.initBullet();a.name="attack_02_Bullet_01";var s=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3+30;switch(e){case 0:a.pos(s-180,i);break;case 1:a.pos(s+180,i);break;case 2:a.pos(s-180,i);break;case 3:a.pos(s+180,i);break;case 4:a.pos(s-180,i);break;case 5:a.pos(s+180,i);break;case 6:a.pos(s-180,i);break;case 7:a.pos(s+180,i)}var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0,n.velocityRandom=6*Math.random()+4}}),t.attack_02_01_Delayed+=20},t=this,a=0;8>a;a++)e(a);this.attack_02_01_Delayed=0},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_01(),this.skill_01_Bullet_02()},t.prototype.skill_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.line=1;for(var e=function(e){t.skill_01_01_Delayed+=15,Laya.timer.frameOnce(t.skill_01_01_Delayed,t,function(){if(null!==this.owner.scene)for(var t=0;6>t;t++){var a=this.initBullet();a.name="skill_01_Bullet_01";var s=Laya.stage.width/2-20,i=this.self.y+1*this.self.height/3+70;switch(t){case 0:a.pos(s-200,i);break;case 1:a.pos(s-150,i);break;case 2:a.pos(s-25,i);break;case 3:a.pos(s+25,i);break;case 4:a.pos(s+150,i);break;case 5:a.pos(s+200,i)}var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0}})},t=this,a=0;20>a;a++)e(a);this.skill_01_01_Delayed=0},t.prototype.skill_01_Bullet_02=function(){for(var e=function(e){t.skill_01_02_Delayed+=25,Laya.timer.frameOnce(t.skill_01_02_Delayed,t,function(){if(null!==this.owner.scene)for(var t=0;18>t;t++){var a=this.initBullet();a.name="skill_01_Bullet_02";var s=this.self.y+1*this.self.height/3+100,i=Laya.stage.width/2-20;a.pos(i,s);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0}})},t=this,a=0;10>a;a++)e(a);this.skill_01_02_Delayed=0},t.prototype.onUpdate=function(){if(this.moveOnOff&&!n["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_01Time>this.firstAttack_Interval&&(this.attack("null"),this.firstAttack=!1,this.attack_01Time=e),e-this.attack_01Time>this.attack_01Interval)if(this.attack_01Time=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?(this.attack_01Interval=8e3,this.skill()):(5e3!==this.attack_01Interval&&(this.attack_01Interval=5e3),this.attack("random"))}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72,"./maoWangHou_bullet":12}],12:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.attack_01_01_Accelerated=.06,t.attack_02_01_Accelerated=.06,t.stepSwitch=!0,t.skill_01_01_accelerated=.1,t.skill_01_02_accelerated=.1,
t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.bossName="maoWangHou",this.initProperty(),this.self.maoWangHou_bullet=this},t.prototype.initProperty=function(){this.attack_01_01_Accelerated=.06,this.attack_02_01_Accelerated=.06,this.stepSwitch=!0,this.velocityRandom,this.skill_01_01_accelerated=.1,this.skill_01_02_accelerated=.1},t.prototype.maoWangHou_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)switch(this.self.name){case"attack_01_Bullet_01":this.attack_01_01();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"skill_01_Bullet_01":this.skill_01_01();break;case"skill_01_Bullet_02":this.skill_01_02()}},t.prototype.attack_01_01=function(){0===this.line||5===this.line?(this.self.x+=s["default"].speedXYByAngle(130,6+this.attack_01_01_Accelerated).x,this.self.y+=s["default"].speedXYByAngle(130,6+this.attack_01_01_Accelerated).y):1===this.line||6===this.line?(this.self.x+=s["default"].speedXYByAngle(110,6+this.attack_01_01_Accelerated).x,this.self.y+=s["default"].speedXYByAngle(110,6+this.attack_01_01_Accelerated).y):2===this.line||7===this.line?(this.self.x+=s["default"].speedXYByAngle(90,6+this.attack_01_01_Accelerated).x,this.self.y+=s["default"].speedXYByAngle(90,6+this.attack_01_01_Accelerated).y):3===this.line||8===this.line?(this.self.x+=s["default"].speedXYByAngle(70,6+this.attack_01_01_Accelerated).x,this.self.y+=s["default"].speedXYByAngle(70,6+this.attack_01_01_Accelerated).y):(4===this.line||9===this.line)&&(this.self.x+=s["default"].speedXYByAngle(50,6+this.attack_01_01_Accelerated).x,this.self.y+=s["default"].speedXYByAngle(50,6+this.attack_01_01_Accelerated).y),this.attack_01_01_Accelerated+=.01},t.prototype.attack_02_01=function(){if(this.self.y<1*Laya.stage.height/2-150&&this.stepSwitch)this.self.y+=3+this.attack_02_01_Accelerated;else{this.stepSwitch=!1;var e=20*this.line;this.self.x+=s["default"].speedXYByAngle(e,this.velocityRandom+this.attack_02_01_Accelerated).x,this.self.y+=s["default"].speedXYByAngle(e,this.velocityRandom+this.attack_02_01_Accelerated).y}this.attack_02_01_Accelerated+=.01},t.prototype.skill_01_01=function(){var e=10;0===this.line||1===this.line?(this.self.x+=s["default"].speedXYByAngle(120,e+this.skill_01_01_accelerated).x,this.self.y+=s["default"].speedXYByAngle(120,e+this.skill_01_01_accelerated).y):2===this.line||3===this.line?(this.self.x+=s["default"].speedXYByAngle(90,e+this.skill_01_01_accelerated).x,this.self.y+=s["default"].speedXYByAngle(90,e+this.skill_01_01_accelerated).y):(4===this.line||5===this.line)&&(this.self.x+=s["default"].speedXYByAngle(60,e+this.skill_01_01_accelerated).x,this.self.y+=s["default"].speedXYByAngle(60,e+this.skill_01_01_accelerated).y)},t.prototype.skill_01_02=function(){var e=6,t=14*this.line-30;this.self.x+=s["default"].speedXYByAngle(t,e+this.skill_01_02_accelerated).x,this.self.y+=s["default"].speedXYByAngle(t,e+this.skill_01_02_accelerated).y,this.skill_01_02_accelerated+=.05},t.prototype.onDisable=function(){Laya.Pool.recover("bulltePrefab",this.owner)},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],13:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./nanGuaWangZi_bullet"),i=e("../role/BulletCommon"),n=e("../Data/JsonEnum"),o=e("../playing/PlayingSceneControl"),l=e("../Tools/Tool"),r=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.attack_01Interval=3e3,t.firstAttack=!0,t.firstAttack_Interval=500,t.attackCounter=0,t.attack_Delayed=0,t.skill_Delayed=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.initProperty(),this.creatBossAni()},t.prototype.initProperty=function(){this.attack_01Time=Date.now(),this.self=this.owner,this.moveOnOff=!1,this.attack_01Interval=3e3,this.firstAttack=!0,this.firstAttack_Interval=500,this.attackCounter=0,this.self.name="nanguawangzi"},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_nanguawangzi"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(200,150),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+80&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4&&(this.moveDirection="left"))},t.prototype.attack=function(e){if(this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),"random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_01_Bullet_01():this.attack_02_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new i["default"](n["default"].BulletType.boss,30108),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=l["default"].copydata(t),a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a.pos(350,350),a},t.prototype.attack_01_Bullet_01=function(){for(var e=0;15>e;e++){var t=this.initBullet();t.name="attack_01_Bullet_01",t.pos(this.self.x+1*this.self.width/3,this.self.y+1*this.self.height/3);var a=t.getComponent(s["default"]);a||t.addComponent(s["default"]),a=t.getComponent(s["default"]),a.line=e}},t.prototype.attack_02_Bullet_01=function(){for(var e=function(e){for(var a=0;5>a;a++)Laya.timer.frameOnce(t.attack_Delayed,t,function(){if(null!==this.owner.scene){var t=this.initBullet();t.name="attack_02_Bullet_01";var a=this.self.x+1*this.self.width/3,i=this.self.y+1*this.self.height/3;switch(e){case 0:t.pos(a-200,i);break;case 1:t.pos(a-175,i);break;case 2:t.pos(a-0,i);break;case 3:t.pos(a-0,i);break;case 4:t.pos(a+175,i);break;case 5:t.pos(a+200,i)}var n=t.getComponent(s["default"]);n||t.addComponent(s["default"]),n=t.getComponent(s["default"]),n.row=e}}),t.attack_Delayed+=10;t.attack_Delayed=0},t=this,a=0;6>a;a++)e(a)},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_01()},t.prototype.skill_01_Bullet_01=function(){for(var e=function(e){Laya.timer.frameOnce(t.skill_Delayed,t,function(){if(null!==this.owner.scene)for(var t=0;20>t;t++){var a=this.initBullet();a.name="skill_01_Bullet_01";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3;a.pos(i,n);var o=a.getComponent(s["default"]);o||a.addComponent(s["default"]),o=a.getComponent(s["default"]),o.line=t,o.row=e}}),t.skill_Delayed+=20},t=this,a=0;10>a;a++)e(a);this.skill_Delayed=0},t.prototype.onUpdate=function(){if(this.moveOnOff&&!o["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_01Time>this.firstAttack_Interval&&(this.attack("null"),this.firstAttack=!1,this.attack_01Time=e),e-this.attack_01Time>this.attack_01Interval)if(this.attack_01Time=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?(this.attack_01Interval=5e3,this.skill()):(3e3!==this.attack_01Interval&&(this.attack_01Interval=3e3),this.attack("random"))}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72,"./nanGuaWangZi_bullet":14}],14:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.accelerated_01_01=.06,t.accelerated_02_01=.06,t.skill_accelerated_01_01=.06,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.self.nanGuaWangZi_bullet=this,this.initProperty()},t.prototype.initProperty=function(){this.accelerated_01_01=.06,this.accelerated_02_01=.06,this.skill_accelerated_01_01=.06},t.prototype.nanGuaWangZi_Move=function(){if(!i["default"].instance.isGamePause)switch(this.self.name){case"attack_01_Bullet_01":this.attack_01_01();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"skill_01_Bullet_01":this.skill_01_01()}},t.prototype.attack_01_01=function(){var e=22.5+9*this.line;this.line%3===0?(this.self.x+=s["default"].speedXYByAngle(e,4+this.accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,4+this.accelerated_01_01).y):this.line%2===0?(this.self.x+=s["default"].speedXYByAngle(e,6+this.accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,6+this.accelerated_01_01).y):(this.self.x+=s["default"].speedXYByAngle(e,8+this.accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,8+this.accelerated_01_01).y),this.accelerated_01_01+=.01},t.prototype.attack_02_01=function(){var e=6;if(0===this.row||2===this.row||4===this.row){var t=60;this.self.x+=s["default"].speedXYByAngle(t,e+this.accelerated_02_01).x/3,this.self.y+=s["default"].speedXYByAngle(t,e+this.accelerated_02_01).y}else{var t=120;this.self.x+=s["default"].speedXYByAngle(t,e+this.accelerated_02_01).x/3,this.self.y+=s["default"].speedXYByAngle(t,e+this.accelerated_02_01).y}this.accelerated_02_01+=.01},t.prototype.skill_01_01=function(){var e,t=4;this.row%2!==0?(e=18*this.line,this.self.x+=s["default"].speedXYByAngle(e,t+this.skill_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.skill_accelerated_01_01).y):(e=18*this.line+9,this.self.x+=s["default"].speedXYByAngle(e,t+this.skill_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.skill_accelerated_01_01).y),this.skill_accelerated_01_01+=.05},t.prototype.onDisable=function(){Laya.Pool.recover("bulltePrefab",this.owner)},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("../Boss/shitoujuren_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.attack_Interval=6e3,t.firstAttack=!0,t.firstAttack_Interval=500,t.attackCounter=0,t.attack_Delayed=130,t.skill_01_Delayed_01=0,t.tag=0,t.skill_01_Delayed_02=0,t.launches=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.initProperty(),this.creatBossAni()},t.prototype.initProperty=function(){this.self=this.owner,this.moveOnOff=!1,this.attack_Interval=6e3,this.firstAttack=!0,this.firstAttack_Interval=500,this.attackCounter=0,this.attack_NowTime=Date.now(),this.self.name="shitoujuren"},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_shitoujuren"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(205,165),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+50&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4&&(this.moveDirection="left"))},t.prototype.attack=function(e){this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),Laya.timer.frameOnce(30,this,function(){if(null!==this.owner.scene)if("random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_01_Bullet_01():this.attack_02_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()})},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new s["default"](i["default"].BulletType.boss,30524),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=o["default"].copydata(t),a.vars_.propertyObj.bossBulletType=i["default"].bossBulletType.common,a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a},t.prototype.attack_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=0;6>e;e++)for(var t=0;6>t;t++)for(var a=0;6>a;a++){var s=this.initBullet();s.name="attack_01_Bullet_01";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+150;s.pos(i,n);var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.moveOnOff=!0,o.bossName=this.owner.name,5===t&&10===a&&(this.owner.scene.getChildByName("bulletParent_enemy").zOrder=0,this.self.parent.zOrder=1)}},t.prototype.attack_02_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=this.self.x+1*this.self.width/3,t=this.self.y+1*this.self.height/3+150,a=0;11>a;a++)for(var s=t-(Math.floor(50*Math.random())+50),i=Math.floor(300*Math.random())+300+t,n=5*Math.random()+10,o=5*Math.random()+5,r=1*Math.random()+.5,h=0;4>h;h++)for(var c=0;6>c;c++){var u=this.initBullet();u.name="attack_02_Bullet_01",u.pos(e,t);var p=u.getComponent(l["default"]);p||u.addComponent(l["default"]),p=u.getComponent(l["default"]),p.group=a,p.row=h,p.line=c,p.moveOnOff=!0,p.bossName=this.owner.name,p.distance_up=s,p.distance_drop=i,p.velocity_up=n,p.velocity_drop=o,p.basedTime=r}this.attack_Delayed=0},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_01()},t.prototype.skill_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=0;4>e;e++){if(null===this.owner.scene)return;var t=this.initBullet();switch(e){case 0:t.name="skill_01_Row_B_00";break;case 1:t.name="skill_01_Row_B_01";break;case 2:t.name="skill_01_Row_B_02";break;case 3:t.name="skill_01_Row_B_03"}var a=this.self.x+1*this.self.width/3,s=this.self.y+1*this.self.height/3+50;t.pos(a,s);var i=t.getComponent(l["default"]);i||t.addComponent(l["default"]),i=t.getComponent(l["default"]),i.row=e,i.rowName="skill_01_Row_B",i.moveOnOff=!0,i.bossName=this.owner.name,i.bossPosX=a,i.bossPosY=s}Laya.timer.frameOnce(140,this,function(){this.skill_01_Bullet_02()})},t.prototype.skill_01_Bullet_02=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.launches=0;for(var e=function(e){Laya.timer.frameOnce(t.skill_01_Delayed_02,t,function(){if(null!==this.owner.scene)for(var t=0;4>t;t++)for(var a=0;8>a;a++){var s=this.initBullet();s.name="skill_01_Bullet_02";var i=s.parent;if(null===i)return;switch(t){case 0:if(null===i.getChildByName("skill_01_Row_B_00"))return;var n=i.getChildByName("skill_01_Row_B_00").x,o=i.getChildByName("skill_01_Row_B_00").y;s.pos(n,o);break;case 1:if(null===i.getChildByName("skill_01_Row_B_01"))return;var r=i.getChildByName("skill_01_Row_B_01").x,h=i.getChildByName("skill_01_Row_B_01").y;s.pos(r,h);break;case 2:if(null===i.getChildByName("skill_01_Row_B_02"))return;var c=i.getChildByName("skill_01_Row_B_02").x,u=i.getChildByName("skill_01_Row_B_02").y;s.pos(c,u);break;case 3:if(null===i.getChildByName("skill_01_Row_B_03"))return;var p=i.getChildByName("skill_01_Row_B_03").x,f=i.getChildByName("skill_01_Row_B_03").y;s.pos(p,f)}var d=s.getComponent(l["default"]);d||s.addComponent(l["default"]),d=s.getComponent(l["default"]),d.group=e,d.row=t,d.line=a,d.moveOnOff=!0,d.bossName=this.owner.name}}),t.launches+=1,t.launches<10?t.skill_01_Delayed_02+=36:t.launches>=10&&t.launches<11?t.skill_01_Delayed_02+=100:t.launches>=11&&t.launches<40?t.skill_01_Delayed_02+=18:t.launches>=40&&t.launches<41?t.skill_01_Delayed_02+=100:t.launches>=41&&t.launches<48&&(t.skill_01_Delayed_02+=9)},t=this,a=0;48>a;a++)e(a);this.skill_01_Delayed_02=0,this.launches=0},t.prototype.onUpdate=function(){if(this.moveOnOff&&!n["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_NowTime>this.firstAttack_Interval)this.attack_NowTime=e,this.firstAttack=!1,this.attack("null");else if(e-this.attack_NowTime>this.attack_Interval)if(this.attack_NowTime=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?(this.attack_Interval=26e3,this.skill()):(6e3!==this.attack_Interval&&(this.attack_Interval=6e3),this.attack("random"))}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Boss/shitoujuren_bullet":16,"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72}],16:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.accelerated_01_01=.06,t.attack_01_timer_01=.1,t.attack_01_02_angleChange=1,t.accelerated_02_01=.05,t.accelerated_02_02=0,t.accelerated_02_03=.1,t.accelerated_02_04=.1,t.deceleration_02_01=0,t.attack_02_timer_01=.1,t.skill_accelerated_01_01=.1,t.skill_Row_timer_01=0,t.stepSwitch_01=!0,t.angleChange_01=1,t.angleRow_00=225,t.angleRow_01=315,t.angleRow_02=135,t.angleRow_03=45,t.radius_00=0,t.radius_01=0,t.radius_02=0,t.radius_03=0,t.skill_accelerated_01_02=.1,t.angleChange_02=1,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.initProperty(),this.self.shitoujuren_bullet=this},t.prototype.initProperty=function(){this.accelerated_01_01=.06,this.attack_01_timer_01=.1,this.attack_01_02_angleChange=1,this.accelerated_02_01=.05,this.accelerated_02_02=0,this.accelerated_02_03=.1,this.accelerated_02_04=.1,this.deceleration_02_01=0,this.attack_02_timer_01=.1,this.velocity_up,this.velocity_drop,this.basedTime,this.skill_accelerated_01_01=.1,this.skill_Row_timer_01=0,this.stepSwitch_01=!0,this.velocityRandom,this.angleChange_01=1,this.angleRow_00=225,this.angleRow_01=315,this.angleRow_02=135,this.angleRow_03=45,this.radius_00=0,this.radius_01=0,this.radius_02=0,this.radius_03=0,this.skill_accelerated_01_02=.1},t.prototype.shiTouJuRen_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)if("skill_01_Row_B"===this.rowName)this.skill_01_01();else switch(this.self.name){case"attack_01_Bullet_01":this.attack_01_01();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"skill_01_Bullet_02":this.skill_01_02()}},t.prototype.attack_01_01=function(){this.attack_01_timer_01+=.1;var e=18,t=160,a=20;this.attack_01_timer_01<.5?0===this.group||1===this.group||2===this.group?this.attack_01_01_move1(t,e):(3===this.group||4===this.group||5===this.group)&&this.attack_01_01_move1(a,e):this.attack_01_timer_01>=.5&&this.attack_01_timer_01<1?1===this.group||2===this.group?this.attack_01_01_move1(t,e):(4===this.group||5===this.group)&&this.attack_01_01_move1(a,e):this.attack_01_timer_01>=1&&this.attack_01_timer_01<1.5&&(2===this.group?this.attack_01_01_move1(t,e):5===this.group&&this.attack_01_01_move1(a,e)),this.attack_01_timer_01>=2&&0===this.row&&this.attack_01_02(),this.attack_01_timer_01>=3.3&&1===this.row&&this.attack_01_02(),this.attack_01_timer_01>=4.6&&2===this.row&&this.attack_01_02(),this.attack_01_timer_01>=5.9&&3===this.row&&this.attack_01_02(),this.attack_01_timer_01>=7.2&&4===this.row&&this.attack_01_02(),this.attack_01_timer_01>=8.5&&5===this.row&&this.attack_01_02(),this.accelerated_01_01+=.01},t.prototype.attack_01_01_move1=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.accelerated_01_01).y},t.prototype.attack_01_02=function(){this.attack_01_02_angleChange+=.1;var e=12,t=22.5+this.attack_01_02_angleChange;if(0===this.group||1===this.group||2===this.group)switch(this.line){case 0:this.attack_01_01_move1(t,e);break;case 1:this.attack_01_01_move1(2*t,e);break;case 2:this.attack_01_01_move1(3*t,e);break;case 3:this.attack_01_01_move1(t+180,e);break;case 4:this.attack_01_01_move1(2*t+180,e);break;case 5:this.attack_01_01_move1(3*t+180,e)}else if(3===this.group||4===this.group||5===this.group)switch(this.line){case 0:this.attack_01_01_move1(-t,e);break;case 1:this.attack_01_01_move1(-(2*t),e);break;case 2:this.attack_01_01_move1(-(3*t),e);break;case 3:this.attack_01_01_move1(-(t+180),e);break;case 4:this.attack_01_01_move1(-(2*t+180),e);break;case 5:this.attack_01_01_move1(-(3*t+180),e)}},t.prototype.attack_02_01=function(){if(this.attack_02_timer_01+=.1,this.attack_02_timer_01<.8+this.basedTime){this.accelerated_02_01+=.1;var e=195;this.attack_02_01_move1(e+15*this.group,this.velocity_up+this.accelerated_02_01)}else if(this.attack_02_timer_01>=.8+this.basedTime&&this.attack_02_timer_01<1+this.basedTime){this.deceleration_02_01-=.3;var e=200;this.attack_02_01_move1(e+18*this.group,this.velocity_up-this.deceleration_02_01)}else if(this.attack_02_timer_01>=1+this.basedTime&&this.attack_02_timer_01<4+this.basedTime)this.accelerated_02_02+=.4,this.self.y+=this.velocity_drop+this.accelerated_02_02;else if(this.attack_02_timer_01>=4+this.basedTime&&this.attack_02_timer_01<7+this.basedTime){var t=90*this.row+45;this.accelerated_02_03+=.1,this.self.x+=s["default"].speedXYByAngle(t,10+this.accelerated_02_03).x,this.self.y+=s["default"].speedXYByAngle(t,10+this.accelerated_02_03).y}else if(this.attack_02_timer_01>=7+this.basedTime){this.accelerated_02_04+=.05;var a=60*this.line+30;this.self.x+=s["default"].speedXYByAngle(a,this.velocity_up-3+this.accelerated_02_04).x,this.self.y+=s["default"].speedXYByAngle(a,this.velocity_up-3+this.accelerated_02_04).y}},t.prototype.attack_02_01_move1=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t).x,this.self.y+=s["default"].speedXYByAngle(e,t).y},t.prototype.skill_01_01=function(){var e=this.owner.scene.getChildByName("EnemySpite");if(this.boss=e.getChildByName(this.bossName),null!==this.boss){var t=this.boss.x+1*this.boss.width/3,a=this.boss.y+1*this.boss.height/3+50;this.bossPoint=new Laya.Point(t,a);var i=45;this.skill_Row_timer_01>=0&&this.skill_Row_timer_01<3?0===this.row&&(this.radius_00+=5,this.self.x=s["default"].getRoundPos(this.angleRow_00,this.radius_00,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_00,this.radius_00,this.bossPoint).y):this.skill_Row_timer_01>=3&&this.skill_Row_timer_01<6?1===this.row&&(this.radius_01+=5,this.self.x=s["default"].getRoundPos(this.angleRow_01,this.radius_01,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_01,this.radius_01,this.bossPoint).y):this.skill_Row_timer_01>=6&&this.skill_Row_timer_01<9?2===this.row&&(this.radius_02+=5,this.self.x=s["default"].getRoundPos(this.angleRow_02,this.radius_02,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_02,this.radius_02,this.bossPoint).y):this.skill_Row_timer_01>=9&&this.skill_Row_timer_01<12?(3===this.row&&(this.radius_03+=5,this.self.x=s["default"].getRoundPos(this.angleRow_03,this.radius_03,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_03,this.radius_03,this.bossPoint).y),this.angleRow_03=i):this.skill_Row_timer_01>=12&&this.angleChange_01<360?(this.skill_01_01_Group_Move(),this.angleRow_00+=1,this.angleRow_01+=1,this.angleRow_02+=1,this.angleRow_03+=1,this.angleChange_01+=1):this.angleChange_01>=360&&this.angleChange_01<720?(this.skill_01_01_Group_Move(),this.radius_00+=.08,this.radius_01+=.08,this.radius_02+=.08,this.radius_03+=.08,this.angleRow_00-=1,this.angleRow_01-=1,this.angleRow_02-=1,this.angleRow_03-=1,this.angleChange_01+=.5):this.angleChange_01>=720&&this.angleChange_01<900?(this.angleChange_01+=1,this.radius_00+=.6,this.radius_01+=.6,this.radius_02+=.6,this.radius_03+=.6,this.skill_01_01_Group_Move()):this.angleChange_01>=900&&this.angleChange_01<950?(this.radius_00+=20,this.radius_01+=20,this.radius_02+=20,this.radius_03+=20,this.skill_01_01_Group_Move(),this.angleChange_01+=1):this.angleChange_01>=900&&(this.angleChange_01+=1,this.self.removeSelf()),this.skill_Row_timer_01+=.1}},t.prototype.skill_01_01_Group_Move=function(){switch(this.row){case 0:this.self.x=s["default"].getRoundPos(this.angleRow_00,this.radius_00,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_00,this.radius_00,this.bossPoint).y;break;case 1:this.self.x=s["default"].getRoundPos(this.angleRow_01,this.radius_01,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_01,this.radius_01,this.bossPoint).y;break;case 2:this.self.x=s["default"].getRoundPos(this.angleRow_02,this.radius_02,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_02,this.radius_02,this.bossPoint).y;break;case 3:this.self.x=s["default"].getRoundPos(this.angleRow_03,this.radius_03,this.bossPoint).x,this.self.y=s["default"].getRoundPos(this.angleRow_03,this.radius_03,this.bossPoint).y}},t.prototype.skill_01_02=function(){var e=45*this.line,t=4;this.self.x+=s["default"].speedXYByAngle(e,t+this.skill_accelerated_01_02).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.skill_accelerated_01_02).y,this.skill_accelerated_01_02+=.1},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],17:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("../Boss/zhangyunvhuang_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.attack_Interval=1e4,t.firstAttack=!0,t.attackCounter=0,t.attack_01_Delayed_01=0,t.attack_01_Launches_01=1,t.attack_02_Delayed_01=0,t.attack_02_Delayed_02=0,t.S_01_Delayed_01=0,t.S_01_Delayed_02=0,t.S_01_Delayed_03=0,t.S_01_Delayed_04=0,t.S_01_Delayed_05=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.initProperty(),this.creatBossAni()},t.prototype.initProperty=function(){this.self=this.owner,this.moveOnOff=!1,this.attack_Interval=8500,this.firstAttack=!0,this.firstAttack_Interval=4e3,this.attackCounter=0,this.attack_NowTime=Date.now(),this.boosCurrentX=null,this.boosCurrentY=null,this.self.name="zhangyunvhuang",this.attack_01_Delayed_01=0,this.attack_02_Delayed_01=0,this.S_01_Delayed_02=0,this.S_01_Delayed_03=0,this.S_01_Delayed_04=0},t.prototype.creatBossAni=function(){this.owner.vars_.propertyObj.nick;this.skeleton=this.owner.getChildByName("Boss_zhangyunvhuang"),this.skeleton.play("stand",!0),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.onError=function(){console.log("加载错误！")},t.prototype.parseComplete=function(){this.skeleton=this.bossTemplet.buildArmature(0),this.skeleton.play("stand",!0),this.skeleton.playbackRate(1),this.self.addChild(this.skeleton),this.skeleton.pos(205,165),this.moveOnOff=!0;var e=2*Math.random();1===e?this.moveDirection="left":this.moveDirection="right"},t.prototype.move=function(){"left"===this.moveDirection?(this.self.x-=5,this.self.x+this.self.width/2<1*Laya.stage.width/4+50&&(this.moveDirection="right")):"right"===this.moveDirection&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4&&(this.moveDirection="left"))},t.prototype.attack=function(e){this.skeleton.play("attack",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),Laya.timer.frameOnce(30,this,function(){if(null!==this.owner.scene)if("random"===e){var t=Math.floor(2*Math.random());1===t?this.attack_01_Bullet_01():this.attack_02_Bullet_01()}else this.attackCounter%2!==0?this.attack_01_Bullet_01():this.attack_02_Bullet_01()})},t.prototype.initBullet=function(){if(null==this.owner.scene){var e=new Laya.Sprite;return e}this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var t=new s["default"](i["default"].BulletType.boss,31148),a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);return a.vars_||(a.vars_={}),a.vars_.propertyObj=o["default"].copydata(t),a.vars_.propertyObj.bossBulletType=i["default"].bossBulletType.common,a.vars_.propertyObj.fromNick=this.self.name,this.bullteParent.addChild(a),a},t.prototype.attack_01_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){4===e?t.attack_01_Delayed_01+=80:t.attack_01_Delayed_01+=30,Laya.timer.frameOnce(t.attack_01_Delayed_01,t,function(){if(null!=this.owner.scene)for(var t=0;12>t;t++)for(var a=0;6>a;a++){var s=this.initBullet();s.name="attack_01_Bullet_01";var i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+50;s.pos(i,n);var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.moveOnOff=!0,o.bossName=this.owner.name,o.A_01_01_firstAngle=36*t}})},t=this,a=0;8>a;a++)e(a);this.attack_01_Delayed_01=0},t.prototype.attack_02_Bullet_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){Laya.timer.frameOnce(t.attack_02_Delayed_01,t,function(){if(null!=this.owner.scene){var t=this.initBullet();t.name="attack_02_Bullet_01";var a=this.self.x+1*this.self.width/3,s=this.self.y+1*this.self.height/3+150,i=t.getComponent(l["default"]);i||t.addComponent(l["default"]),i=t.getComponent(l["default"]),i.line=e,e%2===0?(i.A_02_01_firstAngle=12*e,t.pos(1*Laya.stage.width/4-25,s)):(t.pos(3*Laya.stage.width/4-25,s),i.A_02_01_firstAngle=12*-e),i.moveOnOff=!0,i.bossName=this.owner.name,i.bossPosX=a,i.bossPosX=s,249===i.line&&this.attack_02_Bullet_02()}}),t.attack_02_Delayed_01+=1},t=this,a=0;250>a;a++)e(a);this.attack_02_Delayed_01=0},t.prototype.attack_02_Bullet_02=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){Laya.timer.frameOnce(t.attack_02_Delayed_02,t,function(){if(null!=this.owner.scene){var t=this.initBullet();t.name="attack_02_Bullet_02";var a=this.self.x+1*this.self.width/3,s=this.self.y+1*this.self.height/3+50;t.pos(a,s);var i=t.getComponent(l["default"]);i||t.addComponent(l["default"]),i=t.getComponent(l["default"]),i.line=e,i.moveOnOff=!0,i.bossName=this.owner.name,i.bossPosX=a,i.bossPosX=s,i.A_02_02_firstAngle=12*e}}),t.attack_02_Delayed_02+=1},t=this,a=0;100>a;a++)e(a);this.attack_02_Delayed_02=0},t.prototype.skill=function(){this.skeleton.play("skill",!1),this.moveOnOff=!1,this.attackCounter++,this.skeleton.on(Laya.Event.STOPPED,this,function(){this.skeleton.play("stand",!0),this.moveOnOff=!0}),this.skill_01_Bullet_01()},t.prototype.skill_01_Bullet_01=function(){
this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_01+=45,Laya.timer.frameOnce(t.S_01_Delayed_01,t,function(){if(null!=this.owner.scene)for(var t=0;6>t;t++)for(var a=0;4>a;a++){var s=this.initBullet(),i=this.self.x+1*this.self.width/3,n=this.self.y+1*this.self.height/3+150;s.pos(i,n),s.name="skill_01_Bullet_01";var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.moveOnOff=!0,o.group=e,o.row=t,o.line=a,o.bossName=this.owner.name,o.bossPosX=i,o.bossPosY=n,o.S_01_01_firstAngle=60*t,3===o.group&&5===o.row&&3===o.line?this.skill_01_Bullet_04():12===o.group&&5===o.row&&3===o.line?this.skill_01_Bullet_03():23===o.group&&5===o.row&&3===o.line&&this.skill_01_Bullet_02()}})},t=this,a=0;28>a;a++)e(a);this.S_01_Delayed_01=0},t.prototype.skill_01_Bullet_02=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_02+=5,Laya.timer.frameOnce(t.S_01_Delayed_02,t,function(){if(null!=this.owner.scene)for(var t=0;8>t;t++){var a=void 0;a=e>40?9:1;for(var s=0;a>s;s++){var i=this.initBullet(),n=Laya.stage.width/2-25,o=this.self.y+1*this.self.height/3+100;i.pos(n,o),i.name="skill_01_Bullet_02";var r=i.getComponent(l["default"]);r||i.addComponent(l["default"]),r=i.getComponent(l["default"]),r.moveOnOff=!0,r.group=e,r.row=t,r.line=s,r.bossName=this.owner.name,r.bossPosX=n,r.bossPosY=o,r.S_01_02_firstAngle=45*t+2*e}}})},t=this,a=0;60>a;a++)e(a);this.S_01_Delayed_02=0},t.prototype.skill_01_Bullet_03=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_03+=40-1*e,Laya.timer.frameOnce(t.S_01_Delayed_03,t,function(){if(null!=this.owner.scene)for(var t=0;30>t;t++){var a=this.initBullet();a.name="skill_01_Bullet_03";var s=Laya.stage.width/2-25,i=this.self.y+1*this.self.height/3+100;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0,n.bossName=this.owner.name,n.S_01_03_firstAngle=12*t}})},t=this,a=0;20>a;a++)e(a);this.S_01_Delayed_03=0},t.prototype.skill_01_Bullet_04=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;var e=50;this.S_01_Delayed_04=0;for(var t=function(t){t===e?a.S_01_Delayed_04+=15:a.S_01_Delayed_04+=6,Laya.timer.frameOnce(a.S_01_Delayed_04,a,function(){if(null!=this.owner.scene)for(var a=0;2>a;a++){this.S_01_Delayed_04+=5;for(var s=0;3>s;s++){var i=this.initBullet();i.name="skill_01_Bullet_04";var n=(this.self.x+1*this.self.width/3,this.self.y+1*this.self.height/3+50);0===a?i.pos(1*Laya.stage.width/4-25,n):i.pos(3*Laya.stage.width/4-25,n);var o=i.getComponent(l["default"]);o||i.addComponent(l["default"]),o=i.getComponent(l["default"]),o.group=t,o.row=a,o.line=s,o.moveOnOff=!0,o.bossName=this.owner.name;var r=3,h=25;t>=0&&e>t?0===a?o.S_01_firstAngle_04=30*s+h+t*r:o.S_01_firstAngle_04=180-h-30*s-t*r:0===a?o.S_01_firstAngle_04=30*s+h+e*r-(t-e)*r*2:o.S_01_firstAngle_04=180-h-30*s-e*r+(t-e)*r*2}}})},a=this,s=0;100>s;s++)t(s)},t.prototype.skill_01_Bullet_05=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1;for(var e=function(e){t.S_01_Delayed_05+=5,Laya.timer.frameOnce(t.S_01_Delayed_05,t,function(){if(null!=this.owner.scene)for(var t=0;2>t;t++){this.S_01_Delayed_04+=5;for(var a=0;3>a;a++){var s=this.initBullet();s.name="skill_01_Bullet_05";var i=(this.self.x+1*this.self.width/3,this.self.y+1*this.self.height/3+50);0===t?s.pos(1*Laya.stage.width/4-25,i):s.pos(3*Laya.stage.width/4-25,i);var n=s.getComponent(l["default"]);n||s.addComponent(l["default"]),n=s.getComponent(l["default"]),n.group=e,n.row=t,n.line=a,n.moveOnOff=!0,n.bossName=this.owner.name,0===t?n.S_01_firstAngle_04=30*a+60+1.5*e:n.S_01_firstAngle_04=30*a+60-1.5*e}}})},t=this,a=0;60>a;a++)e(a);this.S_01_Delayed_05=0},t.prototype.onUpdate=function(){if(this.moveOnOff&&!n["default"].instance.isGamePause){this.move();var e=Date.now();if(this.firstAttack&&e-this.attack_NowTime>this.firstAttack_Interval)this.attack_NowTime=e,this.firstAttack=!1,this.attack("null");else if(e-this.attack_NowTime>this.attack_Interval)if(this.attack_NowTime=e,null!==this.owner.scene){var t=this.self.vars_.propertyObj.hp/this.self.vars_.propertyObj.startHp;t>.5?this.attack("null"):this.attackCounter%2!==0?(this.attack_Interval=26e3,this.skill()):(8500!==this.attack_Interval&&(this.attack_Interval=8500),this.attack("random"))}else this.moveOnOff=!1}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Boss/zhangyunvhuang_bullet":18,"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72}],18:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t.A_accelerated_01_01=.06,t.A_01_01_timer=0,t.accelerated_02_01=.05,t.accelerated_02_02=.05,t.S_01_01_accelerated=.05,t.S_01_01_firstAngle=.05,t.S_01_01_timer=0,t.S_01_02_accelerated=.1,t.S_01_02_timer=0,t.S_01_03_accelerated=.1,t.S_01_03_timer=0,t.S_accelerated_01_04=.1,t.S_01_firstAngle_04=.1,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.self.zhangyunvhuang_bullet=this,this.initProperty()},t.prototype.initProperty=function(){this.A_accelerated_01_01=.05,this.A_01_01_timer=0,this.accelerated_02_01=.05,this.accelerated_02_02=.05,this.S_01_01_accelerated=.05,this.S_01_01_timer=0,this.S_01_02_timer=0,this.S_01_02_accelerated=.05,this.S_01_03_timer=0,this.S_01_03_accelerated=.05,this.S_accelerated_01_04=.05},t.prototype.zhangyunvhuang_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)switch(this.self.name){case"attack_01_Bullet_01":this.attack_01_01();break;case"attack_02_Bullet_01":this.attack_02_01();break;case"attack_02_Bullet_02":this.attack_02_02();break;case"skill_01_Bullet_01":this.skill_01_01();break;case"skill_01_Bullet_02":this.skill_01_02();break;case"skill_01_Bullet_03":this.skill_01_03();break;case"skill_01_Bullet_04":this.skill_01_04()}},t.prototype.attack_01_01=function(){var e,t=this.A_01_01_firstAngle;this.A_01_01_timer+=.1,this.group>=0&&this.group<4?this.A_01_01_timer>=0&&this.A_01_01_timer<4?(e=1.5,this.self.x+=s["default"].speedXYByAngle(t,e-.2*this.group).x,this.self.y+=s["default"].speedXYByAngle(t,e-.2*this.group).y):this.A_01_01_timer>=4&&this.A_01_01_timer<6||this.A_01_01_timer>=6&&(this.A_accelerated_01_01+=.05,e=3,this.attack_01_01_move(60*this.line+45,e-.2*this.line)):this.A_01_01_timer>=0&&this.A_01_01_timer<5?(e=1.5,this.self.x+=s["default"].speedXYByAngle(t,e-.2*(this.group-4)).x,this.self.y+=s["default"].speedXYByAngle(t,e-.2*(this.group-4)).y):this.A_01_01_timer>=5&&this.A_01_01_timer<6||this.A_01_01_timer>=6&&(this.A_accelerated_01_01+=.05,e=6,this.attack_01_01_move(this.A_01_01_firstAngle-12*this.line,e-.5*this.line))},t.prototype.attack_01_01_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.A_accelerated_01_01).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.A_accelerated_01_01).y},t.prototype.attack_02_01=function(){var e=4;this.self.x+=s["default"].speedXYByAngle(this.A_02_01_firstAngle,e).x,this.self.y+=s["default"].speedXYByAngle(this.A_02_01_firstAngle,e).y},t.prototype.attack_02_02=function(){var e=8;this.self.x+=s["default"].speedXYByAngle(this.A_02_02_firstAngle,e+this.accelerated_02_02).x,this.self.y+=s["default"].speedXYByAngle(this.A_02_02_firstAngle,e+this.accelerated_02_02).y,this.accelerated_02_02+=.05},t.prototype.skill_01_01=function(){var e,t;this.S_01_01_timer+=.1,this.S_01_01_timer>=0&&this.S_01_01_timer<4?(t=this.S_01_01_firstAngle-5*this.line,e=5-.4*this.line,this.self.x+=s["default"].speedXYByAngle(t,e).x,this.self.y+=s["default"].speedXYByAngle(t,e).y):this.S_01_01_timer>=4&&(e=6,t=this.S_01_01_firstAngle-5*this.line,this.S_01_01_accelerated+=.05,this.self.x+=s["default"].speedXYByAngle(t,e+2*this.line).x,this.self.y+=s["default"].speedXYByAngle(t,e+2*this.line).y)},t.prototype.S_01_01_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t).x,this.self.y+=s["default"].speedXYByAngle(e,t).y},t.prototype.skill_01_02=function(){var e,t;if(this.S_01_01_timer+=.1,0===this.line)e=6+this.S_01_02_accelerated,t=this.S_01_02_firstAngle,this.self.x+=s["default"].speedXYByAngle(t,e).x,this.self.y+=s["default"].speedXYByAngle(t,e).y;else if(this.S_01_02_timer>0&&this.S_01_02_timer<=5)t=this.S_01_02_firstAngle,e=6+this.S_01_02_accelerated,this.self.x+=s["default"].speedXYByAngle(t,e).x,this.self.y+=s["default"].speedXYByAngle(t,e).y;else if(this.line>0&&this.line<=4){var a=this.S_01_02_firstAngle+60;e=6+this.S_01_02_accelerated+1*this.line,this.self.x+=s["default"].speedXYByAngle(a,e).x,this.self.y+=s["default"].speedXYByAngle(a,e).y}else{var i=this.S_01_02_firstAngle+120;e=6+this.S_01_02_accelerated+1*(this.line-4),this.self.x+=s["default"].speedXYByAngle(i,e).x,this.self.y+=s["default"].speedXYByAngle(i,e).y}this.S_01_02_accelerated+=.05},t.prototype.S_01_02_move_01=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.S_01_02_accelerated).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.S_01_02_accelerated).y},t.prototype.skill_01_03=function(){var e,t=this.S_01_03_firstAngle;if(this.S_01_03_timer+=.1,this.S_01_03_timer>=0&&this.S_01_03_timer<3)e=8;else{if(this.S_01_03_timer>=3&&this.S_01_03_timer<4)return;this.S_01_03_timer>=4&&(e=6)}this.S_01_03_move(t,e),this.S_01_03_accelerated+=.05},t.prototype.S_01_03_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t).x,this.self.y+=s["default"].speedXYByAngle(e,t).y},t.prototype.skill_01_04=function(){var e=this.S_01_firstAngle_04,t=4+this.S_accelerated_01_04;this.S_01_04_move(e,t),this.S_accelerated_01_04+=.05},t.prototype.S_01_04_move=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t).x,this.self.y+=s["default"].speedXYByAngle(e,t).y},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],19:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){var e=this.owner.getComponent(Laya.RigidBody);e.setVelocity({x:0,y:-10})},t.prototype.onTriggerEnter=function(e,t,a){this.owner.removeSelf()},t.prototype.onUpdate=function(){this.owner.y<-10&&this.owner.removeSelf()},t.prototype.onDisable=function(){Laya.Pool.recover("bullet",this.owner)},t}(Laya.Script);a["default"]=s},{}],20:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s;!function(e){var t;!function(e){e[e.rect=1]="rect",e[e.round=2]="round"}(t=e.collisionShape||(e.collisionShape={}));var a;!function(e){e[e.bossBullet=1]="bossBullet",e[e.roleMainBullet=2]="roleMainBullet",e[e.roleSecondBullet=3]="roleSecondBullet"}(a=e.BulletType||(e.BulletType={}))}(s=a.Bullet||(a.Bullet={})),a["default"]=s},{}],21:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Bullet/BulletParent"),i=e("../manage/MainWeaponData"),n=e("../playing/PlayingSceneControl"),o=e("./BulletInterface"),l=e("../Tools/Tool"),r=o["default"].BulletType,h=e("../manage/SecondWeaponData"),c=e("../manage/SkeletonTempletManage"),u=function(e){function t(t,a,s,i,o,l){var r=e.call(this)||this;return r.bType=t,r.startPos=a,r.angle=i||270,s&&(r.pic=s+".png"),o&&(r.buffObj=o),void 0!==l&&(r.fireBuffType=l),r.playingControlObj=n["default"].instance,r.initVar(),r.createPrefab(),r}return __extends(t,e),t.prototype.createPrefab=function(){var e;switch(this.bType){case r.roleMainBullet:e=this.playingControlObj.bullet_red,this.prefabName="bullet_red",this.angle||(this.angle=270),this.w=29,this.h=100;break;case r.roleSecondBullet:if(this.prefabName=h["default"].getInstance().bulletPrefab,3!==this.secondType)return this.bulletObj=c["default"].getInstance().createSkByTemplet(this.prefabName),this.w=50,this.h=50,5===this.secondType&&(this.startPos.x+=60),this.bulletObj.pos(this.startPos.x,this.startPos.y),this.bulletObj.property=this,4===this.secondType?this.bulletObj.play("jgp",!0):5===this.secondType?(this.bulletObj.play("pp",!0),this.bulletObj.scale(.5,.5)):this.bulletObj.play(0,!0),this.setBulletOrder(),void n["default"].instance.bulletParent.addChild(this.bulletObj);this.angle||(this.angle=270),e=Laya.loader.getRes("prefab/"+this.prefabName+".json"),"Bullet_skill3"===this.prefabName?(this.w=57,this.h=234,this.offsetY=-220):"Bullet_skill4"==this.prefabName&&(this.w=57,this.h=1081);break;case r.bossBullet:}if(this.bulletObj=Laya.Pool.getItemByCreateFun(this.prefabName,e.create,e),this.pic){var t=this.bulletObj.getChildByName("img_pic");t.skin=this.path+this.pic,this.w=t.width,this.h=t.height}this.bulletObj.pos(this.startPos.x,this.startPos.y),this.bulletObj.property=this,this.bulletObj.visible=!0,this.setBulletOrder(),n["default"].instance.bulletParent.addChild(this.bulletObj)},t.prototype.initVar=function(){var e;if(this.bType===r.roleMainBullet)if(e=i["default"].getInstance().bulletSpeed,this.buffObj&&(this.buffValue=this.buffObj.buffValue,this.BuffType=this.buffObj.type),3===this.BuffType){var t=Number(i["default"].getInstance().getShowFire()),a=this.buffObj.buffValue.split("#");this.hurtValue=t*Number(a[this.fireBuffType])}else this.hurtValue=Number(i["default"].getInstance().getShowFire());else if(this.bType===r.roleSecondBullet){var s=h["default"].getInstance().buffType;e=h["default"].getInstance().getbulletSpeed(),this.hurtValue=Number(h["default"].getInstance().getFire()),this.secondType=Number(s[0]);var n=[1,3,5,6,10];if(n.indexOf(this.secondType)>-1){var o=h["default"].getInstance().getItemPowerLevel(),c=s.length;this.affectBate=Number(s[c-2])+o*Number(s[c-1])}this.initKeepTime(this.secondType,s),8===this.secondType&&(this.canHitCollision=!1)}3===this.BuffType&&2===this.fireBuffType?this.bulletSpeed=l["default"].speedLabelByAngle(270,e):this.angle&&(this.bulletSpeed=l["default"].speedLabelByAngle(this.angle,e))},t.prototype.setBuff=function(e){e&&(this.markX=e.x,this.markY=e.y)},t.prototype.initKeepTime=function(e,t){var a=h["default"].getInstance().getItemPowerLevel();switch(e){case 3:this.keepTimeValue=Number(t[2])+a*Number(t[3]);break;case 5:case 6:case 8:case 9:case 10:this.keepTimeValue=Number(t[1])+a*Number(t[2])}},t.prototype.setBulletOrder=function(){switch(this.bType){case r.roleMainBullet:void 0!==this.fireBuffType?0===this.fireBuffType?this.bulletObj.zOrder=2:1===this.fireBuffType?this.bulletObj.zOrder=4:0===this.fireBuffType&&0===this.bulletObj.zOrder:this.bulletObj.zOrder=3;break;case r.roleSecondBullet:this.bulletObj.zOrder=1;break;default:this.bulletObj.zOrder=0}},t}(s["default"]);a["default"]=u},{"../Bullet/BulletParent":22,"../Tools/Tool":40,"../manage/MainWeaponData":55,"../manage/SecondWeaponData":59,"../manage/SkeletonTempletManage":60,"../playing/PlayingSceneControl":67,"./BulletInterface":20}],22:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(){this.path="face/",this.canHitCollision=!0}return e}();a["default"]=s},{}],23:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,i=e("../manage/toast");!function(e){var t=function(e){function t(t,a,s,i){var n=e.call(this)||this;return n.markUrl=a,n.getType=i||"post",n.completeH=t,n.http.timeout=1e4,n.once(Laya.Event.COMPLETE,n,n.completeHandler),n.once(Laya.Event.ERROR,n,n.errorHandler),n.on(Laya.Event.PROGRESS,n,n.processHandler),n.send(n.markUrl,s,n.getType,"json",["Content-Type","application/json"]),n}return __extends(t,e),t.prototype.completeHandler=function(e){console.error("返回的数据:",e),this.completeH.runWith(e)},t.prototype.errorHandler=function(e){console.error("requestError:",e),i["default"].noBindScript("请求发生了错误~")},t.prototype.processHandler=function(e){console.error("requestProcess:",e)},t}(Laya.HttpRequest);e.HttpClass=t}(s||(s={})),a["default"]=s},{"../manage/toast":61}],24:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s;!function(e){e.URLSERVER="https://ssl.xdieg.com/api/";var t;!function(e){e.uuid="UserMgr/Login",e.GetPlayerData="PlayerBase/GetPlayerData",e.SignUp="PlayerBase/SignUp",e.PassedBarrier="PlayerBase/PassedBarrier",e.UpWeapon="PlayerBase/UpWeapon",e.UpSecondaryWeapon="PlayerBase/UpSecondaryWeapon",e.ShopOnce="PlayerBase/ShopOnce",e.ShopTen="PlayerBase/ShopTen",e.ExchangeEnergy="PlayerBase/ExchangeEnergy",e.ExchangeGold="PlayerBase/ExchangeGold",e.TimerUpdateUpdateSome="TimerUpdate/UpdateSome",e.ShopItem="PlayerBase/ShopItem",e.EndlessStart="PlayerBase/EndlessStart",e.EndlessStop="PlayerBase/EndlessStop",e.AchieveFetch="PlayerBase/AchieveFetch"}(t=e.httpUrls||(e.httpUrls={}))}(s||(s={})),a["default"]=s},{}],25:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,i=e("../manage/toast");!function(e){var t;!function(e){e[e.OK=0]="OK",e[e.Error=-1]="Error",e[e.ParamError=-2]="ParamError",e[e.HasNotLoginYet=-3]="HasNotLoginYet",e[e.ReLogin=-4]="ReLogin",e[e.FixedTableError=-5]="FixedTableError",e[e.Repeated=-6]="Repeated",e[e.NoEnough=-7]="NoEnough",e[e.FullLevel=-8]="FullLevel",e[e.UserDataError=-9]="UserDataError",e[e.TryLockFailed=-10]="TryLockFailed"}(t=e.errorCode||(e.errorCode={}));var a=function(){function e(e,t,a){this.ERRORCODE=e,this.handerError(e,t,a)}return e.prototype.handerError=function(e,a,s){var n;switch(e){case t.Error:n="发生错误,请刷新游戏!";break;case t.ParamError:n="参数错误!";break;case t.HasNotLoginYet:n="未登录!";break;case t.ReLogin:n="在其它设备登录!";break;case t.FixedTableError:n="数据表错误!";break;case t.Repeated:n="今天已经签过了哦~！";break;case t.FullLevel:n="已达满级~！";break;case t.UserDataError:n="用户数据错误!";break;case t.TryLockFailed:n="发生异常，请重试！"}n&&i["default"].noBindScript(n,a),s&&s.run()},e}();e.HttpError=a}(s||(s={})),a["default"]=s},{"../manage/toast":61}],26:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,i=e("./JsonEnum"),n=e("../manage/LoadManager"),o=e("../Tools/Tool"),l=e("../Tools/ReadZip"),r=l["default"].readZip,h=o["default"].copydata,c=i["default"].zipDataFileList,u=i["default"].DataType,p=i["default"].DataJsonUrl,f=i["default"].url,d=n["default"].LoadManager,y=Laya.Handler;!function(e){var t=function(){function e(t,a){var s=this;if(this.dataCollection={},!e.bLoadData)throw new Error("FixedDataTables haven't loaded data files yet.");var i=new r,n=0;i.loadAsync(Laya.loader.getRes(f+"/"+Object.keys(c)[0]+".zip")).then(function(e){Object.getOwnPropertyNames(c.jsonZip).forEach(function(o){e.file(p[o].file+".json").async("text").then(function(l){s.dataCollection[p[o].file]=i.convertToJson(JSON.parse(l),p[o].key),n++,n>=Object.keys(e.files).length&&t&&(Laya.Browser.window.dataCollection=s.dataCollection,t.runWith(a))})})})}return e.loadFixedTables=function(t,a){var s=[];for(var i in c)s.push(i+".zip");d.Instance().loadAssets(s,y.create(this,function(a){e.bLoadData=!0,e.getInstance(t,a)}),a),e.bLoadData=!0},e.getInstance=function(t,a){return e.instance||(e.instance=new e(t,a),Laya.Browser.window.FixedDataTables=e.instance),e.instance},e.prototype.getData=function(e,t){switch(e){default:var a=p[u[e]];return h(t?this.dataCollection[a.file][t]:this.dataCollection[a.file])}},e.prototype.getDataByKey=function(e,t,a){var s="number"==typeof e?p[u[e]].file:e,i=this.dataCollection;if(!i||void 0===i)return i;var n=i[s];if(!n||void 0===t)return n;var o=n[t];if(!o||void 0===a||"MazeMap"===s)return o;var l=o[a];return l},e.prototype.cacheServerData=function(e,t,a){var s=this,i=JSON.parse(a),n={};"MazeMap"===e?n[t]=i:i.forEach(function(t){var a=s.JsonFileKeyName(e);n[t[a]]=t}),this.dataCollection[e]=n},e.prototype.JsonFileKeyName=function(e){for(var t in p)if(p[t].file===e)return p[t].key},e.prototype.json2KeyValues=function(e,t){var a={};return e.forEach(function(e){a[e[t]]=e}),a},e.bLoadData=!1,e}();e.FixedDataTables=t}(s||(s={})),a["default"]=s},{"../Tools/ReadZip":39,"../Tools/Tool":40,"../manage/LoadManager":54,"./JsonEnum":27}],27:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s;!function(e){e.url="res/data/dataJson",e.monsterUrl="monster/",e.urlSecondWeapon="secondWeapon/",e.DataJsonUrl={battle:{file:"battle",key:"id"},buff:{file:"buff",key:"id"},buy_gold:{file:"buy_gold",key:"id"},buy_power:{file:"buy_power",key:"id"},endless:{file:"endless",key:"id"},endless_reward:{file:"endless_reward",key:"id"},endless_skill:{file:"endless_skill",key:"id"},endless_weapon:{file:"endless_weapon",key:"level"},endless_boss:{file:"endless_boss",key:"id"},item:{file:"item",key:"id"},misc:{file:"misc",key:"id"},monster:{file:"monster",key:"id"},secondaryWeapon:{file:"secondaryWeapon",key:"id"},shop:{file:"shop",key:"id"},sign:{file:"sign",key:"id"},tips:{file:"tips",key:"id"},weapon:{file:"weapon",key:"level"},wheel:{file:"wheel",key:"id"},bullet:{file:"bullet",key:"id"},achievement:{file:"achievement",key:"id"}},e.zipDataFileList={jsonZip:e.DataJsonUrl};var t;!function(e){e[e.battle=1]="battle",e[e.buff=2]="buff",e[e.buy_gold=3]="buy_gold",e[e.buy_power=4]="buy_power",e[e.endless=5]="endless",e[e.endless_reward=6]="endless_reward",e[e.endless_skill=7]="endless_skill",e[e.endless_weapon=8]="endless_weapon",e[e.endless_boss=9]="endless_boss",e[e.item=10]="item",e[e.misc=11]="misc",e[e.monster=12]="monster",e[e.secondaryWeapon=13]="secondaryWeapon",e[e.shop=14]="shop",e[e.sign=15]="sign",e[e.tips=16]="tips",e[e.weapon=17]="weapon",e[e.wheel=18]="wheel",e[e.bullet=19]="bullet",e[e.achievement=20]="achievement"}(t=e.DataType||(e.DataType={}));var a;!function(e){e["初始_怪物1"]="Enemy_blue",e["初始_怪物2"]="Enemy_yellow",e["初始_怪物3"]="Enemy_red",e["怪物4"]="Enemy4",e["怪物5"]="Enemy5",e["怪物6"]="Enemy6",e["怪物7"]="Enemy7",e["怪物8"]="Enemy8",e["怪物9"]="Enemy9",e["怪物10"]="Enemy10",e["怪物11"]="Enemy11",e["怪物12"]="Enemy12",e["怪物13"]="Enemy13",e["怪物14"]="Enemy14",e["怪物15"]="Enemy15",e["特殊怪物1"]="enemy_special1",e["特殊怪物2"]="enemy_special2",e["特殊怪物3"]="enemy_special3",e["特殊怪物4"]="enemy_special4",e["特殊怪物5"]="enemy_special5",e.boss1="Boss1",e.boss2="Boss2",e.boss3="Boss3",e.boss4="Boss4",e.boss5="Boss5",e.boss_nanguawangzi="Boss_nanguawangzi",e.boss_dashuren="Boss_dashuren",e.boss_shitoujuren="Boss_shitoujuren",e.boss_maowanghou="Boss_maowanghou",e.boss_bingqilinzuhe="Boss_bingqilinzuhe",e.boss_bingtouxiang="Boss_bingtouxiang",e.boss_jibaobao="Boss_jibaobao",e.boss_zhangyunvhuang="Boss_zhangyunvhuang",e.bingshuanpao="Bullet_skill3",e.bullet_blue="Bullet_blue"}(a=e.enemyToPerfab||(e.enemyToPerfab={}));var s;!function(e){e[e.stand=1]="stand",e[e.attack=2]="attack",e[e.attacked=3]="attacked"}(s=e.bossStatus||(e.bossStatus={}));var i;!function(e){e.attack="attack",e.attacked="attacked",e.skill="skill",e.stand="stand",e.skill1="skill1"}(i=e.bossDragonAction||(e.bossDragonAction={}));var n;!function(e){e[e.main=1]="main",e[e.second=2]="second",e[e.boss=3]="boss",e[e.bigEnemy=4]="bigEnemy"}(n=e.BulletType||(e.BulletType={}));var o;!function(e){e[e.role=1]="role",e[e.boss=2]="boss",e[e.enemy=3]="enemy",e[e.bulletRole=4]="bulletRole",e[e.bulletSkill=5]="bulletSkill",e[e.bullletBoss=6]="bullletBoss",e[e.muzzle=7]="muzzle"}(o=e.prefabType||(e.prefabType={}));var l;!function(e){e[e.ice=1]="ice",e[e.Laser=2]="Laser",e[e.flottant=3]="flottant"}(l=e.secondSkill||(e.secondSkill={}));var r;!function(e){e[e.Bullet_muzzle3=3]="Bullet_muzzle3",e[e.Bullet_muzzle4=4]="Bullet_muzzle4",e[e.Bullet_muzzle5=5]="Bullet_muzzle5"}(r=e.muzzlePrefab||(e.muzzlePrefab={}));var h;!function(e){e[e.Bullet_skill3_enemy=3]="Bullet_skill3_enemy",e[e.Bullet_skill4_enemy=4]="Bullet_skill4_enemy",e[e.Bullet_skill5_enemy=5]="Bullet_skill5_enemy"}(h=e.muzzlePrefabEnemy||(e.muzzlePrefabEnemy={}));var c;!function(e){e[e.enemy=1]="enemy",e[e.other=2]="other"}(c=e.templetType||(e.templetType={}));var u;!function(e){e[e.baozha=0]="baozha",e[e.gwbaozha=1]="gwbaozha",e[e.fjbaozha=2]="fjbaozha",e[e.xg_baozha=3]="xg_baozha"}(u=e.baozhaAni||(e.baozhaAni={}));var p;!function(e){e["中级_河豚"]="zhongji_hetun",e["中级_蝎子"]="zhongji_xiezi",e["中级_飞猴"]="zhongji_feihou",e["中级_萝卜"]="zhongji_luobo",e["中级_冰花"]="zhongji_binghua",e["中级_冰淇淋"]="zhongji_bingqilin",e["中级_海鲨"]="zhongji_haisha",e["中级_海妖"]="zhongji_haiyao",e["中级_火鬼"]="zhongji_huogui",e["中级_火蘑菇"]="zhongji_huomogu"}(p=e.midEnemyNameToSK||(e.midEnemyNameToSK={}));var f;!function(e){e[e.skill=1]="skill",e[e.common=2]="common",e[e.common2=3]="common2",e[e.ion=4]="ion",e[e.display=5]="display",e[e.skill2=6]="skill2"}(f=e.bossBulletType||(e.bossBulletType={})),e.secondWeaponMuzzlePos={5:{x:[-35,128],y:[44,44]},3:{x:[-35,138],y:[52,52]},4:{x:[-32,143],y:[44,44]},6:{x:[-32,143],y:[44,44]},1:{x:[-32,143],y:[44,44]},7:{x:[-32,143],y:[44,44]},8:{x:[-32,143],y:[44,44]},9:{x:[-32,143],y:[44,44]},10:{x:[-32,143],y:[44,44]},11:{x:[-32,143],y:[44,44]}},e.secondWeaponPos={3:{x:[-69,118],y:[-280,-280]},4:{x:[-49,132],y:[-40,-40]},6:{x:[-49,132],y:[-40,-40]},1:{x:[-49,132],y:[-40,-40]},7:{x:[-49,132],y:[-40,-40]},8:{x:[-49,132],y:[-40,-40]},9:{x:[-49,132],y:[-40,-40]},10:{x:[-49,132],y:[-40,-40]},11:{x:[-49,132],y:[-40,-40]},5:{x:[-86,95],y:[-40,-40]}};var d;!function(e){e[e.controled=1]="controled"}(d=e.roleStatus||(e.roleStatus={}));var y;!function(e){e[e.born=1]="born",e[e.ordinary=2]="ordinary",e[e.second9=3]="second9",e[e.second10=4]="second10",e[e.second8=5]="second8"}(y=e.dropHpStatus||(e.dropHpStatus={}))}(s||(s={})),a["default"]=s},{}],28:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s;!function(e){e.musicPath="music/";var t;!function(e){e.bg_menu="bg_menu",e.bg_fight="bg_fight",e.bg_boss="bg_boss",e.button_normal="button_normal",e.button_buy="button_buy",e.ui_popup="ui_popup",e.bullet_normal="bullet_normal",e.bomb="bomb",e.bomb_boss="bomb_boss",e.bomb_hero="bomb_hero",e.get_coin="get_coin",e.get_item="get_item",e.warning="warning",e.warning_bg="warning_bg",e.lose_noise="lose_noise",e.lose_bg="lose_bg",e.win_noise="win_noise",e.win_bg="win_bg",e.lottery_single="lottery_single",e.lottery_ten="lottery_ten",e.set_off="set_off",e.set_on="set_on",e.readygo="readygo",e.coin_charge="coin_charge"}(t=e.musicToUrl||(e.musicToUrl={}))}(s||(s={})),a["default"]=s},{}],29:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./GameUI"),i=function(e){function t(){var t=e.call(this)||this;return t.level=1,t}return __extends(t,e),t.prototype.onEnable=function(){this._rig=this.owner.getComponent(Laya.RigidBody),this.level=Math.round(5*Math.random())+1,this._text=this.owner.getChildByName("levelTxt"),this._text.text=this.level+""},t.prototype.onUpdate=function(){this.owner.rotation++},t.prototype.onTriggerEnter=function(e,t,a){var i=this.owner;if("buttle"===e.label){if(this.level>1)this.level--,this._text.changeText(this.level+""),i.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10}),Laya.SoundManager.playSound("sound/hit.wav");else if(i.parent){var n=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);n.pos(i.x,i.y),i.parent.addChild(n),n.play(0,!0),i.removeSelf(),Laya.SoundManager.playSound("sound/destroy.wav")}s["default"].instance.addScore(1)}else"ground"===e.label&&(i.removeSelf(),s["default"].instance.stopGame())},t.prototype.createEffect=function(){function e(){t.removeSelf(),Laya.Pool.recover("effect",t)}var t=new Laya.Animation;return t.loadAnimation("test/TestAni.ani"),t.on(Laya.Event.COMPLETE,null,e),t},t.prototype.onDisable=function(){Laya.Pool.recover("dropBox",this.owner)},t}(Laya.Script);a["default"]=i},{"./GameUI":34}],30:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.startScale=this.self.scaleX,this.self.on(Laya.Event.MOUSE_DOWN,this,this.setScaleSmall),this.self.on(Laya.Event.MOUSE_UP,this,this.setResumeScale),this.self.on(Laya.Event.MOUSE_MOVE,this,this.setScaleSmall),this.self.on(Laya.Event.MOUSE_OUT,this,this.setResumeScale)},t.prototype.setScaleSmall=function(e){this.self.canTouch&&this.self.scale(.9*this.startScale,.9*this.startScale)},t.prototype.setResumeScale=function(){this.self.scale(this.startScale,this.startScale)},t}(Laya.Script);a["default"]=s},{}],31:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../ui/layaMaxUI"),i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.blackSprite.alpha=.6,this.canMove=!0,this.blackSprite.on(Laya.Event.CLICK,this,function(e){e.stopPropagation()}),this.setLoading()},t.prototype.setLoading=function(){var e=this;this.canMove&&Laya.timer.loop(50,this,function(){e.canMove&&(e.loadIcon.rotation+=4)})},t.prototype.onClosed=function(){this.canMove=!1,this.loadIcon.rotation=0,Laya.timer.clearAll(this)},t}(s.ui.test.ReqLoadingUI);a["default"]=i},{"../../ui/layaMaxUI":99}],32:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=Laya.Sprite,i=e("../manage/AdaptScene"),n=function(e){function t(){var t=e.call(this)||this;return t.loadImage("face/暂停遮照.png"),t.visible=!1,t.width=Laya.stage.width,t.height=Laya.stage.height,i["default"].getInstance().setBg(t),Laya.stage.addChild(t),t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setShow=function(){this.visible=!0,this.alpha=1,this.animationIndex=0,this.clearEffect()},t.prototype.setAnimation=function(){this.animationIndex++%2==0&&(this.visible=!this.visible)},t.prototype.setHide=function(){this.alpha&&Laya.Tween.to(this,{alpha:0},2e3)},t.prototype.clearEffect=function(){Laya.timer.clearAll(this),Laya.Tween.clearTween(this)},t}(s);a["default"]=n},{"../manage/AdaptScene":43}],33:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){var t=e.call(this)||this;return t.createBoxInterval=1e3,t._time=0,t._started=!1,t}return __extends(t,e),t.prototype.onEnable=function(){this._time=Date.now(),this._gameBox=this.owner.getChildByName("gameBox")},t.prototype.onUpdate=function(){var e=Date.now();e-this._time>this.createBoxInterval&&this._started&&(this._time=e,this.createBox())},t.prototype.createBox=function(){var e=Laya.Pool.getItemByCreateFun("dropBox",this.dropBox.create,this.dropBox);e.pos(Math.random()*(Laya.stage.width-100),-100),this._gameBox.addChild(e)},t.prototype.onStageClick=function(e){e.stopPropagation();var t=Laya.Pool.getItemByCreateFun("bullet",this.bullet.create,this.bullet);t.pos(Laya.stage.mouseX,Laya.stage.mouseY),this._gameBox.addChild(t)},t.prototype.startGame=function(){this._started||(this._started=!0,this.enabled=!0)},t.prototype.stopGame=function(){this._started=!1,this.enabled=!1,this.createBoxInterval=1e3,this._gameBox.removeChildren()},t}(Laya.Script);a["default"]=s},{}],34:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../ui/layaMaxUI"),i=e("./GameControl"),n=function(e){function t(){var a=e.call(this)||this;return t.instance=a,Laya.MouseManager.multiTouchEnabled=!1,a}return __extends(t,e),t.prototype.onEnable=function(){this._control=this.getComponent(i["default"]),this.tipLbll.on(Laya.Event.CLICK,this,this.onTipClick)},t.prototype.onTipClick=function(e){this.tipLbll.visible=!1,this._score=0,this.scoreLbl.text="",this._control.startGame()},t.prototype.addScore=function(e){void 0===e&&(e=1),this._score+=e,this.scoreLbl.changeText("分数："+this._score),this._control.createBoxInterval>600&&this._score%20==0&&(this._control.createBoxInterval-=20)},t.prototype.stopGame=function(){this.tipLbll.visible=!0,this.tipLbll.text="游戏结束了，点击屏幕重新开始",this._control.stopGame()},t}(s.ui.test.TestSceneUI);a["default"]=n},{"./../ui/layaMaxUI":99,
"./GameControl":33}],35:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/BulletCommon"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=e("../Tools/Tool"),l=e("../MediumEnemy/MediumEnemy_bullet"),r=function(e){function t(){var t=e.call(this)||this;return t.attackCounter=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.initProperty()},t.prototype.initProperty=function(){switch(this.self=this.owner,this.pic=this.self.vars_.propertyObj.pic,this.skeleton=this.self.getChildByName("EnemySK"),this.moveOnOff_Boss=!0,this.firstAttack=!0,this.firstAttack_Interval=2e3,this.attackCounter=0,this.attack_NowTime=Date.now(),this.timer=0,this.delayed=0,this.role=this.self.scene.getChildByName("role_name"),this.pic){case"zhongji_hetun":this.firstAttack_Interval=2800,this.attack_Interval=2e3;break;case"zhongji_xiezi":this.firstAttack_Interval=2800,this.attack_Interval=5e3;break;case"zhongji_luobo":this.firstAttack_Interval=2800,this.attack_Interval=4e3;break;case"zhongji_feihou":this.attack_Interval=1200,this.firstAttack_Interval=2e3;break;case"zhongji_binghua":this.attack_Interval=3e3,this.firstAttack_Interval=3e3;break;case"zhongji_bingqilin":this.attack_Interval=2e3,this.firstAttack_Interval=2e3;break;case"zhongji_haiyao":this.attack_Interval=4500,this.firstAttack_Interval=2e3;break;case"zhongji_haisha":this.attack_Interval=6e3,this.firstAttack_Interval=2e3;break;case"zhongji_huogui":this.attack_Interval=3e3,this.firstAttack_Interval=2e3;break;case"zhongji_huomogu":this.attack_Interval=3e3,this.firstAttack_Interval=2e3;var e=Math.floor(2*Math.random());1===e?this.self.x=Laya.stage.width/3-80:this.self.x=2*Laya.stage.width/3-80;break;default:this.attack_Interval=3e3}this.self.x>Laya.stage.width/2-80?this.left_right_Direction="left":this.left_right_Direction="right",this.up_down_Direction="down"},t.prototype.move=function(){switch(this.pic){case"zhongji_hetun":this.zhongji_hetun_move();break;case"zhongji_xiezi":this.zhongji_xiezi_move();break;case"zhongji_luobo":this.zhongji_luobo_move();break;case"zhongji_feihou":this.zhongji_feihou_move();break;case"zhongji_binghua":this.self.y+=2;break;case"zhongji_bingqilin":this.zhongji_bingqilin_move();break;case"zhongji_haiyao":this.self.y+=2;break;case"zhongji_haisha":this.self.y+=2;break;case"zhongji_huogui":this.self.y+=2;break;case"zhongji_huomogu":this.zhongji_huomogu_move();break;default:this.self.y+=2}this.timer+=1},t.prototype.zhongji_hetun_move=function(){var e=new Laya.Point(this.role.x-this.self.x,this.role.y-this.self.y);e.normalize(),this.self.x+=2*e.x,this.self.y+=2*e.y},t.prototype.zhongji_xiezi_move=function(){this.self.y+=2},t.prototype.zhongji_luobo_move=function(){this.self.y+=2,this.skeleton.rotation+=12,this.skeleton.playbackRate(.1)},t.prototype.zhongji_feihou_move=function(){"left"===this.left_right_Direction?(this.self.x-=5,this.self.x<1*Laya.stage.width/4-120&&(this.left_right_Direction="right")):"right"===this.left_right_Direction&&(this.self.x+=5,this.self.x+this.self.width/2>3*Laya.stage.width/4-30&&(this.left_right_Direction="left")),this.self.y<100?this.self.y+=5:this.self.y+=.5},t.prototype.zhongji_bingqilin_move=function(){this.self.y+=2},t.prototype.zhongji_huomogu_move=function(){this.self.y+=2,"left"===this.left_right_Direction?this.self.x+=10:"right"===this.left_right_Direction&&(this.self.x-=10),this.timer%35===0&&("left"===this.left_right_Direction?this.left_right_Direction="right":"right"===this.left_right_Direction&&(this.left_right_Direction="left"))},t.prototype.attack=function(){switch(this.pic){case"zhongji_hetun":this.zhongji_hetun_01_01();break;case"zhongji_xiezi":this.zhongji_xiezi_01_01();break;case"zhongji_luobo":this.zhongji_luobo_01_01();break;case"zhongji_feihou":this.zhongji_feihou_01_01();break;case"zhongji_binghua":this.zhongji_binghua_01_01();break;case"zhongji_bingqilin":this.zhongji_bingqilin_01_01();break;case"zhongji_haiyao":this.zhongji_haiyao_01_01();break;case"zhongji_haisha":this.zhongji_haisha_01_01();break;case"zhongji_huogui":this.zhongji_huogui_01_01();break;case"zhongji_huomogu":this.zhongji_huomogu_01_01()}},t.prototype.initBullet=function(){this.bullteParent=this.owner.scene.getChildByName("bulletParent_enemy");var e=new s["default"](i["default"].BulletType.bigEnemy),t=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);return t.vars_||(t.vars_={}),t.vars_.propertyObj=o["default"].copydata(e),t.vars_.propertyObj.bossBulletType=i["default"].bossBulletType.common,t.vars_.propertyObj.fromNick="MediumEnemy_Move",this.bullteParent.addChild(t),t},t.prototype.zhongji_hetun_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=50,this.moveOnOff_Boss=!1,Laya.timer.frameOnce(this.delayed,this,function(){this.moveOnOff_Boss=!0;for(var e=0;12>e;e++){var t=this.initBullet();t.name="zhongji_hetun_01_01";var a=this.self.x+1*this.self.width/3+50,s=this.self.y+1*this.self.height/3+50;t.pos(a,s);var i=t.getComponent(l["default"]);i||t.addComponent(l["default"]),i=t.getComponent(l["default"]),i.line=e,i.moveOnOff=!0,i.bossName=this.owner.name,i.firstAngle=30*e}})},t.prototype.zhongji_xiezi_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=50,this.moveOnOff_Boss=!1;for(var e=function(e){t.delayed+=15,Laya.timer.frameOnce(t.delayed,t,function(){if(null!=this.owner.scene)for(var t=0;2>t;t++){var a=this.initBullet();a.name="zhongji_xiezi_01_01";var s=this.self.x+1*this.self.width/3+50,i=this.self.y+1*this.self.height/3+50;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0,n.bossName=this.owner.name,n.firstAngle=45*e+15*t,7===n.row&&1===n.line&&(this.moveOnOff_Boss=!0)}})},t=this,a=0;8>a;a++)e(a)},t.prototype.zhongji_luobo_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.skeleton.rotation=0,this.skeleton.playbackRate(1),this.delayed=50,this.moveOnOff_Boss=!1;for(var e=20,t=function(t){a.delayed+=e,Laya.timer.frameOnce(a.delayed,a,function(){for(var a=0;4>a;a++){if(null==this.owner.scene)return;for(var s=0;2>s;s++){var i=this.initBullet();i.name="zhongji_luobo_01_01";var n=this.self.x+1*this.self.width/3+50,o=this.self.y+1*this.self.height/3+50;i.pos(n,o);var r=i.getComponent(l["default"]);r||i.addComponent(l["default"]),r=i.getComponent(l["default"]),r.group=t,r.row=a,r.line=s,r.moveOnOff=!0,r.bossName=this.owner.name,r.firstAngle=90*a+15*s+25*t,r.standingTime=10-t*e*.1,2===r.group&&3===r.row&&1===r.line&&(this.moveOnOff_Boss=!0)}}})},a=this,s=0;3>s;s++)t(s)},t.prototype.zhongji_feihou_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=30,this.moveOnOff_Boss=!1,Laya.timer.frameOnce(this.delayed,this,function(){this.moveOnOff_Boss=!0;for(var e=0;6>e;e++){var t=this.initBullet();t.name="zhongji_feihou_01_01";var a=this.self.x+1*this.self.width/3+50,s=this.self.y+1*this.self.height/3+100;0===e?t.pos(a,s):1===e?t.pos(a-20,s+25):2===e?t.pos(a+20,s+25):3===e?t.pos(a+40,s+50):4===e?t.pos(a,s+50):5===e&&t.pos(a-40,s+50);var i=t.getComponent(l["default"]);i||t.addComponent(l["default"]),i=t.getComponent(l["default"]),i.line=e,i.moveOnOff=!0,i.bossName=this.owner.name}})},t.prototype.zhongji_binghua_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=50,this.moveOnOff_Boss=!1;for(var e=function(e){t.delayed+=7,Laya.timer.frameOnce(t.delayed,t,function(){for(var t=0;2>t;t++){var a=this.initBullet();a.name="zhongji_binghua_01_01";var s=this.self.x+1*this.self.width/3+50,i=this.self.y+1*this.self.height/3+50;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.moveOnOff=!0,n.bossName=this.owner.name,n.firstAngle=36*e,14===n.row&&1===n.line&&(this.moveOnOff_Boss=!0)}})},t=this,a=0;15>a;a++)e(a)},t.prototype.zhongji_bingqilin_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=40,this.moveOnOff_Boss=!1;for(var e=function(e){t.delayed+=10,Laya.timer.frameOnce(t.delayed,t,function(){for(var t=0;4>t;t++)for(var a=0;4>a;a++){var s=this.initBullet();s.name="zhongji_bingqilin_01_01";var i=this.self.x+1*this.self.width/3+50,n=this.self.y+1*this.self.height/3+50;s.pos(i,n);var o=s.getComponent(l["default"]);o||s.addComponent(l["default"]),o=s.getComponent(l["default"]),o.group=e,o.row=t,o.line=a,o.moveOnOff=!0,o.bossName=this.owner.name,o.firstAngle=90*t+45*e,1===o.group&&3===o.row&&3===o.line&&(this.moveOnOff_Boss=!0)}})},t=this,a=0;2>a;a++)e(a)},t.prototype.zhongji_haiyao_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=30,this.moveOnOff_Boss=!1;for(var e=function(e){t.delayed+=30;var a,s;0===e?(a=5,s=5):(a=4,s=4),Laya.timer.frameOnce(t.delayed,t,function(){for(var t=0;a>t;t++)for(var i=0;s>i;i++){var n=this.initBullet();n.name="zhongji_haiyao_01_01";var o=this.self.x+1*this.self.width/3+50,r=this.self.y+1*this.self.height/3+50;n.pos(o,r);var h=n.getComponent(l["default"]);h||n.addComponent(l["default"]),h=n.getComponent(l["default"]),h.group=e,h.row=t,h.line=i,h.moveOnOff=!0,0===e?h.firstAngle=72*t+10*i:h.firstAngle=90*t+15*i+45,h.bossName=this.owner.name,1===h.group&&3===h.row&&3===h.line&&(this.moveOnOff_Boss=!0)}})},t=this,a=0;2>a;a++)e(a)},t.prototype.zhongji_haisha_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=30,this.moveOnOff_Boss=!1;for(var e=3,t=function(t){a.delayed+=e,Laya.timer.frameOnce(a.delayed,a,function(){var a=this.initBullet();a.name="zhongji_haisha_01_01";var s=this.self.x+1*this.self.width/3+50,i=this.self.y+1*this.self.height/3+50;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.line=t,n.moveOnOff=!0,n.firstAngle=20*t,n.bossName=this.owner.name,n.standingTime=15-t*e*.1,39===n.line&&(this.moveOnOff_Boss=!0)})},a=this,s=0;40>s;s++)t(s)},t.prototype.zhongji_huogui_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=30,this.moveOnOff_Boss=!1;for(var e=function(e){t.delayed+=15,Laya.timer.frameOnce(t.delayed,t,function(){for(var t=0;8>t;t++){var a=this.initBullet();a.name="zhongji_huogui_01_01";var s=this.self.x+1*this.self.width/3+50,i=this.self.y+1*this.self.height/3+50;a.pos(s+20,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,n.firstAngle=Math.floor(60*Math.random())+45*t,n.firsSpeed=Math.floor(3*Math.random())+5,n.moveOnOff=!0,n.bossName=this.owner.name,4===n.row&&5===n.line&&(this.moveOnOff_Boss=!0)}})},t=this,a=0;5>a;a++)e(a)},t.prototype.zhongji_huomogu_01_01=function(){this.owner.scene.getChildByName("bulletParent_enemy").zOrder=2,this.self.parent.zOrder=1,this.delayed=30,this.moveOnOff_Boss=!1;for(var e=function(e){t.delayed+=15,Laya.timer.frameOnce(t.delayed,t,function(){for(var t=0;10>t;t++){var a=this.initBullet();a.name="zhongji_huomogu_01_01";var s=this.self.x+1*this.self.width/3+50,i=this.self.y+1*this.self.height/3+50;a.pos(s,i);var n=a.getComponent(l["default"]);n||a.addComponent(l["default"]),n=a.getComponent(l["default"]),n.row=e,n.line=t,t>=0&&5>t?n.firstAngle=-45+22.5*t+60*e:t>=5&&10>t&&(n.firstAngle=225-22.5*(t-5)+60*e),n.moveOnOff=!0,n.bossName=this.owner.name,5===n.row&&9===n.line&&(this.moveOnOff_Boss=!0)}})},t=this,a=0;6>a;a++)e(a)},t.prototype.onUpdate=function(){if(this.moveOnOff_Boss&&!n["default"].instance.isGamePause){this.move();var e=Date.now();this.firstAttack&&e-this.attack_NowTime>this.firstAttack_Interval?(this.attack_NowTime=e,this.firstAttack=!1,this.attack()):e-this.attack_NowTime>this.attack_Interval&&(this.attack_NowTime=e,this.attack())}},t.prototype.onDisable=function(){Laya.timer.clearAll(this)},t}(Laya.Script);a["default"]=r},{"../Data/JsonEnum":27,"../MediumEnemy/MediumEnemy_bullet":36,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/BulletCommon":72}],36:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=function(e){function t(){var t=e.call(this)||this;return t.moveOnOff=!1,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.self.MediumEnemy_bullet=this,this.initProperty()},t.prototype.initProperty=function(){this.accelerated=.06,this.timer=0},t.prototype.bullet_Move=function(){if(this.moveOnOff&&!i["default"].instance.isGamePause)switch(this.self.name){case"zhongji_hetun_01_01":this.zhongji_hetun_01_01();break;case"zhongji_xiezi_01_01":this.zhongji_xiezi_01_01();break;case"zhongji_luobo_01_01":this.zhongji_luobo_01_01();break;case"zhongji_feihou_01_01":this.zhongji_feihou_01_01();break;case"zhongji_bingqilin_01_01":this.zhongji_bingqilin_01_01();break;case"zhongji_binghua_01_01":this.zhongji_binghua_01_01();break;case"zhongji_haiyao_01_01":this.zhongji_haiyao_01_01();break;case"zhongji_haisha_01_01":this.zhongji_haisha_01_01();break;case"zhongji_huogui_01_01":this.zhongji_huogui_01_01();break;case"zhongji_huomogu_01_01":this.zhongji_huomogu_01_01()}this.accelerated+=.05,this.timer+=.1},t.prototype.commonSpeedXYByAngle=function(e,t){this.self.x+=s["default"].speedXYByAngle(e,t+this.accelerated).x,this.self.y+=s["default"].speedXYByAngle(e,t+this.accelerated).y},t.prototype.zhongji_hetun_01_01=function(){var e,t=this.firstAngle;e=this.line%2!==0?5:3,this.commonSpeedXYByAngle(t,e)},t.prototype.zhongji_xiezi_01_01=function(){var e,t=this.firstAngle;e=1===this.line?6.3:6,this.commonSpeedXYByAngle(t,e)},t.prototype.zhongji_luobo_01_01=function(){var e,t=this.firstAngle,a=1;if(this.timer>=0&&this.timer<a)e=0===this.group?10:1===this.group?7:4,this.commonSpeedXYByAngle(t,e);else{if(this.timer>=a&&this.timer<=this.standingTime+a)return void(this.accelerated=.06);this.timer>=this.standingTime+a&&(e=7-.4*this.line,this.commonSpeedXYByAngle(t,e))}},t.prototype.zhongji_feihou_01_01=function(){var e=90,t=5;0===this.line?t=7:1===this.line||2===this.line?t=6:(3===this.line||4===this.line||5===this.line)&&(t=5),this.commonSpeedXYByAngle(e,t)},t.prototype.zhongji_binghua_01_01=function(){var e,t=5;this.timer>0&&this.timer>5,e=0===this.line?this.firstAngle+10:this.firstAngle-10,this.commonSpeedXYByAngle(e,t)},t.prototype.zhongji_bingqilin_01_01=function(){var e,t=this.firstAngle;if(this.timer>=0&&this.timer<1)e=5,this.commonSpeedXYByAngle(t,e-.3*this.line);else{if(this.timer>=1&&this.timer<2)return;this.timer>=2&&(e=5,this.commonSpeedXYByAngle(t,e-.4*this.line))}},t.prototype.zhongji_haiyao_01_01=function(){var e,t=this.firstAngle;0===this.group?0===this.line||4===this.line?e=3.6:2===this.line?e=4:(1===this.line||3===this.line)&&(e=3.9):0===this.line||3===this.line?e=3.5:(1===this.line||2===this.line)&&(e=3.8),this.commonSpeedXYByAngle(t,e)},t.prototype.zhongji_haisha_01_01=function(){var e,t=this.firstAngle,a=.7;if(this.timer>=0&&this.timer<a)e=14-.3*this.line,this.commonSpeedXYByAngle(t,e);else{if(this.timer>=a&&this.timer<=this.standingTime+a)return void(this.accelerated=.06);this.timer>=this.standingTime+a&&(e=7,this.commonSpeedXYByAngle(t,e))}},t.prototype.zhongji_huogui_01_01=function(){var e=this.firstAngle,t=this.firsSpeed;this.commonSpeedXYByAngle(e,t)},t.prototype.zhongji_huomogu_01_01=function(){var e,t=this.firstAngle;e=this.timer>=0&&this.timer<1.5?10:2.5,this.commonSpeedXYByAngle(t,e)},t.prototype.onDisable=function(){},t.prototype.onUpdate=function(){},t}(Laya.Script);a["default"]=n},{"../Tools/Tool":40,"../playing/PlayingSceneControl":67}],37:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t,a,s,i,n,o,l){this.start=e,this.end=t,this.addParent=s||Laya.stage,this.action=i,this.num=l||0,this.moveObj=a||this.createFlyImage(),this.moveFinishArg=n||null,this.contex=o||null,this.startMove()}return e.prototype.createFlyImage=function(){var e=Laya.loader.getRes("prefab/getDiamond.json"),t=Laya.Pool.getItemByCreateFun("getDiamond",e.create,e);t.alpha=0,t.scale(0,0),t.pos(Laya.stage.width/3+30,Laya.stage.height/3+50);var a=t.getChildByName("numberDiamonds");return a.value="x"+this.num,this.addParent.addChild(t),Laya.Browser.window.aniDiamond=t,t},e.prototype.startMove=function(){var e=this.moveObj,t=new Laya.TimeLine;t.addLabel("appear",0).to(e,{scaleX:1,scaleY:1,alpha:1},500,Laya.Ease.circInOut,0).addLabel("move",0).to(e,{x:this.end.x-10,y:this.end.y+50,scaleX:.5,scaleY:.5},700,Laya.Ease.circInOut,0).addLabel("vanish",0).to(e,{x:this.end.x,y:this.end.y,alpha:0},500,Laya.Ease.circInOut,0),t.play("appear",!1),t.on(Laya.Event.COMPLETE,this,this.moveEnd),t.on(Laya.Event.LABEL,this,this.onLabel)},e.prototype.onLabel=function(e){console.log("LabelName:"+e)},e.prototype.moveEnd=function(){this.moveObj.removeSelf(),Laya.Pool.recover("getDiamond",this.moveObj),this.action&&this.contex&&this.action.call(this.contex,this.moveFinishArg)},e}();a["default"]=s},{}],38:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(){this._keyList=[],this.clear()}return e.prototype.add=function(e,t){var a={key:e,value:t},s=this.getIndexByKey(e);-1!==s?this._list[s]=a:(this._list.push(a),this.addKey(e))},e.prototype.addKey=function(e){this._keyList.indexOf(e)<0&&this._keyList.push(e)},e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!==t){var a=this._list[t];return this._list.splice(t,1),this.removeKey(e),a}return null},e.prototype.removeKey=function(e){var t=this._keyList.indexOf(e);t>=0&&this._keyList.splice(t,1)},e.prototype.has=function(e){var t=this.getIndexByKey(e);return-1!==t},e.prototype.get=function(e){var t=this.getIndexByKey(e);if(-1!==t){var a=this._list[t];return a.value}return null},e.prototype.getValueList=function(){var e=[];return this.forEach(function(t,a){e.push(a)}),e},e.prototype.getVlaueByProperty=function(e){var t=[];return this.forEach(function(a,s,i){i.judgeObjectProperty(s,e)&&t.push(s)},this),t},e.prototype.judgeObjectProperty=function(e,t){for(var a=Object.getOwnPropertyNames(t),s=0;s<a.length;s++){var i=a[s];if(!this.judgeSingleProperty(e,i,t[i]))return!1}return!0},e.prototype.judgeSingleProperty=function(e,t,a){return e.hasOwnProperty(t)&&e[t]===a?!0:!1},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,a=0;t>a;a++){var s=this._list[a];e(s)}},e.prototype.forEach=function(e,t){for(var a=this._list.length,s=0;a>s;s++){var i=this._list[s];e(i.key,i.value,t)}},e.prototype.getIndexByKey=function(e){var t=this._keyList.indexOf(e);return t},e.prototype.clear=function(){this._list=[],this._keyList=[]},e}();a["default"]=s},{}],39:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s;!function(e){var t=function(){function e(){this.instance=new JSZip}return e.prototype.getInstance=function(){return this.instance?this.instance:void console.log("readZip not have instance")},e.prototype.loadAsync=function(e){return this.loadAsyncObj=this.instance.loadAsync(e),this.loadAsyncObj},e.prototype.convertToJson=function(e,t){if(!e.RECORDS)return void console.log("json数据有问题需要查看~",e);var a={};return e.RECORDS.forEach(function(e){a[e[t]]=e}),a},e.prototype.judgeIsZip=function(e){var t;return e instanceof Array&&(t=e[0]),t.indexOf(".zip")>-1?!0:!1},e}();e.readZip=t}(s=a.tools||(a.tools={})),a["default"]=s},{}],40:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s;!function(e){function t(e,t){void 0===t&&(t=10);var a=t-e+1;return Math.floor(Math.random()*a+e)}function a(e,t){for(var a,s,i=e.slice(0),n=e.length,o=n-t;n-->o;)s=Math.floor((n+1)*Math.random()),a=i[s],i[s]=i[n],i[n]=a;return i.slice(o)}function s(e,t){var a=[],s=0;for(s;t>s;s++){var n=i(e.slice(),a,s);a.push(n)}return a}function i(e,t,a){var s=[],n=0;for(n;n<e.length-a;n++)s.push(n);var o=Math.floor(Math.random()*s.length);if(-1===t.indexOf(e[o])){var l=e[o];return e[o]=e[s.length-1],l}return e.splice(o,1),i(e,t,a)}function n(e){var t={};return Object.getOwnPropertyNames(e).forEach(function(a){t[a]=e[a]}),t}function o(e,t){for(var a=[],s=0;t>s;s++)a.push(e);return a}function l(e,t){if(e%90===0||!e)return void console.error("计算的角度异常,需要查看：",e);var a={x:0,y:0};return a.y=t.y,a.x=a.y/Math.tan(e*Math.PI/180),a}function r(e,t){var a={x:0,y:0};return a.x=t*Math.cos(e*Math.PI/180),a.y=t*Math.sin(e*Math.PI/180),a}function h(t,a,s){var i={x:0,y:0},n=t,o=a,l=s||1;if(n%90===0)0===n||360===n?i.x=Math.abs(o)*l:90===n?i.y=Math.abs(o)*l:180===n?i.x=-Math.abs(o)*l:i.y=-Math.abs(o)*l;else{var r=e.speedXYByAngle(n,o);i.x=r.x,i.y=r.y,n>0&&180>n?i.y=Math.abs(i.y)*l:i.y=-Math.abs(i.y)*l,n>90&&270>n?i.x=-Math.abs(i.x)*l:i.x=Math.abs(i.x)*l}return i}function c(e){return e/180*Math.PI}function u(e){var t=Math.atan(e)/(Math.PI/180);return t=Math.round(t)}function p(e,t,a){var s=a,t=t,i=2*Math.PI/360*e,n=s.x+Math.sin(i)*t,o=s.y-Math.cos(i)*t;return{x:n,y:o}}function f(e){if("number"!=typeof e)return console.warn("要转化的数字并不为number"),e;var t;return t=1e3>e?""+e:1e6>e?""+(e/1e3).toFixed(1)+"k":1e9>e?""+(e/1e6).toFixed(1)+"m":""+e}function d(e,t){return e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.h+e.y>t.y?!0:!1}function y(e,t){var a={x:0,y:0};t.x<e.x?a.x=e.x:t.x>e.x+e.w?a.x=e.x+e.w:a.x=t.x,t.y<e.y?a.y=e.y:t.y>e.y+e.h?a.y=e.y+e.h:a.y=t.y;var s=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));return s<t.r?!0:!1}function _(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<e.r+t.r?!0:!1}e.random=t,e.getRandomArrayElements=a,e.getArrayDifElements=s,e.getDiffEle=i,e.roleDragCan=!1,e.copydata=n,e.fillArray=o,e.speedByAngle=l,e.speedXYByAngle=r,e.speedLabelByAngle=h,e.getRad=c,e.getAngleByTan=u,e.getRoundPos=p,e.converteNum=f,e.rectangleCollisions=d,e.rectAndRoundCollisions=y,e.roundCollisions=_}(s=a.tools||(a.tools={})),a["default"]=s},{}],41:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.clothBtn=this.owner,this.clothBtn.on(Laya.Event.MOUSE_DOWN,this,this.setZoom),this.clothBtn.on(Laya.Event.MOUSE_MOVE,this,this.setZoom),this.clothBtn.on(Laya.Event.MOUSE_UP,this,this.setBig),this.clothBtn.on(Laya.Event.MOUSE_OUT,this,this.setBig)},t.prototype.setZoom=function(){this.clothBtn.scale(.9,.9)},t.prototype.setBig=function(){this.clothBtn.scale(1,1)},t}(Laya.Script);a["default"]=s},{}],42:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/Playing_var"),i=e("../role/role"),n=e("../manage/MainWeaponData"),o=e("../manage/BagDataControl"),l=e("../manage/SecondWeaponData"),r=e("../Data/DataTables"),h=e("../Data/JsonEnum"),c=h["default"].DataType,u=r["default"].FixedDataTables,p=e("../manage/toast"),f=e("../playing/PlayingSceneControl"),d=e("../Connect/HttpClass"),y=e("../Connect/HttpEnum"),_=e("../Data/MusicEnum"),m=_["default"].musicToUrl,g=e("../Tools/Tool"),b=e("../manage/Music"),v=function(e){function t(){var a=e.call(this)||this;return t._instance=a,a.game=Laya.Browser.window.game,a}return __extends(t,e),t.prototype.onEnable=function(){var e=this.owner.getChildAt(0);this.tab=e,this.bagInstance=o["default"].getInstance(),this.secondaryWeaponConfig=u.getInstance().getData(c.secondaryWeapon),e.selectHandler=new Laya.Handler(this,this.onSelect),this.updatePanel=this.owner.getChildByName("updatePanel"),this.listVice=this.owner.getChildAt(2),this.setListenerUpdate()},t.prototype.setListenerUpdate=function(){return},t.prototype.onUpdateBtn=function(e,t){var a;b["default"].getInstance().playSound(_["default"].musicToUrl.button_normal);var i=o["default"].getInstance().getBagDataById(JSON.stringify(101)).num;if(this.tab.selectedIndex){var r=e.consumeType[0],h=o["default"].getInstance().getBagDataById(this.game.secondWeapon.selected),c=h.num-e.consume,u={id:201};if(2===r)h&&h.num&&h.num>=e.consume+1?(0===t?(o["default"].getInstance().setBagData({id:this.game.secondWeapon.selected.toString(),fire:h.fire+1,num:c}),u.fireLvl=l["default"].getInstance().getItemFireLevel()):(o["default"].getInstance().setBagData({id:this.game.secondWeapon.selected.toString(),power:h.power+1,num:c}),u.powerLvl=l["default"].getInstance().getItemPowerLevel()),this.dataFillSecondWeapon(),this.listVice.refresh(),u.num=c):p["default"].noBindScript("消耗的服务器的数量不足!");else if(i>=e.consume)0===t?(o["default"].getInstance().setBagData({id:this.game.secondWeapon.selected.toString(),fire:h.fire+1}),u.fireLvl=l["default"].getInstance().getItemFireLevel()):(o["default"].getInstance().setBagData({id:this.game.secondWeapon.selected.toString(),power:h.power+1}),u.powerLvl=l["default"].getInstance().getItemPowerLevel()),o["default"].getInstance().setBagData({id:JSON.stringify(101),num:i-e.consume});else{var f="消耗的物品数量不足,是否前往获得？";Laya.Scene.open("test/popDialog.scene",!1,{txt:f,type:1})}this.showUpdatePanel(1),p["default"].noBindScript("升级成功！");var m=y["default"].URLSERVER+y["default"].httpUrls.UpSecondaryWeapon,g={uuId:s["default"].getInstance().uuId,bagSecondaryWeapon:(a={},a[201]=u,a)};new d["default"].HttpClass(Laya.Handler.create(this,function(e){console.error(e)}),m,JSON.stringify(g))}else{var v;if(i>=e.consume){switch(t){case 0:this.game.mainWeapon.hpLevel++,v={uuId:s["default"].getInstance().uuId,mainWeapon:{hpLvl:this.game.mainWeapon.hpLevel}};break;case 1:this.game.mainWeapon.fireLevel++,v={uuId:s["default"].getInstance().uuId,mainWeapon:{fireLvl:this.game.mainWeapon.fireLevel}};break;case 2:this.game.mainWeapon.speedLevel++,v={uuId:s["default"].getInstance().uuId,mainWeapon:{shotSpeed:this.game.mainWeapon.speedLevel}}}o["default"].getInstance().setBagData({id:JSON.stringify(101),num:i-e.consume}),n["default"].getInstance().updateMainWeapon(),this.showUpdatePanel(0);var m=y["default"].URLSERVER+y["default"].httpUrls.UpWeapon;new d["default"].HttpClass(Laya.Handler.create(this,function(e){console.error(e)}),m,JSON.stringify(v));p["default"].noBindScript("升级成功!")}else{var f="消耗的物品数量不足,是否前往获得？";Laya.Scene.open("test/popDialog.scene",!1,{txt:f,type:1})}}},t.prototype.getPosition=function(){return this.vicePos||(this.vicePos=this.owner.localToGlobal(new Laya.Point(this.listVice.x,this.listVice.y))),this.vicePos},t.prototype.propagation=function(e){e.stopPropagation()},t.prototype.createListVice=function(){this.listVice.repeatX=10,this.listVice.repeatY=1,this.listVice.spaceX=0,this.listVice.hScrollBarSkin="",this.listVice.selectEnable=!0,this.listVice.renderHandler=new Laya.Handler(this,this.updateItemSelectViceType),this.listVice.mouseHandler=new Laya.Handler(this,this.onMouseList),this.dataFillSecondWeapon()},t.prototype.onSelectViceType=function(e){var t=this.listVice.getCell(e);if(!t.dataSource.LevelAndNum){var a=l["default"].getInstance().unlockCondition(t.dataSource.id);return void p["default"].noBindScript(a)}this.game.secondWeapon.selected=Number(t.dataSource.id),this.showUpdatePanel(1),this.maskViceSelect=this.listVice.selectedIndex,s["default"].getInstance().roleSecondaryEquipType=this.maskViceSelect,f["default"].instance.setEquipType(t.dataSource.id),console.log("现在选择的副武器类型为 :",this.maskViceSelect)},t.prototype.updateItemSelectViceType=function(e,t){var a=e.getChildByName("label_haveNum"),s=e.getChildByName("img_lock"),i=e.getChildByName("btn_di"),n=e.getChildByName("img_icon");this.game.secondWeapon.selected&&e.dataSource.id===this.game.secondWeapon.selected?(i.skin="face/装备框_选中.png",e.dataSource.LevelAndNum.num-1>0?(a.visible=!0,a.text=JSON.stringify(e.dataSource.LevelAndNum.num-1)):a.visible=!1,s.visible=!1,i.visible=!0):e.dataSource.LevelAndNum&&e.dataSource.LevelAndNum.num?(i.skin="face/装备框.png",i.visible=!0,a.visible=!1,s.visible=!1):(i.skin="face/装备框_灰.png",i.visible=!1,a.visible=!1,s.visible=!0),n.skin="shop/"+e.dataSource.icon+".png"},t.prototype.createListMain=function(){var e=this.listMain;e.repeatX=1,e.repeatY=2,e.spaceY=2,e.vScrollBarSkin="",e.selectEnable=!0,e.selectHandler=new Laya.Handler(this,this.onSelectList),e.renderHandler=new Laya.Handler(this,this.updateItem),e.array=this.dataFillFireAndSpeed()},t.prototype.dataFillSecondWeapon=function(){var e=Object.keys(this.secondaryWeaponConfig);e.sort(function(e,t){var a=o["default"].getInstance().getBagDataById(t.toString()),s=o["default"].getInstance().getBagDataById(e.toString());if(!s)return 1;if(!a)return-1;var i=a.num,n=s.num;return n&&!i?-1:!n&&i?1:-1});for(var t=[],a=0;a<e.length;a++){var s={id:0,LevelAndNum:0,icon:""};s.id=Number(e[a]),s.LevelAndNum=o["default"].getInstance().getBagDataById(s.id.toString())||0,s.icon=u.getInstance().getDataByKey(c.secondaryWeapon,s.id,"pic")+"_shop",t.push(s)}this.listVice.array=t},t.prototype.dataFillFireAndSpeed=function(){for(var e=[],t=0;2>t;t++){var a;t?this.tab.selectedIndex?(a={typeUrl:"face/射速.png",consume:l["default"].getInstance().getspeed_cost()},a.level=l["default"].getInstance().getItemPowerLevel(),a.value=l["default"].getInstance().getShowPower(),a.consumeType=l["default"].getInstance().getCostType()):(console.log(this.game.mainWeapon.speedLevel),a={typeUrl:"face/射速.png",level:this.game.mainWeapon.speedLevel,consume:n["default"].getInstance().speed_gold},a.value=n["default"].getInstance().getShowSpeed()):this.tab.selectedIndex?(a={typeUrl:"face/火力.png",value:l["default"].getInstance().getItemFireLevel(),consume:l["default"].getInstance().getFire_cost()},a.level=l["default"].getInstance().getItemFireLevel(),a.value=l["default"].getInstance().getShowFire(),a.consumeType=l["default"].getInstance().getCostType()):(a={typeUrl:"face/火力.png",level:this.game.mainWeapon.fireLevel,consume:n["default"].getInstance().fire_gold},a.value=n["default"].getInstance().getShowFire()),e.push(a)}return e},t.prototype.showUpdatePanel=function(e){if(this.game.secondWeapon.selected||1!==e){var t,a=0===e?3:2,s=f["default"].instance.UpdateItem;if(this.updatePanel.numChildren){var i=0;for(i;a>i;i++)i>=this.updatePanel.numChildren?(t=Laya.Pool.getItemByCreateFun("updateItem",s.create,s),t.pos(-3,558+100*i),this.updatePanel.addChild(t)):(t=this.updatePanel._children[i],t.visible=!0),this.setItemInfo(e,i,t)}else{var i=0;for(i;a>i;i++)t=Laya.Pool.getItemByCreateFun("updateItem",s.create,s),t.pos(-3,558+100*i),this.setItemInfo(e,i,t),this.updatePanel.addChild(t)}Laya.Browser.window.updatePanel=this.updatePanel,0!==e?(this.updatePanel.y=-872,this.updatePanel.numChildren>2&&(this.updatePanel._children[this.updatePanel.numChildren-1].visible=!1)):this.updatePanel.y=-971}},t.prototype.setItemInfo=function(e,t,a){var s={},i=a.getChildByName("fc_level"),o=a.getChildByName("itemValue"),r=a.getChildByName("consumeIcon"),h=a.getChildByName("fc_consumeNum"),c=a.getChildByName("img_updateIcon");switch(t){case 0:0===e?(i.value="["+this.game.mainWeapon.hpLevel+"]",o.value=""+n["default"].getInstance().getShowHp(),c.skin="face/生命.png",h.value=""+g.tools.converteNum(n["default"].getInstance().hp_gold),s.consume=n["default"].getInstance().hp_gold):(i.value="["+l["default"].getInstance().getItemFireLevel()+"]",o.value=""+l["default"].getInstance().getShowFire(),c.skin="face/火力.png",h.value=""+g.tools.converteNum(l["default"].getInstance().getFire_cost()),s.consume=l["default"].getInstance().getFire_cost(),s.consumeType=l["default"].getInstance().getCostType());break;case 1:0===e?(i.value="["+this.game.mainWeapon.fireLevel+"]",o.value=""+n["default"].getInstance().getShowFire(),c.skin="face/火力.png",h.value=""+g.tools.converteNum(n["default"].getInstance().fire_gold),r.skin="commonPic/金币图标.png",s.consume=n["default"].getInstance().fire_gold):(i.value="["+l["default"].getInstance().getItemPowerLevel()+"]",o.value=""+l["default"].getInstance().getShowPower(),
c.skin="face/射速.png",h.value=""+g.tools.converteNum(l["default"].getInstance().getspeed_cost()),s.consume=l["default"].getInstance().getspeed_cost(),s.consumeType=l["default"].getInstance().getCostType());break;case 2:i.value="["+this.game.mainWeapon.speedLevel+"]",o.value=""+n["default"].getInstance().getShowSpeed(),c.skin="face/射速.png",h.value=""+g.tools.converteNum(n["default"].getInstance().speed_gold),r.skin="commonPic/金币图标.png",s.consume=n["default"].getInstance().speed_gold}h.value.length>=6?h.scale(.8,.8):h.scale(1,1),r.skin="commonPic/金币图标.png";var u=a.getChildByName("btn_update");u.on(Laya.Event.CLICK,this,this.onUpdateBtn,[s,t])},t.prototype.onSelect=function(e){switch(b["default"].getInstance().playSound(_["default"].musicToUrl.button_normal),2!==e&&-1!==e&&i["default"].instance.moveRoleInMain("up"),this._alreadySelected=!0,e){case 0:this.showUpdatePanel(e),this.updatePanel.visible=!0,this.listVice.visible=!1;break;case 1:this.showUpdatePanel(e),this.updatePanel.visible=!0,this.listVice.visible=!0,this.listVice.length||this.createListVice();break;case 2:f["default"].instance.playMusicAndSound(1,m.button_normal),Laya.Scene.open("test/Set.scene",!1),console.error("点击了副武器~~!~~~")}this.owner.getChildByName("render").x=-3.1},t.prototype.updateItem=function(e,t){e.getChildByName("img_updateIcon").skin=e.dataSource.typeUrl,e.getChildByName("fc_level").value="["+e.dataSource.level+"]",e.getChildByName("fc_consumeNum").value=e.dataSource.consume,e.getChildByName("itemValue").value=e.dataSource.value;var a=e.getChildByName("consumeIcon");Laya.Browser.window.consumeIcon=a,1===this.tab.selectedIndex?(a.skin="commonPic/金币图标.png",a.scaleX=1,a.scaleY=1):(a.skin="commonPic/金币图标.png",a.scaleX=1,a.scaleY=1);this.isEnough(this.tab.selectedIndex,e.dataSource.consume)},t.prototype.isEnough=function(e,t){var a=!0;switch(e){case 1:a=o["default"].getInstance().getBagDataById("101").num>t;break;case 2:var s=this.game.secondWeapon.selected;a=this.game.consume<=(o["default"].getInstance().getBagDataById(s)?o["default"].getInstance().getBagDataById(s).num-1:0)}return a},t.prototype.onSelectList=function(e){this._alreadySelected=!0},t.prototype.onMouseList=function(e,t){e.target;switch(e.type){case Laya.Event.MOUSE_DOWN:Laya.timer.clear(this,this.createDetail),this.touchStart=!0,Laya.timer.once(1100,this,this.createDetail,[t]);break;case Laya.Event.MOUSE_UP:Laya.timer.clear(this,this.createDetail),this.cancelDetail();break;case Laya.Event.MOUSE_OUT:Laya.timer.clear(this,this.createDetail),this.cancelDetail();break;case Laya.Event.CLICK:b["default"].getInstance().playSound(_["default"].musicToUrl.button_normal),this.onSelectViceType(t)}},t.prototype.createDetail=function(e){if(this.touchStart){var t=this.listVice.getCell(e),a=f["default"].instance.ItemDetail,s=Laya.Pool.getItemByCreateFun("ItemDetail",a.create,a),i=t.dataSource.id,n=u.getInstance().getData(h["default"].DataType.secondaryWeapon,i);s.detailDec=n.dec,s.detailIcon="shop/"+n.pic+"_shop.png",s.detailName=n.name,s.pos(Laya.stage.width/2,.57*Laya.stage.height),Laya.stage.addChild(s),this.detailObj=s}},t.prototype.cancelDetail=function(){this.detailObj&&(this.detailObj.removeSelf(),this.detailObj=null,this.touchStart=!1)},t.instance=function(){return t._instance},t.prototype.hideAllList=function(){i["default"].instance.moveRoleInMain("down"),this.updatePanel&&(this.updatePanel.visible=!1),this.listVice&&(this.listVice.visible=!1),this.tab.selectedIndex=-1},t.prototype.listVisile=function(){return this.updatePanel._children.length&&(this.updatePanel.visible||this.listVice.visible)},Object.defineProperty(t.prototype,"alreadySelected",{get:function(){return this._alreadySelected},set:function(e){this._alreadySelected=e},enumerable:!0,configurable:!0}),t.prototype.judgeSecondWeaponHave=function(){var e,t=this.secondaryWeaponConfig;for(e in t)if(this.bagInstance.hasId(e))return!0;return!1},t}(Laya.Script);a["default"]=v},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../Tools/Tool":40,"../manage/BagDataControl":44,"../manage/MainWeaponData":55,"../manage/Music":56,"../manage/Playing_var":58,"../manage/SecondWeaponData":59,"../manage/toast":61,"../playing/PlayingSceneControl":67,"../role/role":81}],43:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(){}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.setSceneAdaptHeight=function(){var e=Laya.Scene.root._children;if(e.length){var t=0;for(t;t<e.length;t++)e[0].height=Laya.stage.height}},e.prototype.setBg=function(e){if(e.height&&e.height!==Laya.stage.height){var t=Laya.stage.height,a=e.height;e.y=-(t-a)/2,e.height=t}},e.prototype.setBG_top=function(e){e&&e.height&&e.height!==Laya.stage.height&&(e.height=Laya.stage.height)},e}();a["default"]=s},{}],44:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/HashMap"),i=e("../manage/Playing_var"),n=e("../playing/PlayingSceneControl"),o=function(){function e(){this.game=Laya.Browser.window.game}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.initBagData=function(e){if(!this.bagList){this.bagList=new s["default"];var t=void 0;if(e.bagSecondaryWeapon)for(t in e.bagSecondaryWeapon)this.bagList.add(t,{fire:e.bagSecondaryWeapon[t].fireLvl,power:e.bagSecondaryWeapon[t].powerLvl,num:e.bagSecondaryWeapon[t].num});this.updateBagCommon(e)}},e.prototype.updateBagCommon=function(e){if(e.bagCommon){var t=void 0;for(t in e.bagCommon)this.bagList.add(t,{num:e.bagCommon[t].num});e.bagCommon[101]&&(this.game.gold=e.bagCommon[101].num)}},e.prototype.getBagDataById=function(e){return this.bagList.get("string"==typeof e?e:JSON.stringify(e))},e.prototype.updateBagDate_new=function(e){var t=[];if(e.bagCommon){var a=JSON.parse(e.bagCommon),s=void 0;for(s in a)t.push(a[s]);n["default"].instance.setMoneyData()}if(e.bagSecondaryWeapon){var o=JSON.parse(e.bagSecondaryWeapon),l=void 0;for(l in o)t.push(o[l])}e.achieve&&i["default"].getInstance().updateAchieve(JSON.parse(e.achieve)),this.setBagData(t)},e.prototype.setBagData=function(e){var t=["101","103","102"],a=!1;if(Array.isArray(e)){var s=0;for(s;s<e.length;s++){var i=e[s].id.toString();if(this.bagList.has(i)){var o=this.bagList.get(i),l=void 0;for(l in e[s])if("id"!=l)if("fireLvl"===l||"powerLvl"===l){var r={fireLvl:"fire",powerLvl:"power"};o[r[l]]=e[s][l]}else o[l]=e[s][l];else t.indexOf(e[s][l].toString())>=0&&(a=!0)}else this.bagList.add(i,{fire:1,power:1,num:1})}}else{if(!e.id)return void console.error("修改Bag信息失败~！");var i=e.id.toString();if(this.bagList.has(i)){var o=this.bagList.get(i);if(o){var s=void 0;for(s in e)if("id"!=s)if("fireLvl"===s||"powerLvl"===s){var r={fireLvl:"fire",powerLvl:"power"};o[r[s]]=e[s]}else o[s]=e[s];else t.indexOf(e[s].toString())>=0&&(a=!0)}}else this.bagList.add(i,{fire:1,power:1,num:1})}a&&n["default"].instance.setMoneyData()},e.prototype.deleteBagData=function(e){Array.isArray(e)||this.hasId(e)&&this.bagList.remove(e)},e.prototype.hasId=function(e){return this.bagList.has(e)},e}();a["default"]=o},{"../Tools/HashMap":38,"../manage/Playing_var":58,"../playing/PlayingSceneControl":67}],45:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s;!function(e){var t=Laya.BitmapFont,a=Laya.Handler,s=Laya.Text,i=function(e){function t(t,s,i){var n=e.call(this)||this;return n.loadFont(t,a.create(n,n.loaded,[s,i])),n}return __extends(t,e),t.prototype.loaded=function(e,t){s.registerBitmapFont(e,this),t&&t.run()},t}(t);e.BitmapManage=i}(s||(s={})),a["default"]=s},{}],46:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e){e||console.error("发生错误~！"),this.dialogObject=e,this.init()}return e.prototype.init=function(){var e=this.dialogObject;e.x=-Laya.stage.width-50,e.y=Laya.stage.height/2,e.alpha=0,this.popupAnimation()},e.prototype.popupAnimation=function(){var e=this.dialogObject;Laya.Tween.to(e,{x:Laya.stage.width/2,y:Laya.stage.height/2,alpha:1},200,Laya.Ease.expoIn,Laya.Handler.create(this,function(){},[]),0)},e.prototype.removeAnimation=function(e){this.compelete=e;var t=this.dialogObject;Laya.Tween.to(t,{x:-Laya.stage.width/2,y:Laya.stage.height/2,alpha:0},100,Laya.Ease.circIn,Laya.Handler.create(this,this.destroyAnimation,[]),0)},e.prototype.destroyAnimation=function(){Laya.Tween.clearAll(this.dialogObject),this.compelete.run()},e}();a["default"]=s},{}],47:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=s["default"].FixedDataTables,o=i["default"].DataType,l=e("../Tools/Tool"),r=e("./BagDataControl"),h=e("./Playing_var"),c=e("./toast"),u=e("../playing/PlayingSceneControl"),p=e("../Connect/HttpEnum"),f=e("../Connect/HttpClass"),d=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.self.getChildByName("bg").on(Laya.Event.CLICK,this,this.stopThrough),this.markList=this.self.getChildByName("render"),this.markList.renderHandler=new Laya.Handler(this,this.updateItem),this.self.getChildByName("goBtn").on(Laya.Event.CLICK,this,this.startGame),this.initData()},t.prototype.stopThrough=function(e){e.stopPropagation()},t.prototype.initData=function(){var e=[],t=[104,105],a=n.getInstance(),s=0;for(s;s<t.length;s++){var i={},h=a.getData(o.item,t[s]),c=h.price.split("|"),u=Number(c[1]);i.itemId=t[s],i.icon=h.icon,i.consume=u,i.fc_consume=l.tools.converteNum(u);var p=r["default"].getInstance().getBagDataById(JSON.stringify(t[s]));p?i.fc_itemNum=p.num:i.fc_itemNum=0,e.push(i)}this.markList.array=e},t.prototype.updateItem=function(e,t){e.getChildByName("icon").skin="endLess/"+e.dataSource.icon+".png",e.getChildByName("fc_consume").value=e.dataSource.fc_consume,e.getChildByName("fc_itemNum").value=e.dataSource.fc_itemNum;var a=e.getChildByName("btnBuy");a.on(Laya.Event.CLICK,this,this.buyItem,[e.dataSource.itemId,e.dataSource.consume])},t.prototype.startGame=function(){this.self.visible=!1,h["default"].getInstance().gameModel="endless",u["default"].instance.judgeLoadFinish()},t.prototype.buyItem=function(e,t){var a=this,s=r["default"].getInstance().getBagDataById(JSON.stringify(102));if(!s||s.num<t)return void c["default"].noBindScript("钻石不足！");Laya.Scene.showLoadingPage();var i=r["default"].getInstance().getBagDataById(JSON.stringify(e)),n=i?r["default"].getInstance().getBagDataById(JSON.stringify(e)).num:0,o=p["default"].URLSERVER+p["default"].httpUrls.ShopItem,l={uuId:h["default"].getInstance().uuId,itemID:e,itemNum:n+1};new f["default"].HttpClass(Laya.Handler.create(this,function(t){r["default"].getInstance().updateBagDate_new(t),a.updateListData(e),a.markList.refresh(),Laya.Scene.hideLoadingPage()}),o,JSON.stringify(l))},t.prototype.updateListData=function(e){var t=this.markList.array,a=0;for(a;a<t.length;a++){var s=t[a].itemId;if(s==e){t[a].fc_itemNum=r["default"].getInstance().getBagDataById(JSON.stringify(e)).num;break}}},t}(Laya.Script);a["default"]=d},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"./BagDataControl":44,"./Playing_var":58,"./toast":61}],48:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=s["default"].FixedDataTables,n=e("../Data/JsonEnum"),o=e("./EndlessParseSkill"),l=e("./EndlessManage"),r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.numberOfSkills()},t.prototype.numberOfSkills=function(){this.randomSkills=o["default"].getInstance().getRandomUpgradeSkills(),0!==this.randomSkills.length&&(this.initScene(),this.listInit())},t.prototype.initScene=function(){this.self=this.owner,this.self.pos(0,0),this.contentSet=this.owner.getChildByName("contentSet"),this.list=this.self.m_list,this.list.repeatX=1,this.list.repeatY=3,this.list.spaceY=17,this.indexData=i.getInstance().getData(n["default"].DataType.endless_skill),this.background=this.owner.getChildByName("background"),Laya.Tween.to(this.background,{alpha:.8},20,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.contentSet,{x:0,alpha:1},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),this.adaptive()},t.prototype.adaptive=function(){var e=this.owner.getChildByName("background"),t=this.owner.getChildByName("contentSet");t.y+=10,e.height=Laya.stage.height,e.width=Laya.stage.width,t.y+=(Laya.stage.height-1334)/2},t.prototype.listInit=function(){var e=this.list._children[1];e.hide=!0,e.touchScrollEnable=!1,e.elasticBackTime=200,e.elasticDistance=50,this.listArrayMessage(),this.listAnimation(),this.list.selectHandler=new Laya.Handler(this,this.onSelect_List),this.list.renderHandler=new Laya.Handler(this,this.updateItem)},t.prototype.listArrayMessage=function(){var e=[];if(this.randomSkills.length>=1&&this.randomSkills.length<3){for(var t in this.indexData)if(this.indexData.hasOwnProperty(t)){var a=this.indexData[t];1===this.randomSkills.length?t===this.randomSkills[0].toString()&&e.push({id:t,icon:a.icon,name:a.name,dec:a.dec,selected:!1}):2===this.randomSkills.length&&(t===this.randomSkills[0].toString()||t===this.randomSkills[1].toString())&&e.push({id:t,icon:a.icon,name:a.name,dec:a.dec,selected:!1})}}else if(this.randomSkills.length>=3){for(var t in this.indexData)if(this.indexData.hasOwnProperty(t)){var a=this.indexData[t];e.push({id:t,icon:a.icon,name:a.name,dec:a.dec,selected:!1})}for(var s=0;s<e.length;s++)for(var o=0;o<this.randomSkills.length;o++)0>s&&(s=0),e[s].id===this.randomSkills[o].toString()&&(e.splice(s,1),s--);for(var s=0;s<this.randomSkills.length;s++){var a=i.getInstance().getData(n["default"].DataType.endless_skill,this.randomSkills[s]);e.unshift({id:this.randomSkills[s],icon:a.icon,name:a.name,dec:a.dec,selected:!1})}}this.list.array=e},t.prototype.listAnimation=function(){this.list.selectEnable=!1,this.list.scrollTo(this.list.array.length),this.list.tweenTo(0,700,Laya.Handler.create(this,function(){this.list.selectEnable=!0},[]))},t.prototype.onSelect_List=function(e){console.log("当前选择的索引："+e);var t=new Laya.TimeLine,a=this.list.getCell(e);this.list.array[e].selected=!0,this.list.refresh(),this.list.selectEnable=!1,t.addLabel("press",0).to(a,{scaleX:.95,scaleY:.95},50,Laya.Ease.circInOut,0).addLabel("upspring",0).to(a,{scaleX:1,scaleY:1},150,Laya.Ease.circInOut,0),t.play("press",!1),t.on(Laya.Event.COMPLETE,this,function(){Laya.Tween.to(this.contentSet,{x:-800,Y:0,alpha:0},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){Laya.Scene.close("test/skillsToChoose.scene","skillsToChoose"),l["default"].getInstance().selectSkillBack(this.list.array[e].id)},[]),0),Laya.Tween.to(this.background,{alpha:0},50,Laya.Ease.circIn,null,0)})},t.prototype.updateItem=function(e,t){var a=this.list.array[t].id,s="endlessMode/icon_"+a+".png",i=e.getChildByName("icon");i.loadImage(s);var n=e.getChildByName("baseboard_pitch"),o=e.getChildByName("baseboard");this.list.array[t].selected?(n.visible=!0,o.visible=!1):(n.visible=!1,o.visible=!0);var l=e.getChildByName("name");l.text=this.list.array[t].name;var r=e.getChildByName("describe");r.text=this.list.array[t].dec},t.prototype.onDisable=function(){},t}(Laya.Script);a["default"]=r},{"../Data/DataTables":26,"../Data/JsonEnum":27,"./EndlessManage":49,"./EndlessParseSkill":51}],49:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./MainWeaponData"),i=e("../playing/PlayingSceneControl"),n=e("../../GameConfig"),o=e("../Data/DataTables"),l=e("../Data/JsonEnum"),r=o["default"].FixedDataTables,h=e("./BagDataControl"),c=e("./Playing_var"),u=e("../role/role"),p=e("../Connect/HttpEnum"),f=e("../Connect/HttpClass"),d=e("./SkeletonTempletManage"),y=e("./EndlessParseSkill"),_=e("./EndlessParseBoss"),m=e("../role/EnemyObject"),g=function(){function e(){this.RESPATH="prefab/Endless_buyItem",this.RESPATH_ITEM="prefab/EndLessItem",this.CALTIMEINTERVAL=100,this.calUseSpeed=r.getInstance().getDataByKey(l["default"].DataType.misc,12,"value"),this.weaponJson=r.getInstance().getData(l["default"].DataType.weapon)}return e.getInstance=function(){return this._instance||(this._instance=new e),e._instance},e.prototype.initEndless=function(){this.startTime=Date.now(),this.isBossFighting=!1,this.mainLevel=1,this.scoreNum=0,this.distanceNum=0,this.planeLevelObj=i["default"].instance.owner.label_planeLevel,this.scoreObj=i["default"].instance.owner.label_score,this.distanceObj=i["default"].instance.owner.label_distance,this.distanceObj.value="0Km",this.isLookedAD&&(this.setLookedAdScore(),this.isLookedAD=null),this.scoreObj.value=""+this.scoreNum,this.setSceneElement("enter"),this.loadSk(),this.reqReducePower(),this.updateMainWeaponData(),this.preLoadResInBoss()},e.prototype.updateMainWeaponData=function(){var e=this.mainLevel;s["default"].getInstance().updateMainWeapon(e,e,e)},e.prototype.loadSk=function(){var e=["shengji"],t=0;for(t;t<e.length;t++)d["default"].getInstance().play(l["default"].templetType.other,e[t],e[t],!0,null,null)},e.prototype.setSceneElement=function(e){e&&"exit"===e?i["default"].instance.secondRoleObj.visible=!0:i["default"].instance.secondRoleObj.visible=!1;var t=i["default"].instance.playing_layer._children;t.forEach(function(t,a){if("HpLevel"===t.name){t.visible="exit"!==e;var s=["label_score","label_distance","pauseBtn"],i=0;for(i;i<s.length;i++)t.getChildByName(s[i]).visible="exit"!==e}else t.visible="exit"===e})},e.prototype.initItemIcon=function(){if(this.itemJsonObj)for(var e in this.itemJsonObj)this.itemJsonObj&&(this.itemJsonObj[e].visible=!0);else Laya.loader.load(this.RESPATH_ITEM+".prefab",Laya.Handler.create(this,this.createItemInEndless))},e.prototype.createItemInEndless=function(e){this.itemJsonObj={104:null,105:null};var t,a=0;for(t in this.itemJsonObj){var s=r.getInstance().getData(l["default"].DataType.item,t);this.itemJsonObj[t]=e.create();var i=this.itemJsonObj[t];"104"===t?i.damage=s.damage:i.etime=s.etime,i.pos(-5.5,.65*Laya.stage.height+125*a),Laya.stage.addChild(i),i.itemId=t,i.on(Laya.Event.CLICK,this,this.useItem),a++}this.updateItemData()},e.prototype.updateItemData=function(){var e,t=this.itemJsonObj;for(e in t){var a=r.getInstance().getData(l["default"].DataType.item,e),s=this.itemJsonObj[e];s.getChildByName("icon").skin="endLess/"+a.icon+".png";var i=h["default"].getInstance().getBagDataById(e);s.getChildByName("fc_num").value=i?i.num:0}},e.prototype.getDistance=function(){if("level"!==c["default"].getInstance().gameModel&&!i["default"].instance.isGamePause&&"playing"===c["default"].getInstance().gameStatus){if(!this.isBossFighting&&Date.now()-this.startTime>=this.CALTIMEINTERVAL){var e=(Date.now()-this.startTime)*this.calUseSpeed/1e3;this.distanceNum+=e,this.distanceNum=Number(this.distanceNum.toFixed(1)),this.startTime=Date.now(),this.distanceObj.value=""+this.distanceNum+"km",this.startBossFighting()}this.setCoolDown(),"endless"===c["default"].getInstance().gameModel&&(i["default"].instance.owner.lvscores_sprite.visible=!0)}},e.prototype.getScore=function(e,t){if("level"!==c["default"].getInstance().gameModel&&"settlement"!==c["default"].getInstance().gameStatus&&(!this.isBossFighting||2===e)){var a={1:1,2:10,3:3},s=t*a[e],i=y["default"].getInstance();i.isUpgraded(16)&&(s*=1+.01*i.getSkillNum(16),s=Math.floor(s)),this.scoreNum+=s,this.scoreObj.value=""+this.scoreNum,this.updateMainLevel()}},e.prototype.updateMainLevel=function(){var e=this.weaponJson[this.mainLevel].score;this.mainLevel<=100&&this.scoreNum>=e&&(this.mainLevel++,this.setUpdateEffect(),this.updateMainWeaponData(),this.isLookedAD||this.upgradeOpenSelectSkill());var t=this.weaponJson[this.mainLevel].score;this.changeScoresProgressBar(t)},e.prototype.changeScoresProgressBar=function(e){i["default"].instance.owner.lv_now.value=this.mainLevel;var t=i["default"].instance.owner.lv_scores,a=1===this.mainLevel?0:this.weaponJson[this.mainLevel-1].score;t.text=""+(this.scoreNum-a)+"/"+(e-a);var s=i["default"].instance.owner.scoreMask.graphics;s.clear();var n=177*((this.scoreNum-a)/(e-a));this.mainLevel>=100&&(i["default"].instance.owner.lv_max.visible=!0,t.visible=!1,n=177),s.drawRect(0,0,n,30,"#ff0000")},e.prototype.setUpdateEffect=function(){var e=i["default"].instance.roleObj,t=e.getChildByName("shengji");if(t)t.visible=!0,t.play(0,!1);else{var a=d["default"].getInstance().templets.shengji;if(a){var s=Laya.Pool.getItemByCreateFun("shengji",function(){var e=a.buildArmature(0);return e},this);s.name="shengji",s.pos(e.width/2,e.height/2),s.play(0,!1),e.addChild(s),s.on(Laya.Event.STOPPED,this,function(e){e.visible=!1},[s])}else console.error("升级特效的资源未进行预加载~~~")}},e.prototype.setPlaneShow=function(){},e.prototype.useItem=function(e){var t=e.target;if(!t.cool){var a=t.itemId,s=h["default"].getInstance().getBagDataById(a);if(s&&0!==s.num){this.setItemCool(t);var i={bagCommon:{}};switch(i.bagCommon[a]={num:s.num-1},h["default"].getInstance().updateBagCommon(i),this.updateItemData(),Number(a)){case 104:this.damageAllEnemy(a);break;case 105:this.roleAddShield(a)}}}},e.prototype.setItemCool=function(e){var t=e.getChildByName("cool_img");t.scaleY=1,e.startTime=Date.now(),t.visible=!0,e.cool=!0},e.prototype.setCoolDown=function(){var e=this.itemJsonObj;if(e){var t;for(t in e){var a=e[t];if(a.cool&&Date.now()-a.startTime>=100){a.startTime=Date.now();var s=a.getChildByName("cool_img");s.scaleY=s.scaleY-.02,s.scaleY<=0&&(a.cool=null,s.visible=!1)}}}},e.prototype.damageAllEnemy=function(e){this.setAllDamageEffect();var t=this.itemJsonObj[e].damage.split("|"),a=i["default"].instance.EnemySpite._children,s=0;for(s;s<a.length;s++)if(a[s].visible){var n=a[s].markScript,o=Number(t[0])+n.propertyObj.startHp*Number(t[1]);n.setEnemyHp(o,null,null)}},e.prototype.roleAddShield=function(e){u["default"].instance.startRoleSheild(this.itemJsonObj[e].etime)},e.prototype.setAllDamageEffect=function(){var e=Laya.Pool.getItemByCreateFun("qpbz",this.createAllDamageEffect,this);e.on(Laya.Event.STOPPED,this,function(e){Laya.Pool.recover("qpbz",e)},[e]),e.play(0,!1),e.pos(Laya.stage.width/2,Laya.stage.height/2),Laya.stage.addChild(e)},e.prototype.createAllDamageEffect=function(){var e=d["default"].getInstance().templets.qpbz,t=e.buildArmature(0);return t},e.prototype.createBuyItemPop=function(){return this.buyPopObj?void(this.buyPopObj.visible=!0):void(Laya.loader.getRes(this.RESPATH+".json")?this.loadResCompelete(Laya.loader.getRes(this.RESPATH+".json")):(Laya.Scene.showLoadingPage(),Laya.loader.load(this.RESPATH+".prefab",Laya.Handler.create(this,this.loadResCompelete))))},e.prototype.loadResCompelete=function(e){this.buyPopObj=e.create(),this.buyPopObj.y=(Laya.stage.height-n["default"].height)/2;var t=this.buyPopObj.getChildByName("bg");t.height=Laya.stage.height,t.y=-(Laya.stage.height-n["default"].height)/2,Laya.stage.addChild(this.buyPopObj),Laya.Scene.hideLoadingPage()},e.prototype.endlessSettlement=function(){if(this.itemJsonObj){var e=void 0;for(e in this.itemJsonObj)this.itemJsonObj[e]&&(this.itemJsonObj[e].visible=!1)}},Object.defineProperty(e.prototype,"scoreNum",{get:function(){return this._scoreNum},set:function(e){void 0!==e&&(this._scoreNum=e)},enumerable:!0,configurable:!0}),e.prototype.reqReducePower=function(){var e=p["default"].URLSERVER+p["default"].httpUrls.EndlessStart,t=h["default"].getInstance().getBagDataById("103").num,a={uuId:c["default"].getInstance().uuId,bagCommon:{103:{id:103,num:t-20}}};new f["default"].HttpClass(Laya.Handler.create(this,this.reqReducePowerFinish),e,JSON.stringify(a))},e.prototype.reqReducePowerFinish=function(e){0===e.ret&&h["default"].getInstance().updateBagDate_new(e)},e.prototype.isSatisfy=function(){var e=Laya.Browser.window.game;return e.nowLevel<=10?!1:!0},e.prototype.createUpgradeShortcutByAD=function(){var e="天降鸿运,您获得了一次立即升级的机会是否立即升级？";Laya.Scene.open("test/popDialog.scene",!1,{txt:e,type:2})},e.prototype.createSelectSkill=function(){void 0==this.mainLevel&&(this.isLookedAD=!0),Laya.Scene.open("test/skillsToChoose.scene")},e.prototype.selectSkillBack=function(e){console.error("id-----",e);var t=c["default"].getInstance().gameStatus;"main"===t?(c["default"].getInstance().gameModel="endless",i["default"].instance.judgeLoadFinish()):Laya.timer.once(500,this,function(){i["default"].instance.resumeGame()}),e&&y["default"].getInstance().addNewSkill(e)},e.prototype.setLookedAdScore=function(){var e=this.weaponJson[1].score;this.scoreNum=e,this.updateMainLevel()},e.prototype.showSkills=function(){i["default"].instance.pauseGame(),Laya.Scene.open("test/suspendInterface.scene",!1)},e.prototype.immediatelySettlement=function(){u["default"].instance.setRoleDead()},e.prototype.startBossFighting=function(){var e=_["default"].getInstance().toSatisfy(this.distanceNum);e&&(this.isBossFighting=!0,this.createBossObject())},e.prototype.endBossFighting=function(){var e=this;i["default"].instance.pauseGame(),i["default"].instance.EnemySpite.removeChildren(),this.isBossFighting=!1,Laya.timer.once(1e3,this,function(){e.createSelectSkill()})},e.prototype.upgradeOpenSelectSkill=function(){var e=this;i["default"].instance.pauseGame(),Laya.timer.once(700,this,function(){e.createSelectSkill()})},e.prototype.createBossObject=function(){var e=_["default"].getInstance().nowBossId,t=new m["default"](e);i["default"].instance.EnemySpite.addChild(t.enmeySprite),this.preLoadResInBoss()},e.prototype.preLoadResInBoss=function(){var e,t=_["default"].getInstance().getTempletDateInBoss(),a=d["default"].getInstance().templets;for(e in t){var s=r.getInstance().getDataByKey(l["default"].DataType.monster,e,"pic");a[s]||d["default"].getInstance().play(l["default"].templetType.enemy,null,s,!0,null,null)}},e.prototype.setCompensateTime=function(){this.startTime=Date.now()},e.prototype.exitEndless=function(){y["default"].getInstance().deleteSkill(),e._instance=null},e}();a["default"]=g},{"../../GameConfig":1,"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../Data/JsonEnum":27,"../playing/PlayingSceneControl":67,"../role/EnemyObject":75,"../role/role":81,"./BagDataControl":44,"./EndlessParseBoss":50,"./EndlessParseSkill":51,"./MainWeaponData":55,"./Playing_var":58,"./SkeletonTempletManage":60}],50:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=s["default"].FixedDataTables,o=e("../Tools/Tool"),l=function(){function e(){this.TABLECONFIG=n.getInstance().getData(i["default"].DataType.endless_boss),this.alreadyBossed=[]}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.toSatisfy=function(e){var t=Object.keys(this.TABLECONFIG),a=t.length-1;for(a;a>=0;a--){var s=t[a],i=this.TABLECONFIG[s].distance;if(e>=i){if(this.alreadyBossed.indexOf(s)>=0)return!1;this.alreadyBossed.push(s);var n=this.TABLECONFIG[s].boss.split("|");return this._nowBossId=Number(n[0]),this.initVar_monster(s),!0}}return!1},e.prototype.initVar_monster=function(e){var t=this.TABLECONFIG[e].time.split("|"),a=o.tools.random(1e4*Number(t[0]),1e4*Number(t[1]));this.monsterInterval=1e3*a/1e4,this.monsterIndex=0,this.monsterIds=[];var s=this.TABLECONFIG[e].monster.split("#"),i=0;for(i;i<s.length;i++){var n=s[i].split("|"),l=0;for(l;l<Number(n[1]);l++)this.monsterIds.push(n[0])}},e.prototype.getMonsterId=function(){return this.monsterIndex>=this.monsterIds.length&&(this.monsterIndex=0),this.monsterIds[this.monsterIndex++]},e.prototype.getTempletDateInBoss=function(){var e;e=this.alreadyBossed.length?Number(this.alreadyBossed[this.alreadyBossed.length-1])+1:1;var t={};if(this.TABLECONFIG[e]){var a=this.TABLECONFIG[e].monster.split("#"),s=0;for(s;s<a.length;s++){var i=a[s].split("|")[0];t[i]=!0}}return t},e.prototype.getintervalByOne=function(){var e=Number(this.alreadyBossed[this.alreadyBossed.length-1]),t=this.TABLECONFIG[e].time,a=t.split("|"),s=a.map(function(e){return 1e4*Number(e)}),i=o.tools.random(s[0],s[1]);return 1e-4*i*1e3},Object.defineProperty(e.prototype,"monsterInterval",{get:function(){return this._monsterInterval},set:function(e){this._monsterInterval=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nowBossId",{get:function(){return this._nowBossId},enumerable:!0,configurable:!0}),e}();a["default"]=l},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../Tools/Tool":40}],51:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/JsonEnum"),i=e("../Data/DataTables"),n=i["default"].FixedDataTables,o=e("../Tools/Tool"),l=e("../playing/PlayingSceneControl"),r=e("./MainWeaponData"),h=e("../role/role"),c=e("./SkeletonTempletManage"),u=function(){function e(){this._skills_endless={},this.parseSkillTable()}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.parseSkillTable=function(){this.tableConfig=n.getInstance().getData(s["default"].DataType.endless_skill)},e.prototype.isSkillCap=function(e){var t=this.skills_endless[e];return t&&t>=this.tableConfig[e].limit?!0:!1},e.prototype.addNewSkill=function(e){if(!this.isSkillCap(e)){this.setSkills_endless(e),this.skillTakeEffect(Number(e));var t=[6,7,8];t.indexOf(Number(e))>-1&&this.setSkillEffect(Number(e))}},e.prototype.skillTakeEffect=function(e){switch(e){case 1:var t=.01*this.getSkillNum(e),a=t*r["default"].getInstance().getRoleHp();a=Math.floor(a),l["default"].instance.roleTotal=a+r["default"].getInstance().getRoleHp(),l["default"].instance.roleHp+=a,l["default"].instance.roleHp>l["default"].instance.roleTotal&&(l["default"].instance.roleHp=l["default"].instance.roleTotal),h["default"].instance.setRoleHp(0);break;case 3:l["default"].instance.setSpeedByEndless(this.getSkillNum(e));break;case 18:var s=.01*this.getSkillNum(e),i=l["default"].instance.roleTotal*s;h["default"].instance.setRoleHp(-i),this.setSkillEffect(18)}},Object.defineProperty(e.prototype,"skills_endless",{get:function(){return this._skills_endless},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skillsByDate",{get:function(){return this._skillsByDate||(this._skillsByDate=[]),this._skillsByDate},enumerable:!0,configurable:!0}),e.prototype.setSkills_endless=function(e){this._skills_endless[e]?this._skills_endless[e]++:this._skills_endless[e]=1,void 0===this._skillsByDate&&(this._skillsByDate=[]),this._skillsByDate.push(e)},e.prototype.getSkillNum=function(e,t){if(!this.skills_endless[e])return!1;var a=this.skills_endless[e]-1,s=null;switch(s=t&&"boss"===t?this.tableConfig[e].value2:this.tableConfig[e].value1,"string"==typeof s&&(s=s.split("|")),e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 13:case 15:case 16:case 18:case 19:s=Number(s[1])*a+Number(s[0]);break;case 9:var i=Number(s[3])*a+Number(s[2]);s=[Number(s[0]),Number(s[1]),i];break;case 11:case 12:var n=Number(s[1])*a+Number(s[0]);s=[n,Number(s[2])];break;case 14:s=this.tableConfig[e].rate;break;case 17:var o=Number(s[2])*a+Number(s[1]);s=[Number(s[0]),o]}return s},e.prototype.getSkillProbability=function(e){return this.tableConfig[e].rate},e.prototype.getImmunityData=function(e,t){return t&&"boss"===t?Number(this.tableConfig[e].immunity2):Number(this.tableConfig[e].immunity1)},e.prototype.getRandomUpgradeSkills=function(){var e,t=Object.keys(this.tableConfig);for(e in this.skills_endless){var a=t.indexOf(e);a>-1&&this.isSkillCap(Number(e))&&t.splice(a,1)}if(t.length){if(t.length>3){var s=this.getRateArr(t),i=o.tools.getArrayDifElements(s,3);return i.map(function(e){return Number(e)})}return t.map(function(e){return Number(e)})}return!1},e.prototype.getRateArr=function(e){var t=[],a=0;for(a;a<e.length;a++){var s=e[a],i=Number(this.tableConfig[s].rate),n=0;for(n;i>n;n++)t.push(s)}return t},e.prototype.isUpgraded=function(e){return this.skills_endless[e]},e.prototype.getEffectNameById=function(e){
var t=this.tableConfig[e];return t&&-1!=t.effect?t.effect:t[11].effect},e.prototype.setSkillEffect=function(e,t,a){var s,i=this.tableConfig[e].effect,n=c["default"].getInstance().templets;if(n[i])switch(s=Laya.Pool.getItemByCreateFun("effectName",function(){return n[i].buildArmature(0)},this),s.name=i,t||(t=l["default"].instance.roleObj),e){case 6:case 7:case 8:case 17:s.play(0,!0),s.pos(t.width/2,t.height/2),t.addChild(s);break;case 9:s.on(Laya.Event.STOPPED,this,this.playFinshCallBack,[s,e]);var o=t.vars_.propertyObj;s.pos(o.mark_w/2,o.mark_h/2),s.play("bz",!1),t.addChild(s);break;case 10:if(t.getChildByName(i))s.play("hit",!1),s.visible=!0;else{s.on(Laya.Event.STOPPED,this,this.playFinshCallBack,[s,e]);var o=t.vars_.propertyObj;s.pos(o.mark_w/2,o.mark_h/2),s.play("hit",!1),t.addChild(s)}break;case 11:s.on(Laya.Event.STOPPED,this,this.playFinshCallBack,[s,e]);var o=t.vars_.propertyObj;s.pos(t.x+o.mark_w/2,t.y+o.mark_h/2),s.play(0,!1),Laya.stage.addChild(s);break;case 12:s.on(Laya.Event.STOPPED,this,this.playFinshCallBack,[s,e]);var o=t.vars_.propertyObj;s.pos(o.mark_w/2,o.mark_h/2),s.play("bdxg",!0),t.addChild(s);break;case 14:s.on(Laya.Event.STOPPED,this,this.playFinshCallBack,[s,e]),s.pos(a.x,a.y),s.play(0,!1),l["default"].instance.effectParent.addChild(s);break;case 18:case 15:s.on(Laya.Event.STOPPED,this,this.playFinshCallBack,[s,e]),s.pos(t.width/2,t.height/2),s.play(0,!1),t.addChild(s)}},e.prototype.playFinshCallBack=function(e,t){switch(t){case 9:case 12:e.visible=!1;break;case 10:e.play("dcp",!0);break;default:e.removeSelf(),Laya.Pool.recover(e.name,e)}},e.prototype.cancalSkillEffect=function(e,t){var a=this.getEffectNameById(e);if(t&&t.getChildByName(a)){var s=t.removeChildByName(a);Laya.Pool.recover(a,s)}},e.prototype.getSkillEffectIds=function(){var e,t=[];for(e in this.tableConfig){var a=this.tableConfig[e].effect;-1!=a&&t.push(a)}return t},e.prototype.deleteSkill=function(){e._instance=null},e}();a["default"]=u},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../Tools/Tool":40,"../playing/PlayingSceneControl":67,"../role/role":81,"./MainWeaponData":55,"./SkeletonTempletManage":60}],52:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=s["default"].FixedDataTables,n=e("../Data/JsonEnum"),o=e("../playing/PlayingSceneControl"),l=e("./EndlessParseSkill"),r=e("./EndlessManage"),h=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.initScene(),this.listInit()},t.prototype.initScene=function(){this.self=this.owner,this.self.pos(0,0),this.contentSet=this.owner.getChildByName("contentSet"),this.list=this.self.m_list,this.list.repeatX=4,this.list.repeatY=4,this.list.spaceY=10,this.indexData=i.getInstance().getData(n["default"].DataType.endless_skill),this.acquiredSkills=l["default"].getInstance().skillsByDate,this.But_Quit=this.self.But_Quit,this.But_Continue=this.self.But_Continue,this.explain=this.self.explain,this.explain.alpha=0,this.background=this.owner.getChildByName("background"),Laya.Tween.to(this.background,{alpha:.8},20,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.contentSet,{x:0,alpha:1},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),this.adaptive(),this.closeButtonClick()},t.prototype.adaptive=function(){var e=this.owner.getChildByName("background"),t=this.owner.getChildByName("contentSet");t.y+=10,e.height=Laya.stage.height,e.width=Laya.stage.width,t.y+=(Laya.stage.height-1334)/2},t.prototype.listInit=function(){this.list.selectEnable=!0,this.listArrayMessage(),this.list.selectHandler=new Laya.Handler(this,this.onSelect_List),this.list.renderHandler=new Laya.Handler(this,this.updateItem)},t.prototype.listArrayMessage=function(){var e=[];if(this.acquiredSkills.length<=0)return void(this.list.array=[]);for(var t=this.acquiredSkills.length-1;t>=0;t--)for(var a in this.indexData)if(this.indexData.hasOwnProperty(a)){var s=this.indexData[a];s.id==this.acquiredSkills[t]&&e.push({id:a,icon:s.icon,name:s.name,dec:s.dec,animation:!0})}this.list.array=e},t.prototype.listAnimation=function(){this.list.selectEnable=!1,this.list.scrollTo(this.list.array.length),this.list.tweenTo(0,1e3,Laya.Handler.create(this,function(){this.list.selectEnable=!0},[]))},t.prototype.onSelect_List=function(e){var t=this.list.array[e].id,a="endlessMode/icon_"+t+".png",s=this.explain.getChildByName("icon");s.loadImage(a);var i=this.explain.getChildByName("name");i.text=this.list.array[e].name;var n=this.explain.getChildByName("describe");n.text=this.list.array[e].dec},t.prototype.updateItem=function(e,t){e.name="item"+t;var a=this.list.array[t].id,s="endlessMode/icon_"+a+".png",i=e.getChildByName("icon");i.loadImage(s);var n=e.getChildByName("name");n.text=this.list.array[t].name,this.list.array[t].animation&&(e.alpha=0,Laya.Tween.to(e,{alpha:1},800,Laya.Ease.sineInOut,Laya.Handler.create(this,function(){this.list.array[t].animation=!1},[]),0))},t.prototype.closeButtonClick=function(){this.But_Continue.on(Laya.Event.MOUSE_DOWN,this,this.closeButtonDOWN),this.But_Continue.on(Laya.Event.MOUSE_MOVE,this,this.closeButtonMOVE),this.But_Continue.on(Laya.Event.MOUSE_UP,this,this.But_ContinueUP),this.But_Continue.on(Laya.Event.MOUSE_OUT,this,this.closeButtonOUT),this.But_Quit.on(Laya.Event.MOUSE_DOWN,this,this.closeButtonDOWN),this.But_Quit.on(Laya.Event.MOUSE_MOVE,this,this.closeButtonMOVE),this.But_Quit.on(Laya.Event.MOUSE_UP,this,this.But_QuitUP),this.But_Quit.on(Laya.Event.MOUSE_OUT,this,this.closeButtonOUT)},t.prototype.closeButtonDOWN=function(){},t.prototype.closeButtonMOVE=function(){},t.prototype.But_ContinueUP=function(){Laya.Tween.to(this.contentSet,{x:-800,Y:0,alpha:0},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.background,{alpha:0},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){this.self.close(),o["default"].instance.resumeGame()},[]),50)},t.prototype.But_QuitUP=function(){Laya.Tween.to(this.contentSet,{x:-800,Y:0},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.background,{alpha:0},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){this.self.close(),r["default"].getInstance().immediatelySettlement()},[]),50)},t.prototype.closeButtonOUT=function(){},t.prototype.onDisable=function(){},t}(Laya.Script);a["default"]=h},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../playing/PlayingSceneControl":67,"./EndlessManage":49,"./EndlessParseSkill":51}],53:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./EndlessSuspend"),i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.initScene()},t.prototype.initScene=function(){this.self=this.owner,this.box=this.self.parent,this.list=this.owner.scene.m_list,this.contentSet=this.list.parent,this.selfScene=this.self.scene,this.explain=this.selfScene.getComponent(s["default"]).explain;var e=this.box.name;this.selfIndex=e.substring(4),this.longPressTime=0,this.pressSwitch=!1,this.cellClick()},t.prototype.cellClick=function(){this.self.on(Laya.Event.MOUSE_DOWN,this,this.cellDOWN),this.self.on(Laya.Event.MOUSE_MOVE,this,this.cellMOVE),this.self.on(Laya.Event.MOUSE_UP,this,this.cellUP),this.self.on(Laya.Event.MOUSE_OUT,this,this.cellOUT)},t.prototype.cellDOWN=function(){this.longPressTime=0,this.pressSwitch=!0;var e=this.list.array[this.selfIndex].id,t="endlessMode/icon_"+e+".png",a=this.explain.getChildByName("icon");a.loadImage(t);var s=this.explain.getChildByName("name");s.text=this.list.array[this.selfIndex].name;var i=this.explain.getChildByName("describe");i.text=this.list.array[this.selfIndex].dec;var n=this.box.x;n>=1*this.list.width/4&&n<2*this.list.width/4?this.explain.x=3*this.contentSet.width/4-50:n>=2*this.list.width/4&&n<3*this.list.width/4?this.explain.x=1*this.contentSet.width/4+50:this.explain.x=this.contentSet.width/2},t.prototype.cellMOVE=function(){},t.prototype.cellUP=function(){this.longPressTime=0,this.pressSwitch=!1,this.explain.alpha=0},t.prototype.cellOUT=function(){this.longPressTime=0,this.pressSwitch=!1,this.explain.alpha=0},t.prototype.onUpdate=function(){this.pressSwitch&&(this.longPressTime+=1,this.longPressTime>=0&&this.longPressTime<20?this.explain.alpha=0:this.longPressTime>=10&&(this.explain.alpha=1))},t.prototype.onDisable=function(){},t}(Laya.Script);a["default"]=i},{"./EndlessSuspend":52}],54:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,i=e("../Tools/HashMap");!function(e){var t=function(){function e(){this.FixedDataTablesDir="res/data/dataJson",this.hashMap=new i["default"]}return e.Instance=function(){return null==this.myselfs&&(this.myselfs=new e),this.myselfs},e.prototype.loadAssets=function(e,t,a){var s=this;e instanceof Array||(e=[e]);var i=[];return e.forEach(function(e){if(!s.hashMap.has(e)){var t=e.split("."),a=s.getAssetsType(t[t.length-1]);if(!a)return!1;var n={};n=a===Laya.Loader.JSON||a===Laya.Loader.BUFFER&&"zip"===t[t.length-1]?{url:s.FixedDataTablesDir+"/"+e,type:a}:{url:e,type:a},i.push(n)}}),i.length<=0?void(t&&t.runWith(!0)):void Laya.loader.load(i,Laya.Handler.create(this,function(a,i){var n=0;e.forEach(function(e){s.hashMap.add(e,Laya.loader.getRes(a[n].url)),n++}),t&&t.runWith(i)},[i]),a)},e.prototype.clearAssets=function(e){var t=this;e instanceof Array||(e=[e]),e.forEach(function(a,s){var i=a.split("."),n=t.getAssetsType(i[i.length-1]);if(!n)return!1;var o="";o=n===Laya.Loader.JSON?t.FixedDataTablesDir+"/"+a:a,Laya.loader.clearRes(o),t.hashMap.remove(e[s])})},e.prototype.clearTextureRes=function(e){var t=this;e instanceof Array||(e=[e]),e.forEach(function(e){var a=e.split("."),s=t.getAssetsType(a[a.length-1]);if(!s)return!1;var i="";i=s===Laya.Loader.JSON?t.FixedDataTablesDir+"/"+e:e,Laya.loader.clearTextureRes(i)})},e.prototype.getAssets=function(e){return this.hashMap.get(e)},e.prototype.getAssetsType=function(e){var t=null;switch(e){case"jpg":case"png":t=Laya.Loader.IMAGE;break;case"fui":case"txt":case"sk":t=Laya.Loader.BUFFER;break;case"json":t=Laya.Loader.JSON;break;case"atlas":t=Laya.Loader.ATLAS;break;case"xml":t=Laya.Loader.XML;break;case"mp3":case"wav":t=Laya.Loader.SOUND;break;case"csv":t="csv";break;case"zip":t=Laya.Loader.BUFFER;break;default:t=null}return t},e.prototype.addPackage=function(e,t){if(e.constructor===Array)for(var a in e)var s=e[a],i=t[a]},e.myselfs=null,e}();e.LoadManager=t}(s||(s={})),a["default"]=s},{"../Tools/HashMap":38}],55:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=s["default"].FixedDataTables,o=i["default"].DataType,l=e("./Playing_var"),r=e("./EndlessParseSkill"),h=function(){function e(){this.setMainWeapon()}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.setMainWeapon=function(e,t,a){this.game||(this.game=Laya.Browser.window.game);var s=e||this.game.mainWeapon.fireLevel;this.fireData=n.getInstance().getData(o.weapon,s);var i=t||this.game.mainWeapon.speedLevel;this.speedData=n.getInstance().getData(o.weapon,i);var l=a||this.game.mainWeapon.hpLevel;this.hpDate=n.getInstance().getData(o.weapon,l)},Object.defineProperty(e.prototype,"fire_gold",{get:function(){return this._fire_gold=this.fireData.fire_gold,this._fire_gold},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp_gold",{get:function(){return this._hp_gold=this.hpDate.hp_gold,this._hp_gold},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fire",{get:function(){return this._fire=this.fireData.fire,this._fire},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed_gold",{get:function(){return this._speed_gold=this.speedData.speed_gold,this._speed_gold},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed=this.speedData.speed,this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bulletSpeed",{get:function(){this._bulletSpeed=this.speedData.bulletSpeed;var e=l["default"].getInstance().gameModel;if("endless"===e){var t=.01*r["default"].getInstance().getSkillNum(3);this._bulletSpeed=this._bulletSpeed*(1+t)}return this._bulletSpeed},enumerable:!0,configurable:!0}),e.prototype.getShowFire=function(){var e;l["default"].getInstance().gameModel;e=this.game.mainWeapon.fireLevel;var t=n.getInstance().getDataByKey(o.weapon,e,"fire");return t},e.prototype.getShowHp=function(){var e=this.game.mainWeapon.hpLevel;return n.getInstance().getDataByKey(o.weapon,e,"hp")},e.prototype.getShowSpeed=function(){var e=this.game.mainWeapon.speedLevel;return n.getInstance().getDataByKey(o.weapon,e,"speed")},e.prototype.updateMainWeapon=function(e,t,a){this.setMainWeapon(e||this.game.mainWeapon.fireLevel,t||this.game.mainWeapon.speedLevel,a||this.game.mainWeapon.hpLevel)},e.prototype.getRoleHp=function(){var e=this.game.mainWeapon.hpLevel;return n.getInstance().getDataByKey(o.weapon,e,"hp")},e}();a["default"]=h},{"../Data/DataTables":26,"../Data/JsonEnum":27,"./EndlessParseSkill":51,"./Playing_var":58}],56:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/MusicEnum"),i=s["default"].musicPath,n=s["default"].musicToUrl,o=Laya.SoundManager,l=function(){function e(){o.useAudioMusic=!1}return e.getInstance=function(){return e.instance||(e.instance=new e,Laya.Browser.window.Music=e.instance),e.instance},Object.defineProperty(e.prototype,"musicOn",{get:function(){return void 0===this._musicOn&&(this._musicOn=!0),this._musicOn},set:function(e){this._musicOn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soundOn",{get:function(){return void 0==this._soundOn&&(this._soundOn=!0),this._soundOn},set:function(e){this._soundOn=e},enumerable:!0,configurable:!0}),e.prototype.playMusic=function(e){void 0===this.musicOn&&(this.musicOn=!0),this.musicOn&&o.playMusic(i+n[e]+".mp3")},e.prototype.playSound=function(e,t){void 0===this.soundOn&&(this.soundOn=!0),this.soundOn&&o.playSound(i+n[e]+".mp3",t||1)},e.prototype.stopNowMusic=function(){Laya.SoundManager.stopMusic()},e.prototype.startNowMusic=function(){this.playMusic(n.bg_menu)},e.prototype.stopOneSound=function(e){o.stopSound(i+n[e]+".mp3")},e}();a["default"]=l},{"../Data/MusicEnum":28}],57:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./toast"),i=function(){function e(){this.wx=Laya.Browser.window.wx,Laya.Browser.onMiniGame&&(this.OpenDataContext=this.wx.getOpenDataContext(),this.listernerShareApp())}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.postMsg=function(e,t){Laya.Browser.onMiniGame&&this.OpenDataContext.postMessage({type:e,data:t||null})},e.prototype.listernerShareApp=function(){this.wx.onShareAppMessage(function(){return{title:"怪星大作战"}})},e.prototype.setShare=function(e){Laya.Browser.onMiniGame?(this.wx.shareAppMessage({title:"怪星大作战"}),console.log("主动进行了转发")):s["default"].noBindScript("仅支持微信客户端!")},e.prototype.vibrateShort=function(){Laya.Browser.onMiniGame&&this.wx.vibrateShort()},e.prototype.vibrateLong=function(){Laya.Browser.onMiniGame&&this.wx.vibrateLong()},e}();a["default"]=i},{"./toast":61}],58:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(){this._enemyNumByAwave=1,this._timeIntervalByOne=1e4,this._invincible=!0,this._canColorKillEnemy=!1,this.enemyHp={1:5,2:3,3:2},this.bulletSpeed=-50,this.bulletInterval=100,this._checkInData={already:!1,day:0},this.gameModel="level"}return e.prototype.updateGameVar=function(e,t){var a=this;Laya.Browser.window.playingVar=this,Laya.Browser.window.game||(Laya.Browser.window.game={});var s=Laya.Browser.window.game,i=["enemyNumByAwave","timeIntervalByOne","gameStatus","canColorKillEnemy","roleSecondaryEquipType","enemyHp"];i.forEach(function(e,t){s[e]=a[e]}),s.nowLevel=e.barrier.curBarrier||1,s.mainWeapon={fireLevel:e.mainWeapon.fireLvl,speedLevel:e.mainWeapon.shotSpeed,hpLevel:e.mainWeapon.hpLvl},s.secondWeapon={selected:e.curSecondaryWeaponId},this.checkInData.already=e.signIn.signIn,this.checkInData.day=e.signIn.signTimes,this.luckyValue=e.barrier.luckyValue,this.achieve=e.achieve,this.playerAchieve=t},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},Object.defineProperty(e.prototype,"roleSecondaryEquipType",{get:function(){return this._roleSecondaryEquipType},set:function(e){this._roleSecondaryEquipType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canColorKillEnemy",{get:function(){return this._canColorKillEnemy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invincible",{get:function(){return this._invincible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enemyNumByAwave",{get:function(){return this._enemyNumByAwave},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeIntervalByOne",{get:function(){return this._timeIntervalByOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameStatus",{get:function(){return this._gameStatus},set:function(e){this._gameStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkInData",{get:function(){return this._checkInData},set:function(e){this._checkInData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uuId",{get:function(){return void 0===this._uuId&&console.error("发生了严重错误！"),this._uuId},set:function(e){e||console.error("发生了严重错误！"),this._uuId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wecode",{get:function(){return void 0===this._wecode&&console.error("发生了严重错误！"),this._wecode},set:function(e){e||console.error("发生了严重错误！"),this._wecode=e},enumerable:!0,configurable:!0}),e.prototype.updateAchieve=function(e){var t;for(t in e)this.achieve[t]=e[t]},e.prototype.updatePlayerAchieve=function(e){var t;for(t in e){var a=e[t],s=void 0;for(s in a)this.playerAchieve[t][s]=a[s]}},e.prototype.getKillMaxNum=function(e){return e>this.achieve.killTopNum?e:this.achieve.killTopNum},e.prototype.getScoresMaxNum=function(e){return e>this.achieve.endlessTopScore?e:this.achieve.endlessTopScore},e}();a["default"]=s},{}],59:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./BagDataControl"),i=e("../Data/DataTables"),n=e("../Data/JsonEnum"),o=n["default"].DataType,l=n["default"].enemyToPerfab,r=i["default"].FixedDataTables,h=function(){function e(){this.game=Laya.Browser.window.game,this.configNowWeapon=r.getInstance().getData(o.secondaryWeapon,this.game.secondWeapon.selected)}return e.prototype.updateWeaponComfig=function(){this.configNowWeapon=r.getInstance().getData(o.secondaryWeapon,this.game.secondWeapon.selected)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.getItemPowerLevel=function(e){return s["default"].getInstance().getBagDataById(e||this.game.secondWeapon.selected).power},e.prototype.getItemFireLevel=function(e){return Laya.Browser.window.BagDataControl=s["default"],s["default"].getInstance().getBagDataById(e||this.game.secondWeapon.selected).fire},e.prototype.getShowFire=function(e){return this.getFire(e)},e.prototype.getShowPower=function(e){var t=e||this.game.secondWeapon.selected,a=this.getItemPowerLevel(t),s=r.getInstance().getData(o.secondaryWeapon,t).power,i=s.split("|");return Number(i[0])+a*Number(i[1])},e.prototype.getFire=function(e){var t=e||this.game.secondWeapon.selected,a=this.getItemFireLevel(t),s=r.getInstance().getData(o.secondaryWeapon,t).fire,i=s.split("|");return Number(i[0])+a*Number(i[1])},e.prototype.getSpeed=function(e){if(!this.game.secondWeapon.selected)return 0;var t=e||this.game.secondWeapon.selected,a=s["default"].getInstance().getBagDataById(JSON.stringify(t)).power,i=r.getInstance().getData(o.secondaryWeapon,t).speed,n=i.split("|"),l=Number(n[0])+a*Number(n[1]);return Number(n[2])-(l-9)*Number(n[3])},e.prototype.getFire_cost=function(e){var t=e||this.game.secondWeapon.selected,a=s["default"].getInstance().getBagDataById(JSON.stringify(t)).fire,i=r.getInstance().getData(o.secondaryWeapon,t).fire_cost,n=i.split("|"),l=Math.floor(Number(n[0])+Math.pow(a/Number(n[1]),Number(n[2])));return l},e.prototype.getCostType=function(e){var t=e||this.game.secondWeapon.selected,a=r.getInstance().getData(o.secondaryWeapon,t).unlock.split("|");return a.filter(function(e,t,a){a[t]=Number(e)}),a},e.prototype.getspeed_cost=function(e){var t=e||this.game.secondWeapon.selected,a=s["default"].getInstance().getBagDataById(JSON.stringify(t)).power,i=r.getInstance().getData(o.secondaryWeapon,t).fire_cost,n=i.split("|"),l=Number(n[0])+Math.pow(a/Number(n[1]),Number(n[2]));return Math.floor(l)},e.prototype.getbulletSpeed=function(e){var t=e||this.game.secondWeapon.selected,a=s["default"].getInstance().getBagDataById(JSON.stringify(t)).power,i=(r.getInstance().getData(o.secondaryWeapon),r.getInstance().getData(o.secondaryWeapon,t).bulletSpeed),n=i.split("|");return Number(n[0])+a*Number(n[1])},Object.defineProperty(e.prototype,"buffType",{get:function(){if(!this._buffType){var e=this.game.secondWeapon.selected,t=r.getInstance().getData(o.secondaryWeapon,e).type,a=t.split("|");this._buffType=a}return this._buffType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getIceData",{get:function(){if(!this._getIceSpeed){this._getIceSpeed=[];var e=s["default"].getInstance().getBagDataById(JSON.stringify(this.game.secondWeapon.selected)).power,t=this.configNowWeapon.type.split("|");this._getIceSpeed.push(this.getbulletSpeed()*Number(t[1])/100),this._getIceSpeed.push(e*Number(t[3])+Number(t[2]))}return this._getIceSpeed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iceBate",{get:function(){var e=s["default"].getInstance().getBagDataById(JSON.stringify(this.game.secondWeapon.selected)).power,t=this.configNowWeapon.type.split("|"),a=Number(t[4])+e*Number(t[5]);return a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getFlottantT",{get:function(){if(!this._getFlottantT){var e=s["default"].getInstance().getBagDataById(JSON.stringify(this.game.secondWeapon.selected)).power,t=this.configNowWeapon.type.split("|");this._getFlottantT=Number(t[1])+e*Number(t[2])}return this._getFlottantT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bulletPrefab",{get:function(){return l[this.configNowWeapon.bullet]||this.configNowWeapon.bullet},enumerable:!0,configurable:!0}),e.prototype.unlockCondition=function(e){var t,a=r.getInstance().getData(o.secondaryWeapon,e.toString()),s=e?a.unlock:this.configNowWeapon.unlock,i=s.split("|");return t="1"===i[0]?"通关第 "+i[1]+" 关解锁！":"请前往商店解锁"},e}();a["default"]=h},{"../Data/DataTables":26,"../Data/JsonEnum":27,"./BagDataControl":44}],60:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../role/Bullet_second"),i=function(){function e(){}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.play=function(e,t,a,s,i,n,o,l){var r={nowLoop:s,nowPos:i||{x:0,y:0},nowParent:n,nowComplete:o,templetName:a,aniName:t,nick:l,_tempType:e};this.initTemplet(r)},e.prototype.initTemplet=function(e){var t,a=e.templetName;void 0===this._templets&&(this._templets={}),this._templets[a]?(t=this._templets[a],this.parseComplete(e)):(t=new Laya.Templet,this._templets[a]=t,this._templets[a].templetType=e._tempType,t.on(Laya.Event.COMPLETE,this,this.parseComplete,[e]),t.on(Laya.Event.ERROR,this,this.onError),t.loadAni("dragonbones/"+a+".sk"))},e.prototype.parseComplete=function(e){var t=this,a=e.nowParent,s=e.templetName,i=e.nowComplete;if(!a)return console.error("加载完成~~~~",s),void(i&&i.run());var n=Laya.Pool.getItemByCreateFun(s,function(){return t._templets[s].buildArmature(0)},this);n.pos(e.nowPos.x,e.nowPos.y),!e.nowLoop&&n.on(Laya.Event.STOPPED,this,this.sk_listener,[n]),n.play(e.aniName,e.nowLoop),a&&a.addChild(n),e.nick&&(n.name=e.nick),e.nowComplete&&e.nowComplete.runWith(n)},e.prototype.sk_listener=function(e){e.off(Laya.Event.STOPPED,this,this.sk_listener),e&&e.removeSelf()},e.prototype.onError=function(){console.error("onError")},Object.defineProperty(e.prototype,"templets",{get:function(){return this._templets},enumerable:!0,configurable:!0}),e.prototype.createSkByTemplet=function(e){var t=this;if(this.templets[e]){var a=Laya.Pool.getItemByCreateFun(e,function(){var a=t.templets[e].buildArmature(0);return a.addComponent(s["default"]),a},this);return a}console.error("不存在的templets---",e)},e}();a["default"]=i},{"../role/Bullet_second":73}],61:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){var e=this.owner;e.alpha=.5,Laya.Tween.to(e,{y:e.y-320+120,alpha:1},500,null,Laya.Handler.create(this,this.removeSelf))},t.prototype.removeSelf=function(){var e=this;Laya.timer.once(800,this,function(){e.owner.removeSelf()})},t.prototype.onDisable=function(){Laya.Pool.recover("toast",this.owner)},t.noBindScript=function(e,t,a){var s=Laya.loader.getRes("prefab/toastSprite.json"),i=Laya.Pool.getItemByCreateFun("toast",s.create,s);i.zOrder=3005;var n=i.getChildByName("showText");n.text=e,a?i.pos(Laya.stage.width/2-n.width/2,a.y):i.pos(Laya.stage.width/2-n.width/2,Laya.stage.height/2+250-250),t?t.addChild(i):Laya.stage.addChild(i)},t}(Laya.Script);a["default"]=s},{}],62:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=s["default"].FixedDataTables,l=e("../Tools/Tool"),r=e("../manage/Playing_var"),h=function(){function e(){this.nowInWave=0,this.nowInWaveIndex=0,this._killEnemyS=0,this.waveJson={0:[],1:[]},"endless"===r["default"].getInstance().gameModel?this.nowLevel=1:(this.gameVar=Laya.Browser.window.game,this.nowLevel=this.gameVar.nowLevel),this._goldInLevel=0,this.initWaveData()}return e.prototype.initWaveData=function(){if("endless"===r["default"].getInstance().gameModel){o.getInstance().getData(i["default"].DataType.endless);this.waveMonsterInLevel=o.getInstance().getDataByKey(i["default"].DataType.endless,this.nowLevel,"troop").split(";")}else this.waveMonsterInLevel=o.getInstance().getDataByKey(i["default"].DataType.battle,this.nowLevel,"troop").split(";");this.getEnemyTotalNum()},e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.deleteInstance=function(){delete this.instance},e.prototype.getNextMonsterData=function(){return 1===this.nowInWave&&this.nowInWaveIndex>=this.waveJson[this.nowInWave].length?"endless"===r["default"].getInstance().gameModel?(this.endlessSetNextData(),this.getNextMonsterData()):!1:0===this.nowInWave?this.nowInWaveIndex>=this.waveJson[this.nowInWave].length?(this.nowInWaveIndex=0,this.nowInWave++,n["default"].instance.setLastByCreateTime(this.nowInWave),this.getNextMonsterData()):(this.nowInWaveIndex===this.waveJson[this.nowInWave].length-1&&n["default"].instance.setLastTimeCreateAWave(Date.now()),this.waveJson[this.nowInWave][this.nowInWaveIndex++]):this.waveJson[this.nowInWave][this.nowInWaveIndex++]},e.prototype.endlessSetNextData=function(){this.nowInWave=0,this.nowInWaveIndex=0,this.nowLevel++,this.waveJson[0].length=0,this.waveJson[1].length=0,this.initWaveData(),n["default"].instance.preLoadResInPlaying(!0)},e.prototype.judgeFinishNowWave=function(){return this.waveJson[this.nowInWave]&&this.nowInWaveIndex>=this.waveJson[this.nowInWave].length?!0:!1},e.prototype.judgeNextIsBoss=function(){if(this.waveJson[this.nowInWave+1]&&this.waveJson[this.nowInWave+1][0]){var e=this.waveJson[this.nowInWave+1][0],t=o.getInstance().getDataByKey(i["default"].DataType.monster,e,"type");return 2===t?!0:!1}return!0},e.prototype.getEnemyTotalNum=function(){var e=this.waveMonsterInLevel,t=0,a=0;for(a=0;a<e.length;a++){var s=e[a].split("#"),i=0;for(i;i<s.length;i++){var n=s[i].split("|");t+=Number(n[1]);var o=JSON.parse(n[0]),r=l.tools.fillArray(o,Number(n[1]));this.waveJson[a]=this.waveJson[a].concat(r)}}this.totalNums=t},e.prototype.getTempletDateInLevel=function(e){var t,a={};t=e?o.getInstance().getDataByKey(i["default"].DataType.endless,this.nowLevel+1,"troop").split(";"):this.waveMonsterInLevel;var s=0;for(s;s<t.length;s++){var n=t[s].split("#"),l=0;for(l;l<n.length;l++){var r=n[l].split("|");a[r[0]]=!0}}return a},e.prototype.calKillOneGold=function(e,t){var a=o.getInstance().getDataByKey(i["default"].DataType.monster,e,"gold");a*=("number"==typeof t?t:1)||1,this._goldInLevel+=a},Object.defineProperty(e.prototype,"goldsInLevel",{get:function(){return this._goldsInLevel||(this.goldsInLevel=this._goldInLevel),this._goldsInLevel},set:function(e){this._goldsInLevel=e},enumerable:!0,configurable:!0}),e.prototype.getTotalNums=function(){return this.totalNums},Object.defineProperty(e.prototype,"killEnemyS",{get:function(){return this._killEnemyS},set:function(e){this._killEnemyS+=1},enumerable:!0,configurable:!0}),e}();a["default"]=h},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../Tools/Tool":40,"../manage/Playing_var":58,"../playing/PlayingSceneControl":67}],63:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../playing/PlayingSceneControl"),n=e("../manage/Music"),o=e("../Data/MusicEnum"),l=o["default"].musicToUrl,r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.proppertyObj=this.self.propertyObj,this.buffId=this.proppertyObj.buffId,this.self.visible=!0},t.prototype.onUpdate=function(){this.self.visible&&(this.setMove(),this.hitCollision(),this.collisionLeaveSceen())},t.prototype.collisionLeaveSceen=function(){this.self.y>Laya.stage.height+this.proppertyObj.mark_h/2&&this.self.removeSelf()},t.prototype.setMove=function(){this.self.y+=2},t.prototype.hitCollision=function(){var e=this.proppertyObj.mark_w,t=this.proppertyObj.mark_h,a={x:this.self.x-e/2,y:this.self.y-t/2,w:e,h:t},o=i["default"].instance.role_w,r=i["default"].instance.role_h,h=i["default"].instance.mainPlane,c=new Laya.Point(h.x-o/2,h.y-o/2);h.localToGlobal(c);var u={x:c.x,y:c.y,w:o,h:r},p=s["default"].rectangleCollisions(a,u);p&&(i["default"].instance.setBuff(this.proppertyObj),this.self.removeSelf(),n["default"].getInstance().playSound(l.get_item))},t.prototype.onDisable=function(){this.self.visible=!1,Laya.Pool.recover("buff",this.self)},t}(Laya.Script);a["default"]=r},{"../Data/MusicEnum":28,"../Tools/Tool":40,"../manage/Music":56,"../playing/PlayingSceneControl":67}],64:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./PlayingSceneControl"),i=e("../Data/JsonEnum"),n=e("../Tools/Tool"),o=e("../manage/Playing_var"),l=e("../role/role"),r=function(e){function t(){var t=e.call(this)||this;return t.delta=0,t.radius=0,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;if(this.self=this.owner,this.propertyObj=this.self.vars_.propertyObj,this.bossType=this.propertyObj.fromNick,this.delta=0,this.radius=0,this.timeBaoZi_boss1=Date.now(),this.baoZiStatus="shot",this.self.visible=!0,this.bossType===i["default"].enemyToPerfab.boss2&&this.propertyObj.bossBulletType===i["default"].bossBulletType.ion||this.bossType===i["default"].enemyToPerfab.boss4){var t={x:s["default"].instance.roleObj.x+60,y:s["default"].instance.roleObj.y+55};this.movePointVector=new Laya.Point(this.self.x-t.x,this.self.y-t.y),this.movePointVector.normalize()}else this.bossType===i["default"].enemyToPerfab.boss3?Laya.timer.once(4e3,this,function(){e.self.visible&&e.self.removeSelf()&&(e.self.visible=!1)},null):this.bossType===i["default"].enemyToPerfab.boss5&&(this.propertyObj.bossBulletType!==i["default"].bossBulletType.common2||this.propertyObj.isBomb||(this.startTimeB2_boss5=Date.now()),this.propertyObj.bossBulletType===i["default"].bossBulletType.common&&(this.lastChangeType="create",
this.lasChangeTime_boss5=0,this.propertyObj.circleDotObj?this.notCanCreateNext_boss5=!0:(this.self.alpha=0,this.notCanCreateNext_boss5=!1)))},t.prototype.onUpdate=function(){s["default"].instance.isGamePause||this.self.visible&&(this.hitDetect(),this.bossType===i["default"].enemyToPerfab.boss4?((this.self.x<0||this.self.y>Laya.stage.height||this.self.x>Laya.stage.width+2*this.propertyObj.hitRadius.w||this.self.y<2*-this.propertyObj.hitRadius.h)&&(this.self.visible=!1,this.self.removeSelf()),this.self.visible&&this.self.y<100&&(this.self.visible=!1,this.self.removeSelf())):this.bossType===i["default"].enemyToPerfab.boss2?this.propertyObj.bossBulletType===i["default"].bossBulletType.skill?((this.self.x<=0||this.self.x>=Laya.stage.width-178)&&(this.propertyObj.directType=180-this.propertyObj.directType),this.self.y>Laya.stage.height&&(this.self.visible=!1,this.self.removeSelf())):(this.self.x<0||this.self.y>Laya.stage.height||this.self.x>Laya.stage.width+2*this.propertyObj.hitRadius.w||this.self.y<2*-this.propertyObj.hitRadius.h)&&(this.self.visible=!1,this.self.removeSelf()):this.bossType===i["default"].enemyToPerfab.boss1||this.bossType===i["default"].enemyToPerfab.boss3||this.bossType===i["default"].enemyToPerfab.boss4?(this.self.x<-100||this.self.x>Laya.stage.width||this.self.y>Laya.stage.height||this.self.y<-100)&&(this.self.visible=!1,this.self.removeSelf()):this.bossType===i["default"].enemyToPerfab.boss5?this.propertyObj.isBomb?(this.self.x<-100||this.self.x>Laya.stage.width||this.self.y>Laya.stage.height||this.self.y<-100)&&(this.self.visible=!1,this.self.removeSelf()):this.propertyObj.bossBulletType===i["default"].bossBulletType.common||this.self.y>Laya.stage.height+50&&(this.self.visible=!1,this.self.removeSelf()):(this.self.x<-100||this.self.x>Laya.stage.width||this.self.y>Laya.stage.height||this.self.y<-100)&&(this.self.visible=!1,this.self.removeSelf()))},t.prototype.moveBoss1=function(){if(this.bossType===i["default"].enemyToPerfab.boss1){var e=this.propertyObj.directType,t=this.propertyObj.defaultSpeedY;if(this.propertyObj.bossBulletType===i["default"].bossBulletType.common)var a=n["default"].speedLabelByAngle(e,t,.5);else if(this.propertyObj.bossBulletType===i["default"].bossBulletType.display)var a=n["default"].speedLabelByAngle(e,t,.5);else if(this.propertyObj.bossBulletType===i["default"].bossBulletType.skill2)var a=n["default"].speedLabelByAngle(e,t,.7);else var a=n["default"].speedLabelByAngle(e,t,.3);this.self.x+=a.x,this.self.y+=a.y}},t.prototype.calRealDelta=function(e){return e>360?360-(e-360*Math.floor(e/360)):360-e},t.prototype.moveBoss2=function(){if(this.bossType==i["default"].enemyToPerfab.boss2)if(this.propertyObj.bossBulletType===i["default"].bossBulletType.common){var e=12*this.propertyObj.directType;if(e%90===0)switch(e){case 0:case 360:this.self.x+=.5*this.propertyObj.defaultSpeedY;break;case 90:this.self.y+=.5*this.propertyObj.defaultSpeedY;break;case 180:this.self.x-=.5*this.propertyObj.defaultSpeedY;break;case 270:this.self.y-=.5*this.propertyObj.defaultSpeedY;break;default:console.error("are you kidding me?")}else{var t=n["default"].speedXYByAngle(e,this.propertyObj.defaultSpeedY);e>0&&180>e?this.self.y+=.5*Math.abs(t.y):e>180&&360>e&&(this.self.y-=.5*Math.abs(t.y)),e>90&&270>e?this.self.x-=.5*Math.abs(t.x):this.self.x+=.5*Math.abs(t.x)}}else if(this.propertyObj.bossBulletType===i["default"].bossBulletType.ion)this.self.y>=Laya.stage.height/3?(this.self.x-=this.propertyObj.defaultSpeedY*this.movePointVector.x*.5*.5,this.self.y-=this.propertyObj.defaultSpeedY*this.movePointVector.y*.5*.5):(this.self.x-=this.propertyObj.defaultSpeedY*this.movePointVector.x*.5,this.self.y-=this.propertyObj.defaultSpeedY*this.movePointVector.y*.5);else{if(90!==this.propertyObj.directType){var a=n["default"].speedByAngle(this.propertyObj.directType,{y:this.propertyObj.defaultSpeedY}).x;this.self.x+=.3*a}this.self.y+=.3*this.propertyObj.defaultSpeedY}},t.prototype.moveBoss3=function(){if(this.bossType===i["default"].enemyToPerfab.boss3){var e=this.propertyObj.directType,t=this.propertyObj.defaultSpeedY,a=n["default"].speedLabelByAngle(e,t,.3);this.self.x+=a.x,this.self.y+=a.y}},t.prototype.moveBoss4=function(){if(this.bossType==i["default"].enemyToPerfab.boss4)if(this.propertyObj.bossBulletType===i["default"].bossBulletType.common)this.self.y+=.6*this.propertyObj.defaultSpeedY;else if(this.propertyObj.bossBulletType===i["default"].bossBulletType.common2){var e=this.propertyObj.defaultSpeedY,t=this.propertyObj.directType;this.self.rotation=t-90;var a=n["default"].speedLabelByAngle(t,e,.5);this.self.x+=a.x,this.self.y+=a.y}else if(this.propertyObj.bossBulletType===i["default"].bossBulletType.skill2){var s=this.propertyObj.directType,e=this.propertyObj.defaultSpeedY,a=n["default"].speedLabelByAngle(s,e,.3);this.self.x+=a.x,this.self.y+=a.y}else{var o=this.propertyObj.directType;this.self.x-=o.x,this.self.y-=o.y}},t.prototype.moveBoss5=function(){if(this.bossType==i["default"].enemyToPerfab.boss5)switch(this.propertyObj.bossBulletType){case i["default"].bossBulletType.common:var e=this.propertyObj.directType,t=60,a=this.propertyObj.circleDotObj||{x:Laya.stage.width/6,y:388};if(1===this.propertyObj.nowStep){var s=n["default"].speedLabelByAngle(e,this.propertyObj.defaultSpeedY,.1);this.self.y+=s.y,this.self.x+=s.x,(Math.abs(this.self.x-a.x)>=t||Math.abs(this.self.y-a.y)>=t)&&(this.propertyObj.canCreateChild=!0,this.propertyObj.ridus=Math.abs(this.self.y-a.y)||Math.abs(this.self.x-a.x),this.propertyObj.nowStep=2)}else if(2===this.propertyObj.nowStep){--e&&0>e&&(e+=360),this.propertyObj.directType=e;var o=n["default"].getRoundPos(this.propertyObj.directType,this.propertyObj.ridus,a);if(this.self.x=o.x,this.self.y=o.y,this.propertyObj.canCreateChild&&this.propertyObj.createIndex<6&&++this.lasChangeTime_boss5%10===0){this.lasChangeTime_boss5=0,this.propertyObj.canCreateChild=!1,this.propertyObj.createIndex++;var l=this.propertyObj.createOneBullet1_boss5,r=this.propertyObj.directType+20;r>360&&(r-=360);var h=n["default"].getRoundPos(r,this.propertyObj.ridus,a);l&&l.call(this.propertyObj.functionThis,h,a,r,this.propertyObj.createIndex,this.self.parent)}}break;var l,r;case i["default"].bossBulletType.common2:if((1!=this.self.scaleX||1!=this.self.scaleY)&&console.error("得到放大倍数X:",this.self.scaleX,"得到放大倍数Y:",this.self.scaleY),this.propertyObj.isBomb){var c=this.propertyObj.directType,s=n["default"].speedLabelByAngle(c,this.propertyObj.defaultSpeedY,.3);this.self.x+=s.x,this.self.y+=s.y}else if(this.self.y+=.3*this.propertyObj.defaultSpeedY,Date.now()-this.startTimeB2_boss5>=1500){var l=this.propertyObj.createSpreadB_boss5;l&&l.call(this.propertyObj.functionThis,this.self.x,this.self.y),this.self.removeSelf()}break;case i["default"].bossBulletType.skill:this.self.y+=.8*this.propertyObj.defaultSpeedY,console.log("技能1的y坐标-----",this.self.y,"技能1的x坐标-----",this.self.x);break;case i["default"].bossBulletType.skill2:var u=this.propertyObj.directType;this.self.x+=u.x,this.self.y+=u.y,u.y+=.5,console.log("技能2的y坐标-----",this.self.y)}},t.prototype.hitDetect=function(){if("playing"===o["default"].getInstance().gameStatus){var e=s["default"].instance.roleObj.x+60,t=s["default"].instance.roleObj.y+55;this.self.visible&&Math.abs(e-this.self.x-this.propertyObj.hitRadius.w)<this.propertyObj.hitRadius.w+60&&Math.abs(t-this.self.y-this.propertyObj.hitRadius.h)<this.propertyObj.hitRadius.h+55?(this.bossType===i["default"].enemyToPerfab.boss3&&this.propertyObj.bossBulletType===i["default"].bossBulletType.skill?this.propertyObj.setBossFollowVar&&this.propertyObj.setBossFollowVar.call(this.propertyObj.functionThis):l["default"].instance.noHurt||l["default"].instance.setRoleHp(this.propertyObj.hurtValue,"子弹"),this.self.visible=!1,this.self.removeSelf()):this.self.visible&&(this.moveBoss1(),this.moveBoss2(),this.moveBoss3(),this.moveBoss4(),this.moveBoss5(),this.propertyObj.isWFboss&&this.bossSet(),(this.bossType===i["default"].enemyToPerfab.boss3||this.bossType===i["default"].enemyToPerfab.boss4)&&this.hitDetect_mainBullet())}},t.prototype.bossSet=function(){var e=this.owner.vars_.propertyObj.fromNick;switch(e){case"nanguawangzi":this.owner.nanGuaWangZi_bullet.nanGuaWangZi_Move();break;case"maoWangHou":this.owner.maoWangHou_bullet.maoWangHou_Move();break;case"dashuren":this.owner.daShuRen_bullet.daShuRen_Move();break;case"shitoujuren":this.owner.shitoujuren_bullet.shiTouJuRen_Move();break;case"bingqilinzuhe":this.owner.bingqilinzuhe_bullet.bingQiLinZuHe_Move();break;case"bingtouxiang":this.owner.bingtouxiang_bullet.bingTouXiang_Move();break;case"jibaobao":this.owner.jibaobao_bullet.jibaobao_Move();break;case"zhangyunvhuang":this.owner.zhangyunvhuang_bullet.zhangyunvhuang_Move();break;case"MediumEnemy_Move":this.owner.MediumEnemy_bullet.bullet_Move()}},t.prototype.hitDetect_mainBullet=function(){var e=(s["default"].instance.bulletParent,s["default"].instance.bulletParent._children),t=0;for(t;t<e.length;t++){var a=e[t],i=a.x+14.5,n=a.y+50;if(a.visible&&Math.abs(i-this.self.x-this.propertyObj.hitRadius.w)<this.propertyObj.hitRadius.w+14.5&&Math.abs(n-this.self.y-this.propertyObj.hitRadius.h)<this.propertyObj.hitRadius.h+50){this.self.removeSelf(),a.removeSelf();break}}},t.prototype.onDisable=function(){if(Laya.timer.clearAll(this),this.self.visible=!1,this.markDirect=null,this.self.scale(1,1),this.bossType===i["default"].enemyToPerfab.boss2&&this.propertyObj.bossBulletType!==i["default"].bossBulletType.common){var e=this.propertyObj.bossBulletType===i["default"].bossBulletType.skill?"xuanfeng":"boss2_pao";Laya.Pool.recover(e,this.self.removeChildAt(this.self.numChildren-1))}if(this.bossType===i["default"].enemyToPerfab.boss1&&(this.propertyObj.bossBulletType===i["default"].bossBulletType.skill?Laya.Pool.recover("zd",this.self.removeChildAt(this.self.numChildren-1)):this.propertyObj.bossBulletType===i["default"].bossBulletType.common2&&Laya.Pool.recover("boss2_pao",this.self.removeChildAt(this.self.numChildren-1)),this.backSelfImagAndRotation()),this.bossType===i["default"].enemyToPerfab.boss4&&(this.propertyObj.bossBulletType===i["default"].bossBulletType.skill&&Laya.Pool.recover("bingzhui",this.self.removeChildByName("sk")),this.backSelfImagAndRotation()),this.bossType===i["default"].enemyToPerfab.boss5)if(this.propertyObj.bossBulletType===i["default"].bossBulletType.skill||this.propertyObj.bossBulletType===i["default"].bossBulletType.skill2)Laya.Pool.recover("boss5texiao",this.self.removeChildAt(this.self.numChildren-1)),this.backSelfImagAndRotation();else{this.self.alpha=1,this.notCanCreateNext_boss5=null;var t=this.self.vars_.propertyObj.circleDotObj;t&&(this.self.vars_.propertyObj.circleDotObj=null);var a=this.self.vars_.propertyObj.createOneBullet1_boss5;a&&(this.self.vars_.propertyObj.createOneBullet1_boss5=null);var s=this.self.vars_.propertyObj.functionThis;s&&(this.self.vars_.propertyObj.functionThis=null);var n=this.self.vars_.propertyObj.isBomb;n&&(this.self.vars_.propertyObj.isBomb=null);var o=this.self.vars_.propertyObj.canCreateChild;o&&(this.self.vars_.propertyObj.canCreateChild=null);var l=this.self.vars_.propertyObj.createIndex;l&&(this.self.vars_.propertyObj.createIndex=null)}this.bossType===i["default"].enemyToPerfab.boss3&&this.backSelfImagAndRotation(),Laya.Pool.recover(this.propertyObj.nick,this.self)},t.prototype.backSelfImagAndRotation=function(){this.self.rotation=0;var e=this.self.getChildByName("img");e.skin="face/BOSS子弹_01.png",e.visible=!0},t}(Laya.Script);a["default"]=r},{"../Data/JsonEnum":27,"../Tools/Tool":40,"../manage/Playing_var":58,"../role/role":81,"./PlayingSceneControl":67}],65:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/MainWeaponData"),i=e("../Data/JsonEnum"),n=e("../playing/PlayingSceneControl"),o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.plane=n["default"].instance.mainPlane,this.propertyObj=this.self.property,this.bulletSpeed=this.propertyObj.bulletSpeed,this.self.scaleX=1,this.self.scaleY=1,this.tail=this.self.getChildByName("tail"),this.tail.visible=!1,this.propertyObj.BuffType&&4===this.propertyObj.BuffType?(this.canMove=!1,this.calBulletShotSpeed(),Laya.timer.once(400,this,this.bulletShotType4)):this.propertyObj.BuffType&&3===this.propertyObj.BuffType?2===this.propertyObj.fireBuffType?(this.canMove=!1,this.self.scaleX=.4,this.self.scaleY=.4,this.tail.visible=!0,this.tail.x=this.self.getChildByName("img_pic").x+1-7,this.tail.scaleY=0,this.bulletShotFire()):this.propertyObj.fireBuffType?this.canMove=!0:(this.self.rotation=this.propertyObj.angle-90+180,this.canMove=!0):(this.self.rotation=this.propertyObj.angle-90+180,this.canMove=!0)},t.prototype.calBulletShotSpeed=function(){var e=new Laya.Point(this.plane.x,this.plane.y);n["default"].instance.roleObj.localToGlobal(e);var t=new Laya.Point(this.self.x-e.x,this.self.y-e.y),a=s["default"].getInstance().bulletSpeed;t.normalize(),this.bulletSpeed.x=a*t.x,this.bulletSpeed.y=a*t.y},t.prototype.bulletShotFire=function(){this.isLeft=this.propertyObj.angle<0,this.self.rotation=this.propertyObj.angle,30===this.propertyObj.angle||-30===this.propertyObj.angle?this.isMissionIn=!0:this.isMissionIn=!1,Laya.Browser.window.daodan||(Laya.Browser.window.daodan=[]),Laya.Browser.window.daodan.push(this.self)},t.prototype.bulletShotType4=function(){var e=this;Laya.timer.clear(this,this.bulletShotType4),this.canMove=!0,Laya.timer.once(3100,this,function(){e.self.removeSelf()})},t.prototype.onTriggerEnter=function(e,t){this.nextFrameCheckTrigger=!0;var a=e.owner,s=a.vars_&&a.vars_.propertyObj;a.visible&&a.parent&&(s&&s.prefabType&&s.prefabType===i["default"].prefabType.boss&&this.self&&this.self.vars_&&this.self.vars_.propertyObj&&this.self.vars_.propertyObj.prefabType===i["default"].prefabType.bullletBoss||this.self.vars_&&this.self.vars_.disAbleRemove||(this.self.vars_.type&&4===this.self.vars_.type,this.owner.removeSelf()))},t.prototype.onUpdate=function(){if(!n["default"].instance.isGamePause&&this.self.visible){if(this.canMove||4!==this.propertyObj.BuffType||(this.self.x=this.propertyObj.markX+n["default"].instance.roleObj.x,this.self.y=this.propertyObj.markY+n["default"].instance.roleObj.y),this.canMove){if(4!==this.propertyObj.BuffType&&(this.self.x+this.propertyObj.w<0||this.self.x>Laya.stage.width||this.self.y+this.self.height/2<0))return void this.self.removeSelf();this.setBulletMove()}if(!this.canMove&&3===this.propertyObj.BuffType&&2===this.propertyObj.fireBuffType){var e=this.self.scaleX+.1>1?1:this.self.scaleX+.1;this.self.scaleX=e;var t=this.tail.scaleY+.15>1?1:this.tail.scaleY+.15;this.tail.scaleY=t,this.isLeft?(this.isMissionIn?this.self.x-=10:this.self.x-=7,this.self.y-=6,this.self.rotation+=4,this.self.rotation>=0&&(this.canMove=!0,this.self.rotation=0,this.self.scaleX=1,this.self.scaleY=1,this.tail.scaleY=1)):(this.isMissionIn?this.self.x+=10:this.self.x+=7,this.self.y-=6,this.self.rotation-=4,this.self.rotation<=0&&(this.canMove=!0,this.self.rotation=0,this.self.scaleX=1,this.self.scaleY=1,this.tail.scaleY=1))}}},t.prototype.setBulletMove=function(){this.canMove&&(this.self.x+=n["default"].instance.bSpeedRateByBuff2*this.bulletSpeed.x,this.self.y+=n["default"].instance.bSpeedRateByBuff2*this.bulletSpeed.y)},t.prototype.onDisable=function(){this.self.visible=!1,this.propertyObj=null,Laya.Pool.recover(this.owner.name,this.owner)},t}(Laya.Script);a["default"]=o},{"../Data/JsonEnum":27,"../manage/MainWeaponData":55,"../playing/PlayingSceneControl":67}],66:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Tools/Tool"),i=e("../manage/Playing_var"),n=e("../playing/PlayingSceneControl"),o=e("../manage/toast"),l=e("../Data/JsonEnum"),r=e("../playing/BattleParse"),h=e("../role/Bullet_second"),c=e("../manage/Music"),u=e("../Data/MusicEnum"),p=u["default"].musicToUrl,f=l["default"].secondSkill,d=l["default"].dropHpStatus,y=s["default"].random,_=s["default"].rectangleCollisions,m=e("../manage/SecondWeaponData"),g=e("../role/role"),b=Laya.Point,v=Laya.Tween,k=e("../Bullet/BulletInterface"),S=k.Bullet.BulletType,B=e("../manage/OpenWx"),w=e("../manage/SkeletonTempletManage"),O=e("../role/BaoZha"),C=e("../manage/EndlessManage"),L=e("../manage/EndlessParseSkill"),T=function(e){function t(){var t=e.call(this)||this;return t._speedX=6,t.attackedStopInterval=50,t.wuDiInterval=750,t.snakeIndex=0,t.snakeLikeVar=[],t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;this.markHpArr=0,this.self=this.owner,this.self.markScript=this,this.propertyObj=this.self.vars_.propertyObj,this.wuDiStartTime=Date.now(),this.propertyObj.setHpBarShowStatus(!1),this.defaultSpeedY=this.propertyObj.defaultSpeedY,this.markSk=this.propertyObj.enmeySprite.getChildByName("EnemySK"),this.markSk&&this.markSk.playbackRate(1),this.childLabel=this.self.getChildAt(0),this.childLabel.text=this.propertyObj.hp.toString(),2!==this.propertyObj.e_type?0===s["default"].random(0,1)?this._steering="left":this._steering="right":Laya.timer.frameOnce(2,this,function(){e.propertyObj.playAction(l["default"].bossDragonAction.stand)}),this.self.pos(y(0,Laya.stage.width-this.propertyObj.mark_w-5),y(-30-this.propertyObj.mark_h,-5-this.propertyObj.mark_h)),this.stopped=!1,this.secondAttacked=!1,this.self.visible=!0,this.secondType=Number(m["default"].getInstance().buffType[0]),this.effectObj=null,this.gameMode=i["default"].getInstance().gameModel,this.palsyStatus=null,this.slowDownStatus=null,this.isRollBack_endless=null,this.isTriggerDropHp=null,this.isImmunityTui_endless=null,this.isRollBack_endless=null},t.prototype.onUpdate=function(){n["default"].instance.isGamePause||this.self.visible&&this.propertyObj.dropHpStatus!==d.second8&&(this.setMove(),this.setColliteWall(),this.checkCollisionRole(),this.self.visible&&(this.propertyObj.dropHpStatus===d.born?this.judgeWudiStatus():this.checkCollisionBullet(),this.setKeepDropHp(),this.keepDropHp_endless(),this.palsy_endless(),this.slowDown_endless()))},t.prototype.judgeWudiStatus=function(){Date.now()-this.wuDiStartTime>=this.wuDiInterval&&(this.propertyObj.dropHpStatus=d.ordinary,this.propertyObj.setHpBarShowStatus(!0))},t.prototype.setColliteWall=function(){2===this.propertyObj.e_type||this.propertyObj.way||(this.self.x>=Laya.stage.width-this.propertyObj.mark_w?this._steering="left":this.self.x<0&&(this._steering="right")),this.self.y>=Laya.stage.height+this.propertyObj.mark_h+10&&("endless"===this.gameMode?this.self.removeSelf():(this.self.pos(y(0,Laya.stage.width-this.propertyObj.mark_w-5),y(-30-this.propertyObj.mark_h,-5-this.propertyObj.mark_h)),this.initSpecialMove()))},t.prototype.checkCollisionRole=function(){if(this.self.visible){var e=n["default"].instance.role_w,t=n["default"].instance.role_h,a={x:this.self.x,y:this.self.y,w:this.propertyObj.mark_w,h:this.propertyObj.mark_h},s=n["default"].instance.mainPlane,i=new b(s.x-e/2,s.y-e/2);s.localToGlobal(i);var o={x:i.x,y:i.y,w:e,h:t},l=_(a,o);l&&(this.setDeadEffect(),g["default"].instance.setRoleHp(this.propertyObj.hurtValue,"敌人"),C["default"].getInstance().getScore(this.propertyObj.e_type,this.propertyObj.enemyLevel),this.self.removeSelf())}},t.prototype.checkCollisionBullet=function(){if(this.self.visible&&this.propertyObj.dropHpStatus!==d.second8){var e={x:this.self.x,y:this.self.y,w:this.propertyObj.mark_w,h:this.propertyObj.mark_h},t=n["default"].instance.bulletParent._children,a=0;for(a;a<t.length;a++){var s=t[a];if(s.visible){var i=s.property;if(i.canHitCollision){var o={x:s.x,y:s.y,w:i.w,h:i.h},l=_(e,o);if(l){if(8===i.secondType)return this.propertyObj.dropHpStatus=d.second8,void this.setDropInEddy(s);a--;var r=i.hurtValue,h=this.changeHurtBySkillInEndless(r);this.setEnemyHp(h,i.buffValue,s),this.initDropHp_endless(),this.intiPalsy_endless(),s.removeSelf(),this.initRollBack_endless(),this.bombFire_endless(r),this.initSlowDown_endless()}}}}}},t.prototype.setEnemyHp=function(e,t,a){this.self.visible&&(this.propertyObj.hp-e<=0?(this.setDeadEffect(),n["default"].instance.setScreenShake(),this.setGetBuff(t),C["default"].getInstance().getScore(this.propertyObj.e_type,this.propertyObj.enemyLevel),this.self.removeSelf(),this.vampire_endless()):(this.propertyObj.hp=this.propertyObj.hp-e,this.propertyObj.changeHpProgress(),a&&this.setHurtEffect(),a&&this.setAttackedStatus(a)),a&&this.initSecondSeven(a))},t.prototype.keepDropHp_endless=function(){"endless"===i["default"].getInstance().gameModel&&this.isTriggerDropHp&&(Date.now()-this.dropHpStartTime>=this.dropHpKeepTime?this.isTriggerDropHp=!1:Date.now()-this.lastDropHpTime>=this.dropHpInterval&&(this.lastDropHpTime=Date.now(),this.keepDropHpPlayEffect(),this.setEnemyHp(this.dropHpValue,null,null)))},t.prototype.keepDropHpPlayEffect=function(){var e=L["default"].getInstance().getEffectNameById(9);this.self.getChildByName(e).play("hit",!1),this.self.getChildByName(e).visible=!0},t.prototype.initDropHp_endless=function(){if(this.self.visible){var e=L["default"].getInstance();if("endless"===i["default"].getInstance().gameModel&&e.isUpgraded(9)&&!this.isTriggerDropHp){this.isTriggerDropHp=!0,this.dropHpStartTime=Date.now(),this.lastDropHpTime=Date.now();var t=2===this.propertyObj.e_type?"boss":"smallEnemy",a=e.getSkillNum(9,t);this.dropHpKeepTime=1e3*a[0],this.dropHpInterval=1e3*a[1],this.dropHpValue=.01*this.propertyObj.startHp*a[2];var s=L["default"].getInstance().getEffectNameById(9);if(this.self.getChildByName(s)){var n=this.self.getChildByName(s);n.play("bz",!1),n.visible=!0}else L["default"].getInstance().setSkillEffect(9,this.self)}}},t.prototype.palsy_endless=function(){this.self.visible&&"endless"===this.gameMode&&("麻痹中"===this.palsyStatus?Date.now()-this.palsyStartTime>=this.palsyKeepTime&&(this.palsyStatus="免疫中",this.palsyImmunityStartTime=Date.now(),L["default"].getInstance().cancalSkillEffect(10,this.self)):"免疫中"===this.palsyStatus&&Date.now()-this.palsyImmunityStartTime>=this.palsyImmunityKeepTime&&(this.palsyStatus="无状态"))},t.prototype.intiPalsy_endless=function(){if(this.self.visible){var e=L["default"].getInstance();if("endless"===this.gameMode&&e.isUpgraded(10)&&("无状态"===this.palsyStatus||!this.palsyStatus)){this.palsyStatus="麻痹中",this.palsyStartTime=Date.now();var t=2===this.propertyObj.e_type?"boss":"smallEnemy";this.palsyKeepTime=1e3*e.getSkillNum(10,t),this.palsyImmunityKeepTime=1e3*e.getImmunityData(10,t),L["default"].getInstance().setSkillEffect(10,this.self)}}},t.prototype.slowDown_endless=function(){"endless"===this.gameMode&&("冰缓中"===this.slowDownStatus?Date.now()-this.slowDownStartTime>=this.slowDownKeepTime&&(this.sdImmunityKeepTime?(this.slowDownStatus="免疫中",this.sdImmunityStartTime=Date.now()):this.slowDownStatus=null,L["default"].getInstance().cancalSkillEffect(12,this.self)):"免疫中"===this.slowDownStatus&&Date.now()-this.sdImmunityStartTime>=this.sdImmunityKeepTime&&(this.slowDownStatus=null))},t.prototype.initSlowDown_endless=function(){if(this.self.visible){var e=L["default"].getInstance();if("endless"===this.gameMode&&e.isUpgraded(12)&&(!this.slowDownStatus||"无状态"===this.slowDownStatus)){this.slowDownStatus="冰缓中",this.slowDownStartTime=Date.now();var t=2===this.propertyObj.e_type?"boss":"smallEnemy",a=e.getSkillNum(12,t);this.sdPecentValue=.01*(100-a[0]),this.slowDownKeepTime=1e3*a[1],this.sdImmunityKeepTime=e.getImmunityData(12,t);var s=L["default"].getInstance().getEffectNameById(12),i=this.self.getChildByName(s);i?(i.play("bingshuan",!0),i.visible=!0):L["default"].getInstance().setSkillEffect(12,this.self),"boss"===t?this.self.getChildByName(s).scale(1.3,1.3):this.self.getChildByName(s).scale(1,1)}}},t.prototype.changeHurtBySkillInEndless=function(e){var t=L["default"].getInstance();if("endless"===this.gameMode){var a=0;if(t.isUpgraded(2)){var i=L["default"].getInstance().getSkillNum(2);a+=e*i*.01}if(t.isUpgraded(17)){var o=t.getSkillNum(17),l=n["default"].instance.roleHp,r=n["default"].instance.roleTotal;.3>l/r&&(a+=e*o[1]*.01,this.createEnhanceFireEffect())}if(t.isUpgraded(14)&&2!==this.propertyObj.e_type){var h=t.getSkillProbability(14),c=s.tools.random(1,100);if(h>=c){var u={x:this.self.x,y:this.self.y};L["default"].getInstance().setSkillEffect(14,null,u),a+=1e4}}return e+a}return e},t.prototype.createEnhanceFireEffect=function(){var e=(L["default"].getInstance().getEffectNameById(17),n["default"].instance.roleObj.getChildByName("skName"));e||L["default"].getInstance().setSkillEffect(17)},t.prototype.vampire_endless=function(){var e=L["default"].getInstance();if("endless"===this.gameMode&&e.isUpgraded(15)){var t=e.getSkillNum(15);g["default"].instance.setRoleHp(-t),L["default"].getInstance().setSkillEffect(15)}},t.prototype.initRollBack_endless=function(){var e=this;if(this.self.visible&&2!==this.propertyObj.e_type&&"endless"===this.gameMode){var t=L["default"].getInstance();!t.isUpgraded(13)||this.isRollBack_endless||this.isImmunityTui_endless||(this.rollBackDistance_endless=t.getSkillNum(13),this.immunityTuiInterval_endless=t.getImmunityData(13,"smallEnemy"),this.isRollBack_endless=!0,Laya.Tween.to(this.self,{x:this.self.x,y:this.self.y-this.rollBackDistance_endless},400,Laya.Ease.circOut,Laya.Handler.create(this,function(){e.isRollBack_endless=!1,e.immunityTuiStartTime_endless=Date.now(),e.isImmunityTui_endless=!0,Laya.timer.once(1e3*e.immunityTuiInterval_endless,e,function(){e.isImmunityTui_endless=!1})})))}},t.prototype.bombFire_endless=function(e){if(this.self.visible&&"endless"===this.gameMode){var t=L["default"].getInstance();if(t.isUpgraded(11)&&!this.isImmunityBomb_endless){this.bombImmunityStartTime_endless=Date.now();var a=2===this.propertyObj.e_type?"boss":"smallEnemy";this.bombImmunityInterval_endless=t.getImmunityData(11,a),this.bombImmunityInterval_endless&&(this.isImmunityBomb_endless=!0);var s=t.getSkillNum(11);this.bombValue_endless=.01*e*s[0],this.bombR_endless=s[1],this.startRangeBomb(),L["default"].getInstance().setSkillEffect(11,this.self)}}},t.prototype.startRangeBomb=function(){var e=this.bombValue_endless,t=this.bombR_endless,a=n["default"].instance.EnemySpite._children,s=new b(this.self.x,this.self.y),i=0;for(i;i<a.length;i++){var o=a[i],l=s.distance(o.x,o.y);if(10*t>l){if(!o.visible)continue;var r=o.markScript;r.setEnemyHp(e,null,null)}}},t.prototype.setDropInEddy=function(e){var t=this;Laya.Tween.to(this.self,{x:e.x,y:e.y,scaleX:.1,scaleY:.1},500,Laya.Ease.expoInOut,Laya.Handler.create(this,function(){t.setDeadEffect(),n["default"].instance.setScreenShake(),t.setGetBuff(null),t.self.removeSelf(),t.self.scale(1,1)}))},t.prototype.initSecondSeven=function(e){var t=e.property,a=t.bType,s=t.secondType;if(a===S.roleSecondBullet&&7===s){var i=m["default"].getInstance().buffType,o=m["default"].getInstance().getItemPowerLevel(),l=.01*t.hurtValue*(Number(i[1])+Number(i[2])*o),r=o*Number(i[4])+Number(i[3]),h=n["default"].instance.EnemySpite._children,c=new b(this.self.x,this.self.y),u=0;for(u;u<h.length;u++){var p=h[u],f=c.distance(p.x,p.y);if(10*r>f){if(!p.visible)continue;var d=p.markScript;d.setEnemyHp(l,null,null),this.setMissileEffect(p)}}}},t.prototype.setAttackedStatus=function(e){var t=e.property,a=t.bType,i=t.secondType;if(a===S.roleMainBullet)this.stopped=!0;else if(a===S.roleSecondBullet&&!this.secondAttacked){var n=s.tools.random(1,100);switch(i){case 1:if(t.affectBate||console.error("击退的概率有问题需要查看~"),t.affectBate<=n){var o=m["default"].getInstance().buffType,l=m["default"].getInstance().getItemPowerLevel();this.fightBackDistance=Number(o[1])+l*Number(o[2]),this.secondAttacked=!0,this.setBackDistance()}break;case 3:this.secondWeaponInterval=t.keepTimeValue,this.setIceSlowEffect(t),this.secondAttacked=!0;break;case 4:break;case 5:this.secondWeaponInterval=t.keepTimeValue,this.setFloatEffect(),this.secondAttacked=!0;break;case 6:t.affectBate||(console.error("电磁炮麻痹概率有问题,需要查看~"),t.affectBate=50),t.affectBate<=n&&(this.secondWeaponInterval=t.keepTimeValue,this.secondAttacked=!0,this.setParalysis());break;case 9:this.propertyObj.dropHpStatus=d.second9,this.secondWeaponInterval=t.keepTimeValue,this.secondAttacked=!0;break;case 10:t.affectBate||(console.error("蘑菇炮麻痹概率有问题,需要查看~"),t.affectBate=50),t.affectBate<=n&&(this.propertyObj.dropHpStatus=d.second10,this.secondWeaponInterval=t.keepTimeValue,this.secondAttacked=!0)}this.attackedTime=Date.now()}},t.prototype.judgeAttacked=function(){if(this.secondAttacked){var e=Number(m["default"].getInstance().buffType[0]),t=[1,7];t.indexOf(e)>-1||Date.now()-this.attackedTime>=1e3*this.secondWeaponInterval&&(this.secondAttacked=!1,this.cancelEffect())}this.stopped&&Date.now()-this.attackedTime>=this.attackedStopInterval&&(this.stopped=!1)},t.prototype.setDeadEffect=function(){c["default"].getInstance().playSound(p.bomb),this.createEffectInEneny(l["default"].baozhaAni.gwbaozha),this.propertyObj.clearTimes(),r["default"].getInstance().killEnemyS++,n["default"].instance.setProgressBar(),B["default"].getInstance().vibrateShort(),Laya.SoundManager.playSound("sound/destroy.wav")},t.prototype.setHurtEffect=function(){c["default"].getInstance().playSound(p.bullet_normal),this.createEffectInEneny(l["default"].baozhaAni.baozha)},t.prototype.setGetBuff=function(e){n["default"].instance.createBuff(this.propertyObj.buffProbabilit,this.self.x,this.self.y),this.addGoldMark(e)},t.prototype.setMove=function(){if(!(this.secondAttacked&&1===this.secondType||this.isRollBack_endless||this.propertyObj.way||"麻痹中"===this.palsyStatus)){this.judgeAttacked();var e=this.calNowSpeed();"endless"===this.gameMode&&this.slowDownStatus&&"冰缓中"===this.slowDownStatus&&(e.x=this.sdPecentValue*e.x,e.y=this.sdPecentValue*e.y),this.self.x+=e.x,this.self.y+=e.y}},t.prototype.setKeepDropHp=function(){if(this.self.visible&&this.secondAttacked)switch(this.propertyObj.dropHpStatus){case d.second10:case d.second9:var e=m["default"].getInstance().buffType,t=1e3*Number(e[3]);if(Date.now()-this.attackedTime>=t){this.attackedTime=Date.now();var a=void 0,s=Number(m["default"].getInstance().getFire());a=9===Number(e[0])?s*Number(e[4])*.01:this.propertyObj.startHp*Number(e[4])*.01,this.propertyObj.dropHpStatus===d.second9?this.setFlyKnife():this.setMushroomEffect(),this.setEnemyHp(a,null,null)}}},t.prototype.calNowSpeed=function(){var e=this._speedX,t=this.defaultSpeedY,a={x:this._speedX,y:this.defaultSpeedY},s={6:this.getParalysisSpeed,3:this.getIceSpeed,5:this.getFloatSpeed};return this.secondAttacked&&s[this.secondType]?s[this.secondType].call(this):(this.stopped?(a.y=.5*t,"left"===this._steering?a.x=.3*-e:a.x=.3*e):(a.y=t,"left"===this._steering?a.x=-e:a.x=e),n["default"].instance.fighting||"level"!==this.gameMode||(a.x=a.x*n["default"].instance.gameSlowBate,a.y=a.y*n["default"].instance.gameSlowBate),a)},t.prototype.getFloatSpeed=function(){var e=this._speedX,t=this.defaultSpeedY,a={x:this._speedX,y:this.defaultSpeedY};return a.y=this.stopped?-t*(.1+.05):.1*-t,this.self.y<=0&&(a.y=0),"left"===this._steering?a.x=-.1*e:a.x=.1*e,a},t.prototype.getIceSpeed=function(){var e=this._speedX,t=this.defaultSpeedY,a={x:this._speedX,y:this.defaultSpeedY};return a.y=this.stopped?.75*t:.5*t,"left"===this._steering?a.x=-.5*e:a.x=.5*e,a},t.prototype.getParalysisSpeed=function(){return{x:0,y:0}},t.prototype.initSpecialMove=function(){this.snakeIndex=0,this.snakeLikeVar=[],this.isTracking=null,this.trackTween&&v.clear(this.trackTween),this.isCrashing=null,this.crashTween0&&v.clear(this.crashTween0),this.crashTween1&&v.clear(this.crashTween1),this.crashTween2&&v.clear(this.crashTween2)},t.prototype.specialMove=function(){switch(this.propertyObj.way){case 1:this.snakeLikeMobile();break;case 2:this.wirelessTracking();break;case 3:this.isCrashing||this.fixedCrash()}},t.prototype.snakeLikeMobile=function(){this.initSnakeLikeMobile(this.snakeIndex);var e=4;n["default"].instance.fighting||(e*=n["default"].instance.gameSlowBate),this.self.y+=this.snakeLikePointObj.y*this.defaultSpeedY*e,this.snakeIndex%2===0?(this.snakeLikePointObj.x>0?this.self.x+=this.snakeLikePointObj.x*this.defaultSpeedY*e:this.self.x-=this.snakeLikePointObj.x*this.defaultSpeedY*e,
this.self.x>=Laya.stage.width-this.propertyObj.mark_w&&this.snakeIndex++):(this.snakeLikePointObj.x>0?this.self.x-=this.snakeLikePointObj.x*this.defaultSpeedY*e:this.self.x+=this.snakeLikePointObj.x*this.defaultSpeedY*e,this.self.x<=0&&this.snakeIndex++)},t.prototype.initSnakeLikeMobile=function(e){if(-1===this.snakeLikeVar.indexOf(e)){var t=Laya.stage.width,a=Laya.stage.height;this.snakeLikePointObj=new b((e%2===0?t:0)-this.self.x,a/4*(e+1)-this.self.y),this.snakeLikePointObj.normalize(),this.snakeLikeVar.push(e)}},t.prototype.wirelessTracking=function(){var e=n["default"].instance.roleObj,t=5;n["default"].instance.fighting||(t*=n["default"].instance.gameSlowBate);var a=new Laya.Point(e.x-this.self.x,e.y-this.self.y);a.normalize(),this.self.x+=a.x*t,this.self.y+=a.y*t},t.prototype.fixedCrash=function(){var e=this.owner;n["default"].instance.roleObj;this.crashTween0=v.to(e,{x:e.x,y:Laya.stage.height/4},2e3,Laya.Ease.elasticInOut,Laya.Handler.create(this,this.fixedCrash1))},t.prototype.fixedCrash1=function(){var e=n["default"].instance.roleObj;this.crashTween1=v.to(this.self,{x:e.x,y:e.y},500,Laya.Ease.sineIn,Laya.Handler.create(this,this.fixedCrash2),0)},t.prototype.fixedCrash2=function(){this.crashTween2=v.to(this.self,{x:this.self.x,y:Laya.stage.height},1e3,Laya.Ease.sineIn,null,0)},t.prototype.onTriggerEnter=function(e,t){var a=e.owner,s=a.vars_&&a.vars_.propertyObj;if(s&&s.prefabType===l["default"].prefabType.enemy){if(!this.self.visible)return;return void(s.way||("left"===this._steering?this._steering="right":this._steering="left"))}if(s&&2!==s.e_type&&!(s.prefabType===l["default"].prefabType.bulletSkill&&this.propertyObj.enmeySprite.y<-this.propertyObj.mark_h)){2!==this.propertyObj.e_type&&s.prefabType===l["default"].prefabType.bulletSkill&&a.y>=a.getComponent(Laya.BoxCollider).height&&this.secondBulletHandler(e,t),this.propertyObj.prefabType===l["default"].prefabType.boss&&this.propertyObj.playAction(l["default"].bossDragonAction.attacked),this.nextFrameCheckTrigger=!0;i["default"].getInstance().canColorKillEnemy;if(i["default"].getInstance().canColorKillEnemy)Laya.timer.frameOnce(1,this,function(){t.owner.getComponent(Laya.RigidBody).setVelocity({x:0,y:0})});else{if(s.prefabType===l["default"].prefabType.role)return c["default"].getInstance().playSound(p.bomb),this.createEffectInEneny(l["default"].baozhaAni.gwbaozha),this.propertyObj.clearTimes(),this.self.removeSelf(),r["default"].getInstance().killEnemyS++,n["default"].instance.setProgressBar(),void Laya.SoundManager.playSound("sound/destroy.wav");this.propertyObj.hp-s.hurtValue==this.markHpArr,this.propertyObj.hp-=.15*s.hurtValue/.15,this.markHpArr=this.propertyObj.hp,this.propertyObj.hp<=0?(c["default"].getInstance().playSound(p.bomb),this.createEffectInEneny(l["default"].baozhaAni.gwbaozha),this.propertyObj.clearTimes(),n["default"].instance.createBuff(this.propertyObj.buffProbabilit,this.self.x,this.self.y),this.createDropGoldIcon(),this.addGoldMark(a.vars_.buffValue),this.self.removeSelf(),r["default"].getInstance().killEnemyS++,n["default"].instance.setProgressBar(),Laya.SoundManager.playSound("sound/destroy.wav")):(this.createEffectInEneny(l["default"].baozhaAni.baozha),this.childLabel.text=this.propertyObj.hp.toString(),this.propertyObj.changeHpProgress())}}},t.prototype.addGoldMark=function(e){r["default"].getInstance().calKillOneGold(this.propertyObj.enemyId,e||null)},t.prototype.createEffectInEneny=function(e){if(e===l["default"].baozhaAni.gwbaozha)if(this.owner.vars_.propertyObj.e_type&&2===this.owner.vars_.propertyObj.e_type){var t=Laya.Pool.getItemByCreateFun("sign_boss_baozha",this.createBossBaoZha,this);t.aniName="baozha2",t.prefabName="boss_baozha"}else{var a=Laya.loader.getRes("prefab/xg_baozha.json"),t=Laya.Pool.getItemByCreateFun("xg_baozha",a.create,a);t.aniName="baozha1",t.prefabName="xg_baozha"}else{var a=Laya.loader.getRes("prefab/zidan.json"),t=Laya.Pool.getItemByCreateFun("zidan",a.create,a);t.aniName=e,t.prefabName="zidan"}var s=y(this.propertyObj.mark_w/4,3*this.propertyObj.mark_w/4-5),i=y(3*this.propertyObj.mark_h/4-30,this.propertyObj.mark_h-30),o=this.self.x+s,r=this.self.y+i;t.pos(o,r),n["default"].instance.effectParent.addChild(t)},t.prototype.createBossBaoZha=function(){var e=w["default"].getInstance().templets,t=e.boss_baozha,a=t.buildArmature(0);return a.addComponent(O["default"]),a},t.prototype.baoZhaGragonCreate=function(e){},t.prototype.onDisable=function(){this.self.visible=!1,L["default"].getInstance().cancalSkillEffect(9,this.self),L["default"].getInstance().cancalSkillEffect(10,this.self),L["default"].getInstance().cancalSkillEffect(12,this.self),this.isTriggerDropHp=null;var e=this.self.getChildByName("EnemySK")||this.self;e&&e.stop&&e.stop(),Laya.timer.clearAll(this),Laya.Tween.clearAll(this.self),this.self.vars_.skillType=null;var t=this.propertyObj.nick;if(this.cancelEffect(),this.self.getChildByName("Boss_hp")&&this.self.getChildByName("Boss_hp").destroy(!0),this.propertyObj&&this.propertyObj.e_type&&2===this.propertyObj.e_type){var a=n["default"].instance.roleObj.getChildByName("focusRole");a&&(a.removeSelf(),Laya.Pool.recover("focusRole",a)),Laya.Pool.recover(t,this.self),"endless"===this.gameMode&&C["default"].getInstance().isBossFighting&&n["default"].instance.roleHp>0&&C["default"].getInstance().endBossFighting()}else Laya.Pool.recover(t,this.self);this.propertyObj=null},t.prototype.createDropGoldIcon=function(){var e=Laya.loader.getRes("prefab/DropGold.json"),t=Laya.Pool.getItemByCreateFun("DropGold",e.create,e);t.pos(this.self.x+this.propertyObj.mark_w/2-t.width/2,this.self.y+this.propertyObj.mark_h/2-t.height/2,!0),n["default"].instance.dropGoldParent.addChild(t)},t.prototype.createEffect=function(){function e(){t.removeSelf(),Laya.Pool.recover("effect",t)}var t=new Laya.Animation;return t.loadAnimation("test/explode.ani"),t.on(Laya.Event.COMPLETE,null,e),t},t.prototype.setSpeedReverse=function(){},t.prototype.setIceSlowEffect=function(e){var t=Math.random(),a=e.affectBate/100;if(!(a>t||this.effectObj)){var s=l["default"].muzzlePrefabEnemy[m["default"].getInstance().buffType[0]],i=Laya.loader.getRes("prefab/"+s+".json"),n=Laya.Pool.getItemByCreateFun(s,i.create,i);this.effectObj=n,n.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h/2),this.self.addChild(n),this.markSk&&this.markSk.playbackRate(.01)}},t.prototype.setFloatEffect=function(){this.effectObj||(this.markSk&&this.markSk.playbackRate(.01),this.effectObj=w["default"].getInstance().createSkByTemplet("xuanfupao"),this.effectObj.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h/2),this.effectObj.scale(1,1),this.effectObj.play("pp",!0),this.self.addChild(this.effectObj))},t.prototype.cancelEffect=function(){"level"===this.gameMode&&(this.effectObj&&this.effectObj.removeSelf()&&(this.effectObj=null),this.markSk&&this.markSk.playbackRate(1),this.propertyObj.dropHpStatus=d.ordinary)},t.prototype.secondBulletHandler=function(e,t){this.self.vars_&&this.self.vars_.skillType&&(Laya.timer.clear(this,this.flottantCall),this.self.removeChildByName("paopao"));var a=e.owner.getComponent(h["default"]),s=l["default"].muzzlePrefabEnemy[m["default"].getInstance().buffType[0]],i=Laya.loader.getRes("prefab/"+s+".json"),n=Laya.Pool.getItemByCreateFun(s,i.create,i);switch(this.self.addChild(n),a.bulletType){case 3:n.name="paopao",n.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h/2),this.setIce(e,a);break;case 4:n.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h/2);break;case 5:n.name="paopao",n.pos(this.propertyObj.mark_w-this.propertyObj.mark_w/2,this.propertyObj.mark_h),this.setFlottant(e,a)}},t.prototype.setIce=function(e,t){Laya.timer.once(1e3*t.iceTS[0],this,this.iceCall,null,!0),this.self.vars_.skillType=f.ice,console.error("冰缓~~~")},t.prototype.iceCall=function(){this.self.vars_.skillType=null,this.self.removeChildByName("paopao"),Laya.timer.clear(this,this.iceCall)},t.prototype.setLaser=function(e){},t.prototype.setFlottant=function(e,t){this.self.vars_.skillType=f.flottant,Laya.timer.once(1e3*t.flottantT,this,this.flottantCall,null,!0),this.setSpeedReverse(),console.log("漂浮~~~")},t.prototype.flottantCall=function(){this.self.vars_.skillType=null,this.self.removeChildByName("paopao"),Laya.timer.clear(this,this.flottantCall)},t.prototype.createFlottantCircle=function(){var e=new Laya.Image("secondWeapon/悬浮炮子弹.png");return e.onDisable=this.imgDisable,e},t.prototype.imgDisable=function(){console.error("进入了泡泡disable的事件"),Laya.Pool.recover("flottantCircle",this)},t.prototype.setParalysis=function(){this.markSk&&this.markSk.playbackRate(.01),this.effectObj=w["default"].getInstance().createSkByTemplet("diancipao"),this.effectObj.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h/2),this.effectObj.play(1,!0),this.self.addChild(this.effectObj),o["default"].noBindScript("触发麻痹效果~q")},t.prototype.setBackDistance=function(){var e=this;this.markSk&&this.markSk.playbackRate(.01),this.effectObj=w["default"].getInstance().createSkByTemplet("liuxingpao"),this.effectObj.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h),this.effectObj.play(1,!0),this.self.addChild(this.effectObj);this.self.y;this.backDistanceTween=v.to(this.self,{x:this.self.x,y:this.self.y-this.fightBackDistance},100,Laya.Ease.circOut,Laya.Handler.create(this,function(){e.secondAttacked=!1,e.cancelEffect()}))},t.prototype.setMushroomEffect=function(){this.effectObj=w["default"].getInstance().createSkByTemplet("mogupao"),this.effectObj.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h/2),this.effectObj.play(1,!1),this.effectObj.zOrder=-1,this.self.addChild(this.effectObj),o["default"].noBindScript("触发中毒效果~q")},t.prototype.setFlyKnife=function(){this.effectObj=w["default"].getInstance().createSkByTemplet("feirenfengbao"),this.effectObj.pos(this.propertyObj.mark_w/2,this.propertyObj.mark_h/2),this.effectObj.play(1,!1),this.self.addChild(this.effectObj),o["default"].noBindScript("触发飞刃效果~q")},t.prototype.setMissileEffect=function(e){this.effectObj=w["default"].getInstance().createSkByTemplet("daodanpao");var t=e.vars_.propertyObj.mark_w,a=e.vars_.propertyObj.mark_h;this.effectObj.pos(t/2,a/2),this.effectObj.play(1,!1),e.addChild(this.effectObj),o["default"].noBindScript("触发导弹效果~q")},t}(Laya.Script);a["default"]=T},{"../Bullet/BulletInterface":20,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../Tools/Tool":40,"../manage/EndlessManage":49,"../manage/EndlessParseSkill":51,"../manage/Music":56,"../manage/OpenWx":57,"../manage/Playing_var":58,"../manage/SecondWeaponData":59,"../manage/SkeletonTempletManage":60,"../manage/toast":61,"../playing/BattleParse":62,"../playing/PlayingSceneControl":67,"../role/BaoZha":68,"../role/Bullet_second":73,"../role/role":81}],67:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../Tools/Tool"),i=e("../manage/Playing_var"),n=e("../main/EquipUpdate"),o=e("../role/Buff"),l=e("../Data/DataTables"),r=e("../Data/JsonEnum"),h=e("./BattleParse"),c=e("../manage/BitmapFontMananage"),u=e("../manage/MainWeaponData"),p=e("../manage/BagDataControl"),f=e("../role/EnemyObject"),d=e("../manage/Music"),y=e("../Data/MusicEnum"),_=y["default"].musicToUrl,m=r["default"].secondWeaponMuzzlePos,g=r["default"].secondWeaponPos,b=r["default"].DataType,v=l["default"].FixedDataTables,k=e("../manage/SecondWeaponData"),S=e("../role/BuffBulletInitialization"),B=e("../manage/toast"),w=e("../Connect/HttpClass"),O=e("../Connect/HttpEnum"),C=e("../manage/SkeletonTempletManage"),L=e("../role/FireBossBullet1"),T=e("../manage/OpenWx"),I=e("../Bullet/BulletMain"),D=e("../Bullet/BulletInterface"),x=D["default"].BulletType,P=e("../Effect/UpBlackEffect"),j=e("../role/role"),E=e("../manage/AdaptScene"),A=e("../manage/EndlessManage"),N=e("../manage/EndlessParseSkill"),M=e("../manage/EndlessParseBoss"),R=function(e){function t(){var a=e.call(this)||this;a.role_w=120,a.role_h=110,a._fighting=!1,a.enemyCreateTime=200,a.changeBulletTypeBtn={},a._moveSpeed=3,a._weaponDistance=100,a.gameSlowBate=.1,a.canClickBtn=!0,a.lastDestroyAllEnemy=!1,a.isABigWave=!0,a.bSpeedRateByBuff2=1,a.enerenergyInterval=8e3,a.canUpdateEnergy=!0,Laya.MouseManager.multiTouchEnabled=!1,t.instance=a,a.game=Laya.Browser.window.game,p["default"].getInstance(),a.bulletSpeed=1e3*(.15-75e-5*(u["default"].getInstance().speed-9));var s=k["default"].getInstance().getSpeed();return s?a.bulletSpeedSecond=1e3*s:a.bulletSpeedSecond=0,a}return __extends(t,e),t.prototype.onAwake=function(){E["default"].getInstance().setSceneAdaptHeight(),E["default"].getInstance().setBG_top(this.owner.hurted_img)},t.prototype.onEnable=function(){Laya.Browser.window.markScene=this,this.initSomeVarObj(),this.playMusicAndSound(0,y["default"].musicToUrl.bg_menu),i["default"].getInstance().gameStatus="main",this.lastShotTime=Date.now(),this.lastShotTimeSecond=Date.now(),this.roleObj.on(Laya.Event.DRAG_MOVE,this,this.listernerDrag);for(var e=0;e<this.selectModelBtn._children.length;e++){var t=this.selectModelBtn.getChildAt(e);1===e?t.on(Laya.Event.MOUSE_UP,this,this.touchStartEndless):t.on(Laya.Event.CLICK,this,this.touchStartGameBtn),t.on(Laya.Event.MOUSE_UP,this,this.touchStartGameBtn),t.on(Laya.Event.MOUSE_DOWN,this,this.touchStartGameBtn)}this.initMoneyPos(),this.setMoneyData(),this.owner.shopBtn.on(Laya.Event.CLICK,this,this.openShop),Laya.Browser.window.shopBtn=this.owner.shopBtn,this.self.rankingBtn.on(Laya.Event.CLICK,this,this.showRanking),Laya.Browser.window.rankingBtn=this.self.rankingBtn,this.self.shareBtn.on(Laya.Event.CLICK,this,this.startShare),this.self.pauseBtn.on(Laya.Event.CLICK,this,this.pauseListerer),this.self.checkInBtn.on(Laya.Event.CLICK,this,function(){Laya.Scene.open("test/CheckIn_dialog.scene",!1)}),Laya.timer.once(800,this,this.openCheckIn),this.setEquipType(),this.setTimeIntervalByOne(),this.initProgressBarAndNum(),this.changeBgByLevel();var a=["btn_exchangePower","btn_exchangeGold","btn_exchangeDiamond"],s=0;for(s;s<a.length;s++)this.self[a[s]].on(Laya.Event.CLICK,this,this.exchangeGoldAndStone,[s]);this.ckeckCanUpdate(),this.parseTemplate(),this.preLoadResInPlaying(),this.openRanking(),Laya.stage.on(Laya.Event.RESIZE,this,this.onResize)},t.prototype.onResize=function(e){console.log("onResize----:",e,"stage.height",Laya.stage.height)},t.prototype.setLoadingScene=function(){Laya.Scene.open("test/ReqLoading.scene",!1,null,Laya.Handler.create(this,function(e){E["default"].getInstance().setBg(e.blackSprite),e.close(),e.zOrder=3500,Laya.Scene.setLoadingPage(e)}))},t.prototype.wxUserDateUpdate=function(){if(Laya.Browser.onMiniGame){var e={type:2,data:{level:Laya.Browser.window.game.nowLevel,scores:i["default"].getInstance().achieve.killTopNum}};T["default"].getInstance().postMsg(e.type,e.data)}},t.prototype.initRoleHp=function(){this.roleHp=u["default"].getInstance().getRoleHp()||20,this.roleTotal=this.roleHp||20,console.error("飞机总的血量~~~~",this.roleTotal),this.label_hpNum.text=this.roleHp+"/"+this.roleTotal},t.prototype.parseTemplate=function(){var e=C["default"].getInstance().templets,t=["buff","diancipao","xuanfupao","xuhongyinqing","liuxingpao","mogupao","feirenfengbao","daodanpao","qpbz","fanghudun","jiguangpao","duye"],a=N["default"].getInstance().getSkillEffectIds(),s=t.concat(a),i=0;for(i;i<s.length;i++)e&&e[s[i]]||(this.preResNum++,C["default"].getInstance().play(r["default"].templetType.other,s[i],s[i],!0,null,null,Laya.Handler.create(this,this.loadTempletFinish)));e&&e.boss_baozha||C["default"].getInstance().play(r["default"].templetType.other,"boss_baozha","boss_baozha",!0,null,null);var n=["xuanfeng","boss2_pao","baozi","zd","boos4texiao","bingzhui","boss5texiao"];for(i=0;i<n.length;i++)e&&e[n[i]]||C["default"].getInstance().play(r["default"].templetType.other,n[i],n[i],!0,null,null)},t.prototype.loadTempletFinish=function(){++this.preResIndex===this.preResNum&&(this.preResLoaded=!0,console.error("加载完成11111111111111-------------------"))},t.prototype.loadTempletFinish_enemy=function(){++this.preResIndex_e===this.preResNum_e&&(this.preResLoaded_e=!0,console.error("加载完成222222222222222------------------"))},t.prototype.preLoadResInPlaying=function(e){var t,a=h["default"].getInstance().getTempletDateInLevel(e),s=C["default"].getInstance().templets,i=(Object.keys(a).length,{});for(t in a){var n=v.getInstance().getDataByKey(r["default"].DataType.monster,t,"pic");s[n]||(this.preResNum_e++,C["default"].getInstance().play(r["default"].templetType.enemy,null,n,!0,null,null,Laya.Handler.create(this,this.loadTempletFinish_enemy))),i[n]=!0}if(!e)for(t in s)s[t].templetType&&s[t].templetType===r["default"].templetType.enemy&&(i[t]||(s[t].destroy(),delete s[t]));Laya.Browser.window.templets=C["default"].getInstance().templets},t.prototype.testSk=function(){},t.prototype.changeBgByLevel=function(){var e=Laya.Browser.window.game.nowLevel,t=v.getInstance().getDataByKey(r["default"].DataType.battle,e,"bg"),a="face/"+t+".jpg";this.bg_img1.skin=a,this.bg_img2.skin=a,this.bg_img3.skin=a},t.prototype.sendHttp=function(){var e={uuId:i["default"].getInstance().uuId,itemID:104,itemNum:1};new w["default"].HttpClass(Laya.Handler.create(this,function(e){console.error(e)}),O["default"].URLSERVER+O["default"].httpUrls.ShopItem,JSON.stringify(e))},t.prototype.completeHandler=function(e){console.error(e)},t.prototype.errorHandler=function(e){console.error("错误:",e)},t.prototype.processHandler=function(e){console.error("进程:",e)},t.prototype.playMusicAndSound=function(e,t){e?d["default"].getInstance().playSound(t):d["default"].getInstance().playMusic(t)},t.prototype.initSomeVarObj=function(){this.self=this.owner,this.dropBuffParent=this.self.dropBuffParent,this.bg_img1=this.owner.bg_01,this.bg_img2=this.owner.bg_02,this.bg_img3=this.owner.bg_03,this.cloud_01=this.owner.cloud_01,this.cloud_02=this.owner.cloud_02,this.bulletParent=this.self.getChildByName("bulletParent"),this.label_hpNum=this.self.label_hpNum,this.bulletParent_enemy=this.self.bulletParent_enemy,this.bulletParentUp_enmey=this.self.bulletParentUp_enmey,this.buffProgressParent=this.self.buffProgress,this.EnemySpite=this.self.getChildByName("EnemySpite"),this.roleObj=this.self.getChildByName("role_name"),Laya.Browser.window.roleObj=this.roleObj,this.roleStatus=null,this.secondRoleObj=this.self.secondWeapon,Laya.Browser.window.secondRoleObj=this.secondRoleObj,this.secondRoleObj.visible=this.game.secondWeapon.selected?!0:!1,this.mainPlane=this.roleObj.getChildAt(0),this.mainPlane_sk=this.mainPlane.getChildAt(0),this.mainPlane_pic=this.self.pic_plane,this.leftSecondWeapon=this.owner.leftSecondWeapon,this.rightSecondWeapon=this.owner.rightSecondWeapon,this.arrowSprite=this.owner.getChildByName("arrow"),this.selectModelBtn=this.owner.getChildByName("selectModelBtn"),this.mainLayer=this.owner.getChildByName("main_layer"),this.playing_layer=this.owner.getChildByName("playing_layer"),this.moneySprite=this.owner.getChildByName("moneySprite"),this.dropGoldParent=this.owner.goldDrop,this.hpBar=this.owner.hpBar,this.hpBar2=this.owner.hpBar2,this.redDot_checkInBtn=this.owner.redDot_checkInBtn,this.img_progressPlane=this.owner.img_progressPlane,this.effectParent=this.owner.effectParent,this.buffBulletInit=new S["default"],this.touchUpEffct=P["default"].getInstance(),this.preResIndex=0,this.preResNum=0,this.preResLoaded=!1,this.preResIndex_e=0,this.preResNum_e=0,this.preResLoaded_e=!1},t.prototype.listernerDrag=function(){var e=new Laya.Point(this.roleObj.x-this.secondRoleObj.x,this.roleObj.y-this.secondRoleObj.y);e.normalize();var t=new Laya.Point(this.secondRoleObj.x,this.secondRoleObj.y),a=t.distance(this.roleObj.x,this.roleObj.y);a>this._weaponDistance&&(this.secondRoleObj.x=this.roleObj.x-e.x*this._weaponDistance,this.secondRoleObj.y=this.roleObj.y-e.y*this._weaponDistance),this.weaponRegression(),this.mainPlane_sk.visible&&this.mainPlane_sk.play("fly",!0)},t.prototype.weaponRegression=function(){Laya.Tween.clearAll(this.secondRoleObj),Laya.Tween.to(this.secondRoleObj,{x:this.roleObj.x,y:this.roleObj.y},100,null,Laya.Handler.create(this,function(){},[]),0,null,!0)},t.prototype.initProgressBarAndNum=function(){var e=this.owner;this.progressBar=e.progressBarEnemyNum,this.progressLeftLabel=e.progressLeftLabel,this.progressRightLabel=e.progressRightLabel,this.haveEnemy=e.haveEnemy;var t=Laya.Browser.window.game;this.progressBar.value=0,this.progressLeftLabel.text=JSON.stringify(t.nowLevel),this.progressRightLabel.text=JSON.stringify(t.nowLevel+1),this.setProgressBar()},t.prototype.setProgressBar=function(){var e=h["default"].getInstance().killEnemyS,t=h["default"].getInstance().getTotalNums(),a=e/t;this.progressBar.value=a,this.haveEnemy.value=""+(t-e),.1>=a?this.img_progressPlane.y=343:a>=.97?this.img_progressPlane.y=90:this.img_progressPlane.y=343-253*(a-.1)},t.prototype.openShop=function(){this.canClickBtn&&(this.setCanTouchVar(),this.playMusicAndSound(1,_.button_normal),Laya.Scene.open("test/ShopDialog.scene",!1))},t.prototype.setCanTouchVar=function(){var e=this;this.canClickBtn=!1,Laya.timer.once(800,this,function(){e.canClickBtn=!0})},t.prototype.showRanking=function(){this.canClickBtn&&(this.setCanTouchVar(),this.playMusicAndSound(1,_.button_normal),Laya.Browser.onMiniGame?Laya.Scene.open("test/Ranking.scene",!1):B["default"].noBindScript("仅支持微信客户端!"))},t.prototype.startShare=function(){T["default"].getInstance().setShare()},t.prototype.openRanking=function(){var e=this;Laya.Browser.onMiniGame&&Laya.loader.load(["res/atlas/ranking.atlas"],Laya.Handler.create(this,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("res/atlas/ranking.atlas"),Laya.timer.once(1e3,e,function(){Laya.Scene.open("test/Ranking.scene",!1,null,Laya.Handler.create(e,function(e){e.close()})),e.wxUserDateUpdate()})}))},t.prototype.openCheckIn=function(){i["default"].getInstance().firstTouchPlay||i["default"].getInstance().checkInData.already||Laya.Scene.open("test/CheckIn_dialog.scene",!1),this.setRedDotStatus()},t.prototype.setRedDotStatus=function(){this.redDot_checkInBtn.visible=!i["default"].getInstance().checkInData.already},t.prototype.openSetting=function(){this.playMusicAndSound(1,_.button_normal),Laya.Scene.open("test/Set.scene",!1)},t.prototype.initMoneyPos=function(){this.bodyPower=this.self.fc_power,this.gold=this.self.fc_gold,this.diamond=this.self.fc_diamond},t.prototype.exchangeGoldAndStone=function(e){this.playMusicAndSound(1,_.button_normal),2===e?B["default"].noBindScript("暂未开放!"):Laya.Scene.open("test/ExchangeDialog.scene",!1,e)},t.prototype.setEquipType=function(e){var t=l["default"].FixedDataTables.getInstance().getDataByKey(r["default"].DataType.secondaryWeapon,e||this.game.secondWeapon.selected,"pic");this.leftSecondWeapon.skin="face/"+t+".png",this.rightSecondWeapon.skin="face/"+t+".png",this.secondRoleObj.visible=this.game.secondWeapon.selected?!0:!1,k["default"].getInstance().updateWeaponComfig(),this.setMainWeaponType()},t.prototype.setMainWeaponType=function(e){var t=e||this.game.secondWeapon.selected,a=l["default"].FixedDataTables.getInstance().getDataByKey(r["default"].DataType.secondaryWeapon,t,"fly");return this.mainPlane_sk.templet?this.setPlaneSk(a):Laya.timer.frameLoop(1,this,this.setPlaneSk,[a]),void(this.mainPlane_pic.visible=!1)},t.prototype.setPlaneSk=function(e){this.mainPlane_sk.templet&&(this.mainPlane_sk.url="dragonbones/"+e+".sk",Laya.timer.clear(this,this.setPlaneSk))},t.prototype.setMoneyData=function(){var e=p["default"].getInstance().getBagDataById("103").num,t=p["default"].getInstance().getBagDataById("101").num,a=p["default"].getInstance().getBagDataById("102").num;this.bodyPower.value=s["default"].converteNum(e),this.gold.value=s["default"].converteNum(t),this.diamond.value=s["default"].converteNum(a)},t.prototype.touchStartEndless=function(e){return e.stopPropagation(),this.canClickBtn?(this.setCanTouchVar(),n["default"].instance().listVisile()?void n["default"].instance().hideAllList():(this.playMusicAndSound(0,_.bg_fight),this.judgeEnergyEnough("endless")?void A["default"].getInstance().createUpgradeShortcutByAD():void B["default"].noBindScript("体力不足！"))):void 0},t.prototype.waitingLoad=function(){this.isWaiting&&(Date.now()-this.waitingStartTime>=5e3||this.preResLoaded&&this.preResLoaded_e)&&(Laya.Dialog.hideLoadingPage(),"endless"===i["default"].getInstance().gameModel?this.enterEndless():this.startEnterPlaying(),this.isWaiting=null,Laya.Dialog.hideLoadingPage())},t.prototype.judgeLoadFinish=function(){this.preResLoaded&&this.preResLoaded_e?"endless"===i["default"].getInstance().gameModel?this.enterEndless():this.startEnterPlaying():(this.waitingStartTime=Date.now(),Laya.Dialog.showLoadingPage(),this.isWaiting=!0)},t.prototype.enterEndless=function(){this.preLoadResInPlaying(!0),this.self.endSence.play(0,!1),this.playing_layer.visible=!0,A["default"].getInstance().initEndless(),i["default"].getInstance().firstTouchPlay?Laya.Physics.I.start():i["default"].getInstance().firstTouchPlay=!0,this.initRoleHp(),i["default"].getInstance().gameStatus="playing"},t.prototype.touchStartGameBtn=function(e){if(e.stopPropagation(),e.type===Laya.Event.CLICK){if(!this.canClickBtn)return;if(this.setCanTouchVar(),this.game.nowLevel>60)return void B["default"].noBindScript("后续关卡暂未开放~");if(n["default"].instance().listVisile())return void n["default"].instance().hideAllList();if(!this.judgeEnergyEnough())return void B["default"].noBindScript("体力不足！");this.playMusicAndSound(1,_.button_normal),i["default"].getInstance().gameModel="level",this.judgeLoadFinish()}},t.prototype.startEnterPlaying=function(){this.self.endSence.play(0,!1),this.playing_layer.visible=!0,i["default"].getInstance().firstTouchPlay?Laya.Physics.I.start():i["default"].getInstance().firstTouchPlay=!0,this.initRoleHp(),i["default"].getInstance().gameStatus="playing",this.playMusicAndSound(0,_.bg_fight)},t.prototype.onDisable=function(){this.buffBulletInit=null},t.prototype.onStageMouseDown=function(e){if(e.touches&&e.touches.length>=2){if(e.touchId!==this.markDragTouchId)return void(t.roleDragCan=!1)}else this.markDragTouchId=e.touchId;("playing"===i["default"].getInstance().gameStatus||"preSettlement"===i["default"].getInstance().gameStatus)&&(this.isGamePause||(this._fighting=!0,"level"===i["default"].getInstance().gameModel&&this.touchUpEffct.setHide(),this.dragArea||(this.dragArea=new Laya.Rectangle(0,0,Laya.stage.width-this.roleObj.width,Laya.stage.height-75)),this.roleObj.startDrag(this.dragArea,!1,0)))},t.prototype.onStageMouseUp=function(e){return this.markDragTouchId&&this.markDragTouchId!=e.touchId?void(t.roleDragCan=!0):(this.mainPlane_sk.templet&&this.mainPlane_sk.play("stand",!0),this._fighting&&(d["default"].getInstance().stopOneSound(_.bullet_normal),"level"===i["default"].getInstance().gameModel&&this.touchUpEffct.setShow()),void(this._fighting=!1))},t.prototype.onStageClick=function(e){"main"===i["default"].getInstance().gameStatus&&Laya.stage.mouseY<n["default"].instance().getPosition().y&&n["default"].instance().hideAllList(),this._fighting&&d["default"].getInstance().playSound(_.bullet_normal,0)},t.prototype.onUpdate=function(){this.updateEnerenergy(),!this.isGamePause&&this._fighting&&(Date.now()-this.lastShotTime>=this.bulletSpeed&&(this.lastShotTime=Date.now(),this.createBullet()),this.buffBulletInit.onUpdate(),"level"===i["default"].getInstance().gameModel&&this.bulletSpeedSecond&&Date.now()-this.lastShotTimeSecond>=this.bulletSpeedSecond&&(this.lastShotTimeSecond=Date.now(),this.createBulletSecond_muzzle()),this.setRoleControl()),this.isGamePause||"playing"!==i["default"].getInstance().gameStatus?"main"===i["default"].getInstance().gameStatus&&(this.secondRoleObj.x=this.roleObj.x,this.secondRoleObj.y=this.roleObj.y):(this.createEnemy(),this.lastDestroyAllEnemy=this.EnemySpite._children.length?!1:!0,this.countDown_buff()),"settlement"===i["default"].getInstance().gameStatus&&(this.secondRoleObj.x=this.roleObj.x,this.secondRoleObj.y=this.roleObj.y),this.setBgUpdate(),this.setCloudUpdate(),A["default"].getInstance().getDistance(),this.waitingLoad()},Object.defineProperty(t.prototype,"fighting",{get:function(){return this._fighting},set:function(e){this._fighting=e},enumerable:!0,configurable:!0}),t.prototype.setCloudUpdate=function(){this.isGamePause||(this.cloud_01.y+=this._moveSpeed,this.cloud_02.y+=this._moveSpeed,this.cloud_01.y>0&&(this.cloud_02.y=this.cloud_01.y-Laya.stage.height),this.cloud_02.y>0&&(this.cloud_01.y=this.cloud_02.y-Laya.stage.height))},t.prototype.setBgUpdate=function(){this.isGamePause||"settlement"===i["default"].getInstance().gameStatus||A["default"].getInstance().isBossFighting||(this.bg_img1.y+=1,this.bg_img2.y+=1,this.bg_img3.y+=1,this.bg_img2.y>0&&this.bg_img1.y>this.bg_img2.y&&this.bg_img3.y>this.bg_img2.y&&(this.bg_img1>this.bg_img3?this.bg_img1.y=this.bg_img2.y-this.bg_img2.height:this.bg_img3.y=this.bg_img2.y-this.bg_img2.height),this.bg_img1.y>0&&this.bg_img2.y>this.bg_img1.y&&this.bg_img3.y>this.bg_img1.y&&(this.bg_img2.y>this.bg_img3.y?this.bg_img2.y=this.bg_img1.y-this.bg_img1.height:this.bg_img3.y=this.bg_img1.y-this.bg_img1.height),this.bg_img3.y>0&&this.bg_img1.y>this.bg_img3.y&&this.bg_img2.y>this.bg_img3.y&&(this.bg_img2.y>this.bg_img1.y?this.bg_img2.y=this.bg_img3.y-this.bg_img3.height:this.bg_img1.y=this.bg_img3.y-this.bg_img3.height))},t.prototype.createEnemy=function(){var e=i["default"].getInstance().gameModel,t=h["default"].getInstance().judgeFinishNowWave();if("endless"!==e&&this.isABigWave&&t&&!h["default"].getInstance().judgeNextIsBoss())return this.isABigWave=!1,void this.createWaveEffect();var a=this.judgeCanContinueCreate(t);if((!this.lastTimeCreateOne||a)&&this.fighting){this.lastTimeCreateAWave||(this.lastTimeCreateAWave=Date.now());var s=this.calNeedCreateId();if(s&&!this.stopCreateEnemy){this.lastTimeCreateOne=Date.now(),this.lastDestroyAllEnemy=!1;var n=(v.getInstance().getDataByKey(r["default"].DataType.monster,s,"type"),new f["default"](s));this.EnemySpite.addChild(n.enmeySprite)}else this.stopCreateEnemy=!0,this.lastDestroyAllEnemy&&(i["default"].getInstance().gameStatus="preSettlement",this.removeBulletInStage(),Laya.timer.once(1500,this,this.setSuccess))}},t.prototype.judgeCanContinueCreate=function(e){var t=i["default"].getInstance().gameModel;if("endless"===t&&A["default"].getInstance().isBossFighting){var a=M["default"].getInstance().getintervalByOne(),s=Date.now()-this.lastTimeCreateOne>=a;return s}var n=!e&&Date.now()-this.lastTimeCreateOne>=this.timeIntervalByCreate,o=e&&Date.now()-this.lastTimeCreateAWave>=this.timeIntervalByOne,l=e&&this.lastDestroyAllEnemy;return n||o||l},t.prototype.calNeedCreateId=function(){var e,t=i["default"].getInstance().gameModel;return e="endless"===t&&A["default"].getInstance().isBossFighting?M["default"].getInstance().getMonsterId():h["default"].getInstance().getNextMonsterData()},t.prototype.setSuccess=function(){var e=this;i["default"].getInstance().gameStatus="settlement",this.fighting=!1,Laya.Browser.window.game.overLevel=!0,this.roleObj.stopDrag(),this.setRoleSuccess(),P["default"].getInstance().setHide(),setTimeout(function(){new c["default"].BitmapManage("bitmapFont/settlement_number.fnt","settlement_number",Laya.Handler.create(e,function(){Laya.Scene.open("test/Settlement_dialog.scene",!1)})),e.clearObjParent(),e.clearObjectPool(),e.clearStageSprite()},2e3)},t.prototype.setRoleSuccess=function(){var e=this;Laya.Tween.to(this.roleObj,{y:-120},1e3,null,Laya.Handler.create(this,function(){Laya.Tween.clearAll(e.roleObj)}),1e3)},t.prototype.setLastTimeCreateAWave=function(e){this.lastTimeCreateAWave=e},t.prototype.setRoleControl=function(){this.roleStatus&&this.roleStatus===r["default"].roleStatus.controled&&Date.now()-this.roleStatusTime>=1e3&&(this.roleStatus=null,this.roleObj.startDrag(),B["default"].noBindScript("已经解除控制!"))},t.prototype.setRoleControled=function(){this.roleObj.stopDrag(),this.roleStatus=r["default"].roleStatus.controled,this.roleStatusTime=Date.now()},t.prototype.setTimeIntervalByOne=function(){var e=v.getInstance().getDataByKey(b.battle,this.game.nowLevel,"time");this.timeIntervalByOne=1e3*Number(e),this.setLastByCreateTime();
},t.prototype.setLastByCreateTime=function(e){var t=v.getInstance().getDataByKey(b.battle,this.game.nowLevel,"time1"),a=t.split(";");if(e&&1===e){var i=a[1].split("|"),n=s["default"].random(10*Number(i[0]),10*Number(i[1])),o=n/10;this.timeIntervalByCreate=1e3*o}else{var i=a[0].split("|"),n=s["default"].random(10*Number(i[0]),10*Number(i[1])),o=n/10;this.timeIntervalByCreate=1e3*o}},t.prototype.judgeBulletType1=function(){if(this.buffData){var e=void 0;for(e in this.buffData)if(1===this.buffData[e].type)return!0}return!1},t.prototype.createBullet=function(){var e={x:this.roleObj.x+59,y:this.roleObj.y-3},t=this.buffData;if(t&&this.judgeBulletType1()){var a=void 0;for(a in t){var s=t[a].type,i=6;switch(Number(s)){case 1:i+=4;var n=i%2,o=0,l=0,r=0,h={x:0,y:0};for(r;i>r;r++){n?0===r?(h.x=e.x,h.y=e.y,o++,l++):r%2?(h.x=e.x-20*o,o++):(h.x=e.x+20*l,l++):r%2?(h.x=e.x+7.5+11+20*l,h.y=e.y,l%2&&(h.y-=67),l++):(h.x=e.x-7.5-11-20*o,h.y=e.y,o%2&&(h.y-=67),o++);new I["default"](x.roleMainBullet,h,t[a].bullet)}}}}else this.deaultbulletCreate()},t.prototype.deaultbulletCreate=function(e){var t={x:this.roleObj.x+58,y:this.roleObj.y-32},a=this.getBulletNum(),s=a%2,i=s?(a-1)/2:a/2,n=0;if(s){var o={x:0,y:t.y};o.x=t.x;new I["default"](x.roleMainBullet,o,e)}for(;--i>=0;){n++;var l=0;for(l;2>l;l++){var o={x:0,y:t.y};o.x=l?t.x-15*n-(2.5+5*(n-1)):t.x+15*n+(2.5+6*(n-1)),(s&&n%2!==0||!s&&n%2==0)&&(o.y-=60);new I["default"](x.roleMainBullet,o,e)}}var r=this.getBevelBullet(),h=0;if(r)for(r/=2;--r>=0;){n++;var c=0;for(c;2>c;c++){var o={x:0,y:t.y};o.x=c?t.x-15*n-(2.5+5*(n-1)):t.x+15*n+(2.5+6*(n-1));var u=c?255-3*h:285+3*h;new I["default"](x.roleMainBullet,o,e,u)}h++}return;var o},t.prototype.getBevelBullet=function(){var e=i["default"].getInstance().gameModel;if("endless"===e){var t=N["default"].getInstance();if(t.isUpgraded(19)){var a=t.getSkillNum(19);return a}}return 0},t.prototype.getBulletNum=function(){var e=i["default"].getInstance().gameModel;if("endless"===e){var t=N["default"].getInstance();if(t.isUpgraded(4)){var a=t.getSkillNum(4);return a+1}return 1}return 4},t.prototype.calBulletPos=function(e){switch(e){case 1:break;case 2:break;case 3:}},t.prototype.createBulletSecond=function(){void 0==this.createBIndex&&(this.createBIndex=0);var e=Number(k["default"].getInstance().buffType[0]),t=this.createBIndex;for(t;2>t;t++){var a={x:0,y:0};t?(a.x=this.secondRoleObj.x+g[e].x[0],a.y=this.secondRoleObj.y+g[e].y[0]):(a.x=this.secondRoleObj.x+g[e].x[1],a.y=this.secondRoleObj.y+g[e].y[1]);new I["default"](x.roleSecondBullet,a);break}++this.createBIndex>=2&&(this.createBIndex=0)},t.prototype.createBulletSecond_muzzle=function(){var e=k["default"].getInstance().buffType,t=Number(e[0]),a=r["default"].muzzlePrefab[t]||"Bullet_muzzle4",s=Laya.loader.getRes("prefab/"+a+".json"),i=0;for(i;2>i;i++){var n=Laya.Pool.getItemByCreateFun(a,s.create,s);i?n.pos(m[t].x[0],m[t].y[0]):n.pos(m[t].x[1],m[t].y[1]),this.secondRoleObj.addChild(n)}},t.prototype.setBuff=function(e){if(this.buffData||(this.buffData={}),!this.judgeBuffType5(e)){var t=e.buffId,a=this.getSameTypeBuffId(e.type);if(a)a!==t&&(this.buffData[t]=this.buffData[a],delete this.buffData[a]);else{this.buffData[t]={},this.buffData[t]=s["default"].copydata(e),this.buffData[t].buffProgress=Laya.Pool.getItemByCreateFun("buffProgress",this.BuffProgress.create,this.BuffProgress);var i=this.buffData[t].buffProgress,n=i.getChildByName("img_pic");n.skin="buff/"+e.icon+".png";var o=i.getChildByName("img_bg");o.skin="buff/"+e.icon+"_遮照.png",i.pos(Laya.stage.width-n.width-2,416+(n.height+5)*this.getBuffTypeNum());var l=i._children[1].mask;l.graphics.clear(),l.graphics.drawRect(0,83,81,83,"#ff0000"),this.buffProgressParent.addChild(i)}this.buffData[t].nowTime=Date.now(),this.buffData[t].nowTime_otherBuff=Date.now();var r=Date.now();this.buffData[t].nowTime_fireBuff=[r,r,r],this.buffData[t].countSecond=0,this.buffBulletInit.initBuffData(this.buffData),this.setSpeedBySpeedBuff(this.buffData[t])}},t.prototype.judgeBuffType5=function(e){return 5===e.type?(j["default"].instance.setRoleHp(-e.buffValue),!0):!1},t.prototype.getBuffTypeNum=function(){var e,t=[];for(e in this.buffData){var a=this.buffData[e].type;-1===t.indexOf(a)&&t.push(a)}return t.length},t.prototype.getSameTypeBuffId=function(e){var t;for(t in this.buffData)if(this.buffData[t].type===e)return Number(t);return null},t.prototype.clearStageSprite=function(){this.buffProgressParent.removeChildren(0,this.buffProgressParent.numChildren-1)},t.prototype.clearObject=function(){},t.prototype.countDown_buff=function(){if(this.buffData&&Object.keys(this.buffData).length){var e;for(e in this.buffData){var t=this.buffData[e];if(Date.now()-t.nowTime>=100){t.nowTime=Date.now(),t.countSecond++;var a=t.buffLastTime,s=t.buffProgress,i=s._children[1].mask;if(i.graphics.clear(),i.graphics.drawRect(0,83-t.countSecond*(83/(10*a)),81,83,"#ff0000"),t.countSecond/10>=a){(a-t.countSecond)/a;s.removeSelf(),2===this.buffData[e].type&&(this.bulletSpeed=1e3*(.15-.001*(u["default"].getInstance().speed-9)),this.bSpeedRateByBuff2=1),delete this.buffData[e]}}}}},t.prototype.createBuff=function(e,t,a,n){if("endless"!==i["default"].getInstance().gameModel&&e){var l=Number(e[1]),r=s["default"].random(1,100);if(r>=1&&l>=r){new o["default"](Number(e[0]),t,a)}}},t.prototype.judgeBuffEnhance=function(){},t.prototype.setSpeedBySpeedBuff=function(e){2===e.type&&(e.speedBate&&(this.bulletSpeed=1e3*(.15-75e-5*(e.speedBate*u["default"].getInstance().speed-9))),e.buffValue&&(this.bSpeedRateByBuff2=e.buffValue))},t.prototype.setSpeedByEndless=function(e){var t=1e3*(.15-75e-5*(u["default"].getInstance().speed*(1+.01*e)-9));this.bulletSpeed=t},t.prototype.getBossPos=function(){var e=this.EnemySpite.numChildren-1;if(e>=0){var t=this.EnemySpite._children[e];return{x:t.x,y:t.y}}return{x:0,y:0}},t.prototype.clearObjectPool=function(){Laya.Pool.clearBySign("DropGold"),Laya.Pool.clearBySign("fireBossB1")},t.prototype.clearObjParent=function(){this.dropGoldParent.destroyChildren();var e=this.EnemySpite._children,t=0;for(t;t<e.length;t++)e[t].vars_.propertyObj.clearTimes();this.EnemySpite._children.length&&(2===this.EnemySpite._children[0].vars_.propertyObj.e_type?this.EnemySpite.removeChildren():this.EnemySpite.removeChildren()),L["default"].getItems().forEach(function(e){e.destroyChildren(),e.destroy()})},t.prototype.removeBulletInStage=function(){this.self.bulletParent_enemy.removeChildren(),this.self.bulletParentUp_enmey.removeChildren()},t.prototype.pauseListerer=function(){A["default"].getInstance().showSkills()},t.prototype.pauseGame=function(e){this.startPauseTime=Date.now(),this.isGamePause=!0,this.roleObj.stopDrag(),this.EnemySpite._children.forEach(function(e){var t=e.getChildByName("EnemySK");if(t)t.playbackRate(.001);else{var a=e.getChildByName(e.name);a&&a.playbackRate(.001)}})},t.prototype.resumeGame=function(){this.isGamePause=!1,Laya.timer.resume(),this.pauseInterval=Date.now()-this.startPauseTime,A["default"].getInstance().setCompensateTime(),this.EnemySpite._children.forEach(function(e){var t=e.getChildByName("EnemySK");if(t)t.playbackRate(1);else{var a=e.getChildByName(e.name);a&&a.playbackRate(1)}})},t.prototype.ckeckCanUpdate=function(){var e=this.self.item0,t=this.self.item1;C["default"].getInstance().play(r["default"].templetType.other,"jiantou","jiantou",!0,{x:226,y:38},e,Laya.Handler.create(this,function(e){C["default"].getInstance().play(r["default"].templetType.other,"jiantou","jiantou",!0,{x:226,y:38},t)}))},t.prototype.delayHpBar2=function(e){Laya.timer.once(1e3,this,this.setHpBar2,[e])},t.prototype.setScreenShake=function(){this.shakeIndex=0,this.nowDirect="right",this.bg_img1.parent.x=0,Laya.timer.frameLoop(2,this,this.shakeCallBack)},t.prototype.shakeCallBack=function(){var e=this.bg_img1.parent;"right"===this.nowDirect?(e.x+=3,0===e.x?"right"===this.nowDirect:this.nowDirect="left"):"left"===this.nowDirect&&(e.x-=3,(e.x=0)?this.nowDirect="left":this.nowDirect="right"),this.shakeIndex++>=5&&Laya.timer.clear(this,this.shakeCallBack)},t.prototype.setHpBar2=function(e){var t=this.hpBar2.mask.graphics;t.clear(),t.drawRect(0,0,e,44,"#ff0000")},t.prototype.updateEnerenergy=function(){var e=this;if(this.canUpdateEnergy&&(!this.lastUpdateEnerenergyTime||Date.now()-this.lastUpdateEnerenergyTime>=this.enerenergyInterval)){this.canUpdateEnergy=!1;var t={};t.uuId=i["default"].getInstance().uuId,t.energy=!0;new w["default"].HttpClass(Laya.Handler.create(this,function(t){e.parseEnergyData(t),e.canUpdateEnergy=!0}),O["default"].URLSERVER+O["default"].httpUrls.TimerUpdateUpdateSome,JSON.stringify(t));this.lastUpdateEnerenergyTime=Date.now()}},t.prototype.parseEnergyData=function(e){p["default"].getInstance().updateBagDate_new(e);var t=new Date(e.energyRecoverTime).getTime(),a=new Date(e.now).getTime();this.lastUpdateEnerenergyTime=Date.now(),this.enerenergyInterval=t-a},t.prototype.sendKillEnergy=function(){var e=this,t={};t.uuId=i["default"].getInstance().uuId;var a,s=p["default"].getInstance().getBagDataById("103").num;a="endless"===i["default"].getInstance().gameModel?20:l["default"].FixedDataTables.getInstance().getDataByKey(b.battle,this.game.nowLevel,"cost"),t.bagCommon={103:{id:103,num:s-a}},t.barrier={curBarrier:this.game.nowLevel,luckyValue:i["default"].getInstance().luckyValue};new w["default"].HttpClass(Laya.Handler.create(this,function(t){e.canUpdateEnergy=!0,e.enerenergyInterval=0}),O["default"].URLSERVER+O["default"].httpUrls.PassedBarrier,JSON.stringify(t))},t.prototype.judgeEnergyEnough=function(e){var t=p["default"].getInstance().getBagDataById("103").num,a=e?20:v.getInstance().getDataByKey(b.battle,this.game.nowLevel,"cost");return 0>t-a?!1:!0},t.prototype.createWaveEffect=function(){var e=Laya.loader.getRes("prefab/Boss_warning.prefab"),t=e.create();this.isWaveEffect=!0,Laya.stage.addChild(t)},Object.defineProperty(t.prototype,"roleHp",{get:function(){return this._roleHp},set:function(e){this._roleHp=e>=this.roleTotal?this.roleTotal:e},enumerable:!0,configurable:!0}),t.bulletType=1,t.roleDragCan=!0,t}(Laya.Script);a["default"]=R},{"../Bullet/BulletInterface":20,"../Bullet/BulletMain":21,"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../Effect/UpBlackEffect":32,"../main/EquipUpdate":42,"../manage/AdaptScene":43,"../manage/BagDataControl":44,"../manage/BitmapFontMananage":45,"../manage/EndlessManage":49,"../manage/EndlessParseBoss":50,"../manage/EndlessParseSkill":51,"../manage/MainWeaponData":55,"../manage/Music":56,"../manage/OpenWx":57,"../manage/Playing_var":58,"../manage/SecondWeaponData":59,"../manage/SkeletonTempletManage":60,"../manage/toast":61,"../role/Buff":69,"../role/BuffBulletInitialization":70,"../role/EnemyObject":75,"../role/FireBossBullet1":77,"../role/role":81,"./../Tools/Tool":40,"./BattleParse":62}],68:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.prefabName=this.self.prefabName,this.self.visible=!0,"boss_baozha"===this.prefabName?(this.skObj=this.self,this.self.scale(1.5,1.5)):this.skObj=this.self.getChildAt(0),this.skObj.on(Laya.Event.STOPPED,this,this.stopped),this.aniName=this.self.aniName,"baozha1"===this.aniName&&this.skObj.playbackRate(2.5),Laya.timer.frameOnce(3,this,this.playAnimation)},t.prototype.playAnimation=function(){Laya.timer.clear(this,this.playAnimation),this.skObj.play(this.aniName,!1,!0),this.playStatus="stopped"},t.prototype.stopped=function(){"stopped"===this.playStatus&&this.self.removeSelf()},t.prototype.onDisable=function(){this.self.visible=!1,this.skObj.stop(),Laya.Pool.recover(this.owner.prefabName,this.self)},t}(Laya.Script);a["default"]=s},{}],69:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/JsonEnum"),i=e("../Data/DataTables"),n=e("../playing/PlayingSceneControl"),o=e("../manage/SkeletonTempletManage"),l=e("../playing/BuffControl"),r=function(){function e(e,t,a,n){this.mark_w=182,this.mark_h=99,this.buffConfig=i["default"].FixedDataTables.getInstance().getData(s["default"].DataType.buff,e),this.buffId=e,this.buffValue=this.buffConfig.value,this.buffLastTime=this.buffConfig.time,this.time_lost=this.buffConfig.time_lost,this.type=this.buffConfig.type,this.bullet=this.buffConfig.bullet,this.icon=this.buffConfig.icon,this.posX=t,this.posY=a,this.parent=n||Laya.Stage,this.speedBate=this.buffConfig.speed,this.createBuff()}return e.prototype.createBuff=function(){var e=o["default"].getInstance().templets.buff,t=Laya.Pool.getItemByCreateFun("buff",function(){return e.buildArmature(0)},this);t.visible&&t.addComponent(l["default"]),t.play(this.buffConfig.icon_buff,!0),t.propertyObj=this,t.pos(this.posX,this.posY),n["default"].instance.dropBuffParent.addChild(t)},e}();a["default"]=r},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../manage/SkeletonTempletManage":60,"../playing/BuffControl":63,"../playing/PlayingSceneControl":67}],70:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/MainWeaponData"),i=e("../playing/PlayingSceneControl"),n=e("../Bullet/BulletMain"),o=e("../Bullet/BulletInterface"),l=function(){function e(){this.roleObj=i["default"].instance.roleObj,this.bulletRed=i["default"].instance.bullet_red;var e=this.roleObj.getChildAt(0);this.imgPlane=e,this.setRolePos()}return e.prototype.setRolePos=function(){var e=new Laya.Point(this.imgPlane.x,this.imgPlane.y);this.roleObj.localToGlobal(e),this.rolePos=e},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.initBuffData=function(e){this.buffData=e},e.prototype.onUpdate=function(){var e=this.buffData;e&&Object.keys(e).length&&(this.bulletIndex=0,this.createBuffBullet())},e.prototype.createBuffBullet=function(){var e,t=this.buffData;for(e in t){var a=t[e].type;switch(a){case 4:Date.now()-t[e].nowTime_otherBuff>=1e3&&(t[e].nowTime_otherBuff=Date.now(),this.createBulletCircle(t[e]));break;case 3:this.createBulletFire(t[e]);break;case 2:break}}},e.prototype.createBulletFire=function(e){this.setRolePos();var t=e.speedBate.split("#");1==this.bulletIndex?86.5:80,1==this.bulletIndex?266.5:260;if(Date.now()-e.nowTime_fireBuff[0]>=Number(t[0])*i["default"].instance.bulletSpeed){var a=0;for(a;2>a;a++){var s=1===a?this.roleObj.x-26+15:this.rolePos.x+26-15,l=1===a?266.5:273.5;new n["default"](o.Bullet.BulletType.roleMainBullet,{x:s+30,y:this.rolePos.y-40-15},"火力增强子弹_02",l,e,0)}e.nowTime_fireBuff[0]=Date.now()}if(Date.now()-e.nowTime_fireBuff[1]>=Number(t[1])*i["default"].instance.bulletSpeed){new n["default"](o.Bullet.BulletType.roleMainBullet,{x:this.roleObj.x+59,y:this.rolePos.y-40-15-30},"火力增强子弹_01",270,e,1);e.nowTime_fireBuff[1]=Date.now()}return void(Date.now()-e.nowTime_fireBuff[2]>=Number(t[2])*i["default"].instance.bulletSpeed&&(this.createBulletFire_missile(e),e.nowTime_fireBuff[2]=Date.now()));var s,l},e.prototype.createBulletFire_missile=function(e){var t=0;for(t;4>t;t++){var a={0:30,1:60,2:-30,3:-60},s={0:{x:110,y:39},1:{x:133,y:57},2:{x:12,y:39},3:{x:-6,y:57}};new n["default"](o.Bullet.BulletType.roleMainBullet,{x:this.roleObj.x+s[t].x,y:s[t].y+this.roleObj.y},"火力增强导弹",a[t],e,2)}},e.prototype.createBulletCircle=function(e){var t=100,a=12,i=360/a,l=0;for(l=0;a>l;l++){var r=this.imgPlane.x+t*Math.cos(i*l*Math.PI/180),h=this.imgPlane.y+t*Math.sin(i*l*Math.PI/180),c=this.getXiangDuiPos(r,h),u=new n["default"](o.Bullet.BulletType.roleMainBullet,c,e.bullet,null,e);e.buffValue*Number(s["default"].getInstance().getShowFire());u.setBuff({x:r,y:h})}},e.prototype.getXiangDuiPos=function(e,t){var a=new Laya.Point(e,t);return this.roleObj.localToGlobal(a),a},e}();a["default"]=l},{"../Bullet/BulletInterface":20,"../Bullet/BulletMain":21,"../manage/MainWeaponData":55,"../playing/PlayingSceneControl":67}],71:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.onDisable=function(){this.owner.getChildByName("img_bg").mask.graphics.clear(),Laya.Pool.recover("buffProgress",this.owner)},t}(Laya.Script);a["default"]=s},{}],72:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=e("../manage/MainWeaponData"),o=e("../manage/SecondWeaponData"),l=i["default"].BulletType,r=i["default"].prefabType,h=function(){function e(e,t,a){switch(a&&(this.isWFboss=a),e){case l.main:this.defaultSpeedY=n["default"].getInstance().bulletSpeed,this.hurtValue=n["default"].getInstance().fire;var h=Number(n["default"].getInstance().speed);this.shootSpeed=1e3*(.15-.001*(h-9)),this.nick="Bullet_red",this.res=Laya.loader.getRes("prefab/"+this.nick+".json"),this.prefabType=r.bulletRole,this.camp=1;break;case l.second:var c=o["default"].getInstance();this.defaultSpeedY=c.getbulletSpeed(),this.hurtValue=c.getFire(),this.shootSpeed=1e3*c.getSpeed(),this.nick=c.bulletPrefab,this.res=Laya.loader.getRes("prefab/"+this.nick+".json"),this.prefabType=r.bulletSkill,this.camp=1;break;case l.boss:if(!t)return void console.error("bossId传入错误",t);var u=s["default"].FixedDataTables.getInstance().getData(i["default"].DataType.monster,t);switch(this.bulletConfig=s["default"].FixedDataTables.getInstance().getData(i["default"].DataType.bullet),this.hurtValue=1,u.pic){case"boss3":this.shootSpeed=500;break;case"boss4":this.shootSpeed=1e3;break;case"boss5":this.shootSpeed=1e3;break;default:this.shootSpeed=1e3*(.15-.001*(Number(u.shootSpeed)-9)),"boss1"!=u.pic&&"boss2"!=u.pic&&(this.isWFboss=!0)}this.defaultSpeedY=Number(u.bulletSpeed),this.nick="Bullet_boss",this.res=Laya.loader.getRes("prefab/"+this.nick+".json"),this.prefabType=r.bullletBoss,this.camp=2,this.hitRadius={w:25.5,h:26};break;case l.bigEnemy:this.isWFboss=!0;var p=s["default"].FixedDataTables.getInstance().getData(i["default"].DataType.monster,30108);switch(this.bulletConfig=s["default"].FixedDataTables.getInstance().getData(i["default"].DataType.bullet),this.hurtValue=1,p.pic){case"boss3":this.shootSpeed=500;break;case"boss4":this.shootSpeed=1e3;break;case"boss5":this.shootSpeed=1e3;break;default:this.shootSpeed=1e3*(.15-.001*(Number(p.shootSpeed)-9))}this.defaultSpeedY=Number(p.bulletSpeed),this.nick="Bullet_boss",this.res=Laya.loader.getRes("prefab/"+this.nick+".json"),this.prefabType=r.bullletBoss,this.camp=2,this.hitRadius={w:25.5,h:26}}}return e.prototype.bconfigProperty=function(e,t){return t?this.bulletConfig[e][t]:this.bulletConfig[e]},e}();a["default"]=h},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../manage/MainWeaponData":55,"../manage/SecondWeaponData":59}],73:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/SecondWeaponData"),i=e("../playing/PlayingSceneControl"),n=e("../Tools/Tool"),o=function(e){function t(){var t=e.call(this)||this;return t.changeTraceInterval=800,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;if(this.repeateUse=!1,this.self=this.owner,this.property=this.self.property,this.self.parent!==i["default"].instance.bulletParent)return this.self.visible=!0,void this.self.on(Laya.Event.STOPPED,this,this.listenStop);switch(this.secondData=s["default"].getInstance(),this._bulletType=this.secondData.buffType,this.sk_object=this.owner.getChildByName("sk_name"),this.secondType=Number(this._bulletType[0]),this.secondType){case 3:Laya.timer.frameOnce(3,this,function(){e.sk_object.play("bd",!0,!0)})}this.bulletSpeed=-this.secondData.getbulletSpeed(),this.setData(),8===this.property.secondType&&(this.self.scale(.3,.3),this.markTime=Date.now()),this.self.visible=!0,11===this.secondType&&this.selectTraceTarget()},t.prototype.onUpdate=function(){return this.self.visible&&this.self.parent===i["default"].instance.bulletParent?this.self.y<0?(this.sk_object&&this.sk_object.stop(),void this.self.removeSelf()):((this.self.x>=Laya.stage.width+200||this.self.x<=-200)&&this.self.removeSelf(),this.judgeType8()?void(Date.now()-this.markTime>=1e3*this.property.keepTimeValue&&this.self.removeSelf()):void(11===this.secondType?(Date.now()-this.changeDirectTime>=this.changeTraceInterval&&this.selectTraceTarget(),this.self.x+=this.speedXy.x,this.self.y+=this.speedXy.y):this.self.y+=this.bulletSpeed)):void 0},t.prototype.onTriggerEnter=function(e,t){e.owner.visible&&e.owner.parent&&"4"!==this._bulletType[0]&&this.owner.removeSelf()},t.prototype.judgeType8=function(){var e=.4*Laya.stage.height;if(8===this.property.secondType){if(this.property.canHitCollision)return!0;if(this.self.y<=e)return this.self.scale(1,1),this.property.canHitCollision=!0,!0;var t=this.self.scaleX+.01>=1?1:this.self.scaleX+.01;this.self.scale(t,t)}return!1},t.prototype.setData=function(){switch(Number(this._bulletType[0])){case 3:this._iceTS=this.secondData.getIceData;break;case 4:break;case 5:this._flottantT=this.secondData.getFlottantT}},Object.defineProperty(t.prototype,"iceTS",{get:function(){return this._iceTS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flottantT",{get:function(){return this._flottantT},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bulletType",{get:function(){return Number(this._bulletType[0])},enumerable:!0,configurable:!0}),t.prototype.listenStop=function(){this.self.removeSelf()},t.prototype.selectTraceTarget=function(){this.changeDirectTime=Date.now();var e=i["default"].instance.EnemySpite;return e._children.length?(this.targetObj=e._children[n.tools.random(0,e._children.length-1)],void 0===this.targetObj.x,void this.setTraceDirect()):void this.setTraceDirect(!0)},t.prototype.setTraceDirect=function(e){if(void 0===this.speedXy&&(this.speedXy={}),e)return this.speedXy.y=this.bulletSpeed,this.speedXy.x=0,void(this.self.rotation=0);var t=new Laya.Point(this.targetObj.x-this.self.x,this.targetObj.y-this.self.y);t.normalize();var a=0;a=0===t.x?t.y<0?90:-90:0===t.y?t.x<0?180:0:n.tools.getAngleByTan(t.y/t.x),t.x<0&&t.y<0?a=360-a:t.x<0&&t.y>0&&(a=a-180+360),this.self.rotation=a+90,this.speedXy.y=this.bulletSpeed,this.speedXy.x=t.x*this.speedXy.y/t.y},t.prototype.onDisable=function(){this.self.visible=!1,this.targetObj=null,Laya.Pool.recover(s["default"].getInstance().bulletPrefab,this.owner)},t}(Laya.Script);a["default"]=o},{"../Tools/Tool":40,"../manage/SecondWeaponData":59,"../playing/PlayingSceneControl":67}],74:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,i=e("../Boss/nanGuaWangZi_Boss"),n=e("../Boss/maoWangHou_Boss"),o=e("../Boss/daShuRen_Boss"),l=e("../Boss/shitoujuren_Boss"),r=e("../Boss/bingqilinzuhe_Boss"),h=e("../Boss/bingtouxiang_Boss"),c=e("../Boss/jibaobao_Boss"),u=e("../Boss/zhangyunvhuang_Boss"),p=e("../Data/DataTables"),f=p["default"].FixedDataTables,d=e("../Data/JsonEnum"),y=e("../Data/JsonEnum"),_=y["default"].DataType,m=d["default"].dropHpStatus,g=e("../Tools/Tool");!function(e){e[e.chuji_xiaoemo1=.4]="chuji_xiaoemo1",e[e.chuji_xiaoemo2=.5]="chuji_xiaoemo2",e[e.chuji_xiaoemo=.55]="chuji_xiaoemo",e[e.zhongji_hetun=.7]="zhongji_hetun",e[e.zhongji_xiezi=.5]="zhongji_xiezi",e[e.chuji_feishu=.5]="chuji_feishu",e[e.chuji_jianci=.4]="chuji_jianci",e[e.chuji_xigua=.6]="chuji_xigua",e[e.zhongji_feihou=.75]="zhongji_feihou",e[e.zhongji_luobo=.55]="zhongji_luobo"}(s||(s={}));var b=function(){function e(e){this.id=e,this.bossStartY=95,this.dropHpStatus=m.born,this.enemyId=e,this.initProperty(),this.startHp=this._hp,this.prefabType=2===this.e_type?y["default"].prefabType.boss:y["default"].prefabType.enemy}return e.prototype.initProperty=function(){if(this.config=f.getInstance().getData(_.monster,this.enemyId),this.defaultSpeedY=this.setRandomSpeed(this.config.speed),this._hp=Number(this.config.hp),this.gold=Number(this.config.gold),this.e_type=Number(this.config.type),this.enemyLevel=Number(this.config.level),this.way=Number(this.config.way),-1==this.config.buff?this.dropBuff=!1:(this.dropBuff=!0,this.buffProbabilit=this.config.buff.split("|")),this.pic=this.config.pic,2===this.e_type){this.nick=y["default"].enemyToPerfab[this.pic],this.isWFboss=this.judgeWFBoss(),this.setScript(),this.res=Laya.loader.getRes("prefab/"+this.nick+".json"),this.bossStartY=-1==this.config.positiony?95:this.config.positiony,this.scaleXY={x:0,y:0};var e=this.config.scale.split("|");this.scaleXY.x=Number(e[0]),this.scaleXY.y=Number(e[1]),this.moveAreaPos={};var t=this.config.positionx.split("|");this.moveAreaPos.x1=Number(t[0]),this.moveAreaPos.x2=Number(t[1]),this.hurtValue=1e5}else{this.scaleXY={},s[this.pic]?(this.scaleXY.x=s[this.pic],this.scaleXY.y=s[this.pic]):(this.scaleXY.x=.6,this.scaleXY.y=.6),y["default"].midEnemyNameToSK[this.pic]?(this.nick="monsterSK",this.res=Laya.loader.getRes("prefab/EnemySK.json"),console.error("进入到了中级怪物的nick~")):(this.nick="monster",this.res=Laya.loader.getRes("prefab/EnemySK.json"));var a=f.getInstance().getDataByKey(_.misc,10,"value");this.hurtValue=a?Number(a):20}this.res||console.error(this.nick+"未加载就开始使用~！")},Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(e){e?this._hp=e:this._hp=0},enumerable:!0,configurable:!0}),e.prototype.judgeWFBoss=function(){var e=["Boss1","Boss2","Boss3","Boss4","Boss5"];return e.indexOf(this.nick)>-1?!1:!0},e.prototype.setRandomSpeed=function(e){var t=e.split("|"),a=t.map(function(e,t){return Number(e)}),s=g.tools.random(a[0],a[1]);return s},e.prototype.setScript=function(){switch(this.nick){case y["default"].enemyToPerfab.boss_nanguawangzi:this.needAddScript=i["default"];break;case y["default"].enemyToPerfab.boss_maowanghou:this.needAddScript=n["default"];break;case y["default"].enemyToPerfab.boss_dashuren:this.needAddScript=o["default"];break;case y["default"].enemyToPerfab.boss_shitoujuren:this.needAddScript=l["default"];break;case y["default"].enemyToPerfab.boss_bingqilinzuhe:this.needAddScript=r["default"];break;case y["default"].enemyToPerfab.boss_bingqilinzuhe:this.needAddScript=r["default"];break;case y["default"].enemyToPerfab.boss_bingtouxiang:this.needAddScript=h["default"];break;case y["default"].enemyToPerfab.boss_jibaobao:this.needAddScript=c["default"];break;case y["default"].enemyToPerfab.boss_zhangyunvhuang:this.needAddScript=u["default"]}},e}();a["default"]=b},{"../Boss/bingqilinzuhe_Boss":3,"../Boss/bingtouxiang_Boss":5,"../Boss/daShuRen_Boss":7,"../Boss/jibaobao_Boss":9,"../Boss/maoWangHou_Boss":11,"../Boss/nanGuaWangZi_Boss":13,"../Boss/shitoujuren_Boss":15,"../Boss/zhangyunvhuang_Boss":17,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Tools/Tool":40}],75:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/JsonEnum"),i=e("../Tools/Tool"),n=e("./EnemyCommon"),o=e("./BulletCommon"),l=e("../playing/PlayingSceneControl"),r=e("../manage/Music"),h=e("../Data/MusicEnum"),c=h["default"].musicToUrl,u=s["default"].bossDragonAction,p=e("../manage/SkeletonTempletManage"),f=e("./FireBossBullet1"),d=e("../MediumEnemy/MediumEnemy_Move"),y=e("../manage/Playing_var"),_=function(e){function t(t){var a=e.call(this,t)||this;if(a.bulletNum=0,a.bossSkillInterval=6e3,a.cbIntervar1_boss3=50,a.cb1AngleRange=[30,150],a.cbStopInterval1_boss3=2e3,a.shotNumsCb2_boss3=18,a.shotWaveStopTime_boss3=3e3,a.shotOffset2=1,a.shotBInterval2=.5,a.skillWarnInterval_boss3=2e3,a.skillBInterval_boss3=1e3,a.bossFollowUpInterval=6e3,a.continuedTime1_boss4=5e3,a.bInterval1_boss4=200,a.continuedTime2_boss4=6e3,a.bStartInterval2_boss4=2e3,a.bInterval2_boss4=100,a.skillStopInterval1_boss4=3e3,a.skillContinued2_boss4=4e3,a.skillInterval2_boss4=100,a.nBSkillInterval=1e4,a.bCommTotal1_boss5=4,a.bCommInterval1_boss5=1500,a.bCommWave1_boss5=2e3,a.bCommBomeNum2_boss5=20,a.skillContinuedTime1_boss5=5e3,a.skillChangeStopTime1=3e3,a.skillInterval1_boss5=100,a.skillInterval2_boss5=200,a.skillContinuedTime2_boss5=5e3,a.skillChangeStopTime2=5e3,a.commBInterval_boss1=150,a.commBulletInterval_boss1=6e3,a.stopShotTime=2500,a.isCircleing=!0,a.circleNums=20,a.commBShotNums=6,a.commBStopNums=4,a.canCreateSkill1_boss1=!0,a.shotNumsSkill1_boss1=18,a.oneLieSkillInterval1_boss1=50,a.skillInterval2_boss1=6e3,a.skillBNum2_boss1=3,a.commBulletInterval=4e3,a.commBulletNumOne=60,a.commBulletWaveInterval=3e3,a.skillInterval=5e3,a.ionPaoInterval=1e3,a.ionPaoLifeTime=3e3,a.ionPaoSpeed1=10,a.ionPaoSpeed2=4,a.createEnemy(),a.way&&2!==a.e_type){var i=a.enmeySprite.getComponent(d["default"]);return i||a.enmeySprite.addComponent(d["default"]),a}return Laya.Browser.window.markBoss=a.enmeySprite,2===a.e_type&&(a.bossSkillInterval="Boss4"===a.nick||"Boss5"===a.nick?8e3:6e3,a.bulletObj=new o["default"](s["default"].BulletType.boss,a.enemyId,a.isWFboss),a.bossSK=a.enmeySprite.getChildByName(a.nick),Laya.Browser.window.bossSK=a.bossSK,a.bossSK.on(Laya.Event.STOPPED,a,a.SK_listener,[Laya.Event.STOPPED]),a.bossSK.on(Laya.Event.LABEL,a,a.SK_action),a.createWarning()),a}return __extends(t,e),t.prototype.createWarning=function(){var e=this,t=Laya.loader.getRes("prefab/Boss_warning.prefab"),a=t.create();Laya.stage.addChild(a),this.setWarningMusic(),Laya.timer.once(2300,this,function(){Laya.Tween.to(e.enmeySprite,{x:e.enmeySprite.x,y:e.bossStartY},1100,null,Laya.Handler.create(e,e.bossAtatck),null,!0,!0)})},t.prototype.setWarningMusic=function(){r["default"].getInstance().playSound(c.warning),r["default"].getInstance().playMusic(c.warning_bg)},t.prototype.createEnemy=function(){this.enmeySprite=Laya.Pool.getItemByCreateFun(this.nick,this.res.create,this.res),Laya.Tween.clearAll(this.enmeySprite),Laya.timer.clearAll(this.enmeySprite);var e=this.enmeySprite.getChildByName("EnemySK"),t=0,a=0;if(2!==this.e_type){var s=void 0;if(e){var n=e.templet._skBufferUrl.split("/")[1].split(".")[0];n!==this.nick?(Laya.Pool.recover("sk_"+n,e.removeSelf()),s=this.createMonsterAddChild("sk_"+n)):s=e}else s=this.createMonsterAddChild("sk_"+this.nick);s.pos(80.5,65.5),s.name="EnemySK",this.progress_di=this.enmeySprite.getChildByName("hp_di"),this.progress_di.y=136,this.progress_bar=this.enmeySprite.getChildByName("hp_bar"),this.progress_bar.y=136,t=165,a=148,this.changeHpProgress(this.hp),this.enmeySprite.visible=!1}else e&&e.removeSelf(),this.boxCollider=this.enmeySprite.getComponent(Laya.BoxCollider),t=this.boxCollider.width,a=this.boxCollider.height,this.createBossHp(),2===this.e_type?this.enmeySprite.scale(this.scaleXY.x,this.scaleXY.y):this.enmeySprite.scale(.9,.9);this.enmeySprite.vars_||(this.enmeySprite.vars_={}),this.mark_w=t,this.mark_h=a,this.enmeySprite.vars_.propertyObj=this;var o=i["default"].random(0,Laya.stage.width-t-5),l=i["default"].random(-30-a,-5-a);this.enmeySprite.pos(o,l)},t.prototype.createMonsterAddChild=function(e){var t=p["default"].getInstance().templets[this.pic],a=t.buildArmature(0);return a.play(0,!0),this.enmeySprite.addChild(a),a},t.prototype.destroyEnemy=function(){this.enmeySprite.destroy()},t.prototype.createBossHp=function(e){var t=Laya.loader.getRes("prefab/Boss_hp.json");this.bossHpObj=t.create(),this.bossHpObj.name="Boss_hp";var a=this.bossHpObj.getChildByName("progress_pic");this.boss_hpMask=a.mask,this.bossHpObj.x=this.boxCollider.width/2-a.width/2,this.bossHpObj.y=this.boxCollider.height,this.changeHpProgress(this.hp),this.bossHpObj.zOrder=5,this.enmeySprite.addChild(this.bossHpObj)},t.prototype.changeHpProgress=function(e){if(2!==this.e_type){var t=this.progress_bar.mask;t.graphics.clear(),t.graphics.drawRect(0,-5.5,104*((e||this.hp)/this.startHp),20,"##ff0000")}else this.boss_hpMask&&(this.boss_hpMask.graphics.clear(),this.boss_hpMask.graphics.drawRect(0,0,321*((e||this.hp)/this.startHp),52,"#ff0000"))},t.prototype.setHpBarShowStatus=function(e){2!==this.e_type?(this.progress_bar.visible=e,this.progress_di.visible=e):this.bossHpObj.visible=e},t.prototype.bossMove=function(){2===this.e_type&&(this.tween=Laya.Tween.to(this.enmeySprite,{x:i["default"].random(0,Laya.stage.width-this.enmeySprite.width/2),y:Laya.stage.height/3-this.enmeySprite.height/2
},i["default"].random(2e3,5e3),null,Laya.Handler.create(this,this.bossAtatck),null,!0))},t.prototype.bossAtatck=function(){return this.isWFboss?void this.enmeySprite.addComponent(this.needAddScript):(this.bossStatus="stand",this.nick===s["default"].enemyToPerfab.boss2&&this.initVarBoss2(),this.nick===s["default"].enemyToPerfab.boss1&&this.initVarBoss1(),this.nick===s["default"].enemyToPerfab.boss3&&this.initVarBoss3(),this.nick===s["default"].enemyToPerfab.boss4&&this.initVarBoss4(),this.nick===s["default"].enemyToPerfab.boss5&&this.initVarBoss5(),this.moveVarInit(),Laya.Tween.clearTween(this.enmeySprite),Laya.timer.frameLoop(2,this,this.onBossUpdate),this.createBulletTime=Date.now(),this.bossMoveTime=Date.now(),void(this.bossSkillTime=Date.now()))},t.prototype.initVarBoss2=function(){this.triggerSkill=!1,this.commBulletWave=Date.now(),this.ionPaoTime=Date.now(),this.skillBulletTime=Date.now(),this.commBulletTime=Date.now(),this.bossStatus="coolSkill"},t.prototype.initVarBoss3=function(){this.triggerSkill=!1,this.cbStatus1_boss3="shot",this.cbStatus2_boss3="shot",this.cbTime1_boss3=Date.now(),this.shotBTime_boss3=this.cbTime1_boss3,this.cbShotIndex1_boss3=0,this.shotNumInWave_boss3=0,this.shotWave2_boss3=0,this.bossStatus="endFollowUp",this.isWaring_boss3=!0,this.skillWarnTime_boss3=this.cbTime1_boss3},t.prototype.initVarBoss4=function(){this.triggerSkill=!1,this.triggerNBSkill=!1,this.btime1_boss4=Date.now(),this.bShotTime1_boss4=Date.now(),this.bCommStatus="b1",this.bShotLeft1=!1,this.bShotIndex1=0,this.isBSkill1=!0,this.isBSkill2=!1,this.skillStartTime_boss4=Date.now(),this.skillNum1_boss4=0,this.skillBStartTime_boss4=Date.now(),this.bShotIndex2=0},t.prototype.initVarBoss5=function(){this.triggerSkill=!1,this.triggerNBSkill=!1,this.isBSkill1=!0,this.isBSkill2=!1,this.skillStartTime_boss5=Date.now(),this.skillLastTime_boss5=this.skillStartTime_boss5,this.bCommStatus="b1",this.bCommWaveIndex1=0,this.waveLastTime_boss5=this.skillStartTime_boss5},t.prototype.initVarBoss1=function(){this.triggerSkill=!1,this.commBStatus_boss1="shoting",this.commBulletTime_boss1=Date.now(),this.isCircleing=!0,this.commBulletContinueTime_boss1=null,this.nowBulletPlace=0,this.isCommonBStop=!1,this.commBIndex=0,this.commBStopIndex=0,this.canCreateSkill1_boss1=!1,this.timeLastSkill1_boss1=Date.now(),this.nowNumOneLieSkill1_boss1=0,this.timeLastSkill2_boss1=Date.now(),this.obj_bossBSkill1=[],this.bSkillObj1_boss1=[],this.initControlBNumByOnePlaceVar()},t.prototype.initControlBNumByOnePlaceVar=function(){this.controlBNumByOnePlace=[];var e=0;for(e;e<this.circleNums;e++)this.controlBNumByOnePlace[e]=0},t.prototype.onBossUpdate=function(){if("endless"!==y["default"].getInstance().gameModel||!l["default"].instance.isGamePause)switch(this.nick){case s["default"].enemyToPerfab.boss2:this.move_boss2(),this.attack_boss2();break;case s["default"].enemyToPerfab.boss1:this.move_boss2(),this.attack_boss1();break;case s["default"].enemyToPerfab.boss3:this.move_boss2(),this.attack_boss3();break;case s["default"].enemyToPerfab.boss4:this.move_boss2(),this.attack_boss4();break;case s["default"].enemyToPerfab.boss5:this.move_boss2(),this.attack_boss5()}},t.prototype.setBossSkill_boss1=function(){Laya.timer.once(200,this,this.setSkill_createSpore)},t.prototype.setBossSkill_boss3=function(){Laya.Pool.getItemByCreateFun("focusRole",this.focusRole,this),Laya.Tween.to(this.enmeySprite,{x:l["default"].instance.roleObj.x,y:l["default"].instance.roleObj.y},1900,null,Laya.Handler.create(this,this.bossMoveEnd),500,!0)},t.prototype.focusRole=function(){var e=new Laya.Skeleton;return e.url="dragonbones/miaozhun.sk",e.pos(60,-50),e},t.prototype.setBossSkill_boss4=function(){var e,t=this.bulletObj,a=0,n=4;for(a;n>a;a++){var o=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);0===a&&(e=this.enmeySprite.x+186-25-50<0?0:this.enmeySprite.x+186+25+50>Laya.stage.width?Laya.stage.width-50-25-25-50:this.enmeySprite.x+186-25-50),o.pos(e+100*a,this.enmeySprite.y+207+10),o.vars_||(o.vars_={}),o.vars_.propertyObj=i["default"].copydata(t),o.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,o.vars_.propertyObj.fromNick=this.nick,o.getChildByName("img").visible=!1;var r=o.getChildByName("sk");r.visible=!0,r.url="dragonbones/bingzhui.sk",l["default"].instance.bulletParent_enemy.addChild(o)}},t.prototype.setBossSkill_boss5=function(){var e=[97,179,258,344,258,179,97],t=this.bulletObj,a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);a.pos(this.enmeySprite.x+e[this.createBulletPlaceByBoss5],this.enmeySprite.y+298),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(t),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,a.vars_.propertyObj.fromNick=this.nick,a.getChildByName("img").visible=!1;var n=a.getChildByName("sk");n.url="dragonbones/huoqiu.sk",n.visible=!0,l["default"].instance.bulletParent_enemy.addChild(a),this.createBulletPlaceByBoss5++,e.length===this.createBulletPlaceByBoss5&&(Laya.timer.once(1e3,this,this.skillEnd),this.playAction(s["default"].bossDragonAction.stand))},t.prototype.setSkill_createSpore=function(){Laya.timer.clear(this,this.setSkill_createSpore);var e=this.bulletObj,t=1,a={1:116,2:186,3:256};for(t;4>t;t++){var n=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);n.pos(this.enmeySprite.x+a[t],this.enmeySprite.y+207+70+90),n.vars_||(n.vars_={}),n.vars_.propertyObj=i["default"].copydata(e),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.display,n.vars_.propertyObj.fromNick=this.nick,n.getChildByName("img").visible=!1;var o=n.getChildByName("sk");o.visible=!1,o.load("dragonbones/baozi.sk",Laya.Handler.create(this,function(e){e.visible=!0},[o])),l["default"].instance.bulletParent_enemy.addChild(n)}},t.prototype.setBossSkill=function(){var e=this.bulletObj,t=1;for(t;3>=t;t++){var a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);a.pos(this.enmeySprite.x+186,this.enmeySprite.y+207),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,a.vars_.propertyObj.fromNick=this.nick,a.getChildByName("img").visible=!1;var n=a.getChildByName("sk");n.visible=!0,n.url="dragonbones/xuanfeng.sk",l["default"].instance.bulletParent_enemy.addChild(a)}},t.prototype.bossMoveEnd=function(){this.bossStatus="stand"},t.prototype.skillEnd=function(){this.bossStatus="stand"},t.prototype.SK_listener=function(e){switch(e){case Laya.Event.STOPPED:switch(this.nick){case s["default"].enemyToPerfab.boss2:"skillPre"==this.bossStatus?(this.createSkill_b2(),this.bossSK.play(u.stand,!0),this.bossStatus="skill",this.skillBulletTime=Date.now(),this.playAction(u.stand)):this.playAction(u.stand);break;case s["default"].enemyToPerfab.boss1:this.playAction(u.attack);break;case s["default"].enemyToPerfab.boss3:this.playAction(u.attack);break;case s["default"].enemyToPerfab.boss4:this.playAction(u.stand);break;case s["default"].enemyToPerfab.boss5:this.playAction(u.attack)}return}},t.prototype.SK_action=function(e){switch(e.name){case"commshot2":console.error("创建boss1普通子弹2"),this.createCommBullet2_b1();break;case"rightshot":this.calSkillNum_boss4();break;case"leftshot":this.calSkillNum_boss4()}},t.prototype.calSkillNum_boss4=function(){this.attackSkill_boss4(),2==++this.skillNum1_boss4&&(this.skillStartTime_boss4=Date.now(),this.skillBStartTime_boss4=this.skillStartTime_boss4,this.isBSkill2=!0),4===this.skillNum1_boss4&&(this.isBSkill1=!1,this.skillNum1_boss4=0,this.playAction(u.attack),this.skillStopTime_boss4=Date.now())},t.prototype.createBullet=function(){var e=this.bulletObj,t=1;for(t;3>=t;t++){var a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);a.pos(this.enmeySprite.x+186,this.enmeySprite.y+207),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,a.vars_.propertyObj.directType=t,a.vars_.propertyObj.fromNick=this.nick;var n=a.getChildByName("sk");n.visible=!1,a.getChildByName("img").visible=!0,l["default"].instance.bulletParent_enemy.addChild(a)}},t.prototype.createBullet_boss3=function(){var e=this.bulletObj,t=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);t.pos(this.enmeySprite.x+108,this.enmeySprite.y+309),t.vars_||(t.vars_={}),t.vars_.propertyObj=i["default"].copydata(e),t.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,t.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParent_enemy.addChild(t)},t.prototype.createBullet_boss4=function(){void 0===this.bulletPosInBoss4||2===this.bulletPosInBoss4?this.bulletPosInBoss4=1:this.bulletPosInBoss4=2;var e={1:-70,2:460},t=this.bulletObj,a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);a.pos(this.enmeySprite.x+e[this.bulletPosInBoss4],this.enmeySprite.y+288),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(t),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,a.vars_.propertyObj.fromNick=this.nick,a.getChildByName("img").visible=!0;var n=a.getChildByName("sk");n.stop(),n.visible=!1,l["default"].instance.bulletParent_enemy.addChild(a)},t.prototype.createBullet_boss5=function(){var e=4,t=[-178,-78,520,620],a=0;for(a;e>a;a++){var n=this.bulletObj,o=Laya.Pool.getItemByCreateFun(n.nick,n.res.create,n.res);o.pos(this.enmeySprite.x+t[a],this.enmeySprite.y+210),o.vars_||(o.vars_={}),o.vars_.propertyObj=i["default"].copydata(n),o.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,o.vars_.propertyObj.fromNick=this.nick,o.vars_.propertyObj.directType=a+1,o.getChildByName("img").visible=!0;var r=o.getChildByName("sk");r.stop(),r.visible=!1,l["default"].instance.bulletParent_enemy.addChild(o)}},t.prototype.createBullet_boss1=function(){var e=this.bulletObj,t=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);t.pos(this.enmeySprite.x+186,this.enmeySprite.y+207),t.vars_||(t.vars_={}),t.vars_.propertyObj=i["default"].copydata(e),t.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,t.vars_.propertyObj.fromNick=this.nick,t.getChildByName("img").visible=!0;var a=t.getChildByName("sk");a.stop(),a.visible=!1,l["default"].instance.bulletParent_enemy.addChild(t)},t.prototype.playAction=function(e){switch(e){case u.stand:this.bossSK.templet&&this.bossSK.play(e,!0);break;case u.attacked:this.nick!==s["default"].enemyToPerfab.boss4&&"skillPre"!==this.bossStatus&&this.bossSK.templet&&this.bossSK.play(e,!1,!1);break;case u.attack:this.bossSK.play(e,!0);break;case u.skill:var t=this.nick===s["default"].enemyToPerfab.boss5;this.bossSK.play(e,t,!1),t&&(this.bossStatus="skill",this.skillDateNow=Date.now(),this.createBulletPlaceByBoss5=0,this.setBossSkill_boss5());case u.skill1:this.bossSK.play(e,!0)}},t.prototype.moveVarInit=function(){this.isMoving=i.tools.random(0,1)?!0:!1,this.statusContinueTime=Date.now(),this.statusContinueInterval=3,this.nowBossDirector=this.enmeySprite.x>195?"left":"right"},t.prototype.move_boss2=function(){(this.nick!==s["default"].enemyToPerfab.boss3||"followUping"!==this.bossStatus)&&(this.isMoving?Date.now()-this.statusContinueTime>=1e3*this.statusContinueInterval?(this.isMoving=!1,this.statusContinueTime=Date.now(),this.statusContinueInterval=i.tools.random(2,5)):"left"===this.nowBossDirector?(this.enmeySprite.x-=1.5,this.enmeySprite.x<this.moveAreaPos.x1&&(this.isMoving=!1,this.statusContinueTime=Date.now(),this.statusContinueInterval=i.tools.random(2,5))):(this.enmeySprite.x+=1.5,this.enmeySprite.x>this.moveAreaPos.x2&&(this.isMoving=!1,this.statusContinueTime=Date.now(),this.statusContinueInterval=i.tools.random(2,5))):Date.now()-this.statusContinueTime>=1e3*this.statusContinueInterval&&(this.isMoving=!0,this.statusContinueTime=Date.now(),this.statusContinueInterval=i.tools.random(4,10),this.nowBossDirector=this.enmeySprite.x>195?"left":"right"))},t.prototype.attack_boss2=function(){!this.triggerSkill&&this.hp/this.startHp<.5&&(this.triggerSkill=!0,"coolSkill"===this.bossStatus),this.triggerSkill?this.attackSkill_boss2():this.attackComm_boss2()},t.prototype.attackComm_boss2=function(){if(Date.now()-this.commBulletTime>=this.commBulletInterval){if("skillPre"===this.bossStatus)return;this.commBulletTime=Date.now(),this.createCommBullet_b2()}},t.prototype.attackSkill_boss2=function(){"coolSkill"===this.bossStatus&&Date.now()-this.skillBulletTime>=this.skillInterval?(this.bossStatus="skillPre",this.bossSK.play(u.skill,!1),this.commBulletTime=Date.now()):("skill"===this.bossStatus&&(this.bossStatus="coolSkill"),"coolSkill"===this.bossStatus&&(Date.now()-this.ionPaoTime>=this.ionPaoInterval&&(this.ionPaoTime=Date.now(),this.createIon_b2()),this.attackComm_boss2()))},t.prototype.createIon_b2=function(){var e=this.bulletObj,t=Number(e.bconfigProperty(3,"scale")),a=Number(e.bconfigProperty(3,"layer")),n=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);n.pos(this.enmeySprite.x+186,this.enmeySprite.y+207),n.vars_||(n.vars_={}),n.vars_.propertyObj=i["default"].copydata(e),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.ion,n.vars_.propertyObj.fromNick=this.nick,n.getChildAt(0).visible=!1,p["default"].getInstance().play(s["default"].templetType.other,"pao","boss2_pao",!0,{x:25.5,y:26},n,null,"sk"),n.scale(t,t),1===a?l["default"].instance.bulletParentUp_enmey.addChild(n):l["default"].instance.bulletParent_enemy.addChild(n)},t.prototype.createSkill_b2=function(){var e=0,t=this.bulletObj,a=Number(t.bconfigProperty(2,"scale")),n=Number(t.bconfigProperty(2,"layer"));for(e;3>e;e++){var o=i.tools.random(30,150),r=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);r.pos(this.enmeySprite.x+186,this.enmeySprite.y+207),r.vars_||(r.vars_={}),r.vars_.propertyObj=i["default"].copydata(t),r.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,r.vars_.propertyObj.directType=o,r.vars_.propertyObj.fromNick=this.nick,r.getChildByName("img").visible=!1,p["default"].getInstance().play(s["default"].templetType.other,"xuanfeng","xuanfeng",!0,{x:102,y:186},r,null,"sk"),r.scale(a,a),1===n?l["default"].instance.bulletParentUp_enmey.addChild(r):l["default"].instance.bulletParent_enemy.addChild(r)}},t.prototype.createCommBullet_b2=function(){var e=this.bulletObj,t=e.bconfigProperty(1,"position");t=t.split("#");var a={x:Number(t[0].split("|")[0]),y:Number(t[0].split("|")[1])},n={x:Number(t[1].split("|")[0]),y:Number(t[1].split("|")[1])},o=0;for(o;o<this.commBulletNumOne;o++){var r=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);30>o?r.pos(this.enmeySprite.x+a.x,this.enmeySprite.y+a.y):r.pos(this.enmeySprite.x+n.x,this.enmeySprite.y+n.y),r.vars_||(r.vars_={}),r.vars_.propertyObj=i["default"].copydata(e),r.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,r.vars_.propertyObj.directType=30>o?o:o-30,r.getChildByName("img").visible=!0,r.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParent_enemy.addChild(r)}},t.prototype.attack_boss1=function(){!this.triggerSkill&&this.hp/this.startHp<.5&&(this.triggerSkill=!0,"coolSkill"===this.bossStatus),this.triggerSkill?(this.attackSkill_boss1(),this.createBSkill2_boss1(),this.attackComm_boss1()):this.attackComm_boss1()},t.prototype.attackComm_boss1=function(){this.commBulletContinueTime_boss1||(this.commBulletContinueTime_boss1=Date.now()),"shoting"===this.commBStatus_boss1&&Date.now()-this.commBulletTime_boss1>=this.commBInterval_boss1&&this.controlBNumByOnePlace[this.circleNums-1]<6?(this.commBulletTime_boss1=Date.now(),this.createCommBullet_b1()):("shoting"===this.commBStatus_boss1&&this.controlBNumByOnePlace[this.circleNums-1]>=6&&(this.commBStatus_boss1="cooling",this.commBulletContinueTime_boss1=Date.now()),"cooling"===this.commBStatus_boss1&&Date.now()-this.commBulletContinueTime_boss1>=this.stopShotTime&&(this.commBStatus_boss1="shoting",this.commBulletContinueTime_boss1=Date.now(),this.isCircleing=!0,this.nowBulletPlace=0,this.initControlBNumByOnePlaceVar()))},t.prototype.createCommBullet_b1=function(){var e=this.bulletObj,t=this.isCircleing?this.nowBulletPlace:this.circleNums,a=0;for(a;t>=a;a++)if(!(this.controlBNumByOnePlace[a]>=6)){this.controlBNumByOnePlace[a]++;var n=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);n.pos(this.enmeySprite.x+162,this.enmeySprite.y+152),n.vars_||(n.vars_={}),n.vars_.propertyObj=i["default"].copydata(e),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common;var o=360-360/this.circleNums*a+180-2*(this.controlBNumByOnePlace[a]-1);n.vars_.propertyObj.directType=o>360?o-360:o,n.rotation=n.vars_.propertyObj.directType-90;var r=n.getChildByName("img");r.skin="face/花种小子弹.png",r.visible=!0,n.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParent_enemy.addChild(n)}this.isCircleing&&++this.nowBulletPlace>=this.circleNums&&(this.isCircleing=!1)},t.prototype.createCommBullet2_b1=function(){if(this.isCommonBStop)++this.commBStopIndex>this.commBStopNums&&(this.isCommonBStop=!1,this.commBIndex=0);else{var e=this.bulletObj,t=i.tools.random(45,135),a=i.tools.speedXYByAngle(t,190),n=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);n.pos(this.enmeySprite.x+a.x,this.enmeySprite.y+a.y),n.vars_||(n.vars_={}),n.vars_.propertyObj=i["default"].copydata(e),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common2,n.vars_.propertyObj.directType=t,n.getChildByName("img").visible=!1,p["default"].getInstance().play(s["default"].templetType.other,"pao","boss2_pao",!0,{x:25.5,y:26},n,null,"sk"),n.scale(2,2),n.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParentUp_enmey.addChild(n),++this.commBIndex>=this.commBShotNums&&(this.isCommonBStop=!0,this.commBStopIndex=0)}},t.prototype.attackSkill_boss1=function(){if(this.canCreateSkill1_boss1){if(Date.now()-this.timeLastSkill1_boss1>=this.oneLieSkillInterval1_boss1){this.timeLastSkill1_boss1=Date.now();var e=0,t=this.bulletObj;for(e;e<this.shotNumsSkill1_boss1;e++){var a=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);a.pos(this.enmeySprite.x+162,this.enmeySprite.y+152),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(t),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,a.vars_.propertyObj.directType=360/this.shotNumsSkill1_boss1*e-.5*this.nowNumOneLieSkill1_boss1,a.getChildByName("img").visible=!1,a.vars_.propertyObj.fromNick=this.nick,this.obj_bossBSkill1.push(a),p["default"].getInstance().play(s["default"].templetType.other,"zd","zd",!0,{x:45,y:44},a,null,"sk"),l["default"].instance.bulletParent_enemy.addChild(a)}++this.nowNumOneLieSkill1_boss1>=5&&(this.canCreateSkill1_boss1=!1)}}else{var n=!0,e=0;for(e;e<this.obj_bossBSkill1.length;e++)if(this.obj_bossBSkill1[e].parent&&this.obj_bossBSkill1[e].vars_.propertyObj.bossBulletType===s["default"].bossBulletType.skill){n=!1;break}n&&(this.canCreateSkill1_boss1=!0,this.nowNumOneLieSkill1_boss1=0,this.obj_bossBSkill1=[])}},t.prototype.createBSkill2_boss1=function(){if(Date.now()-this.timeLastSkill2_boss1>=this.skillInterval2_boss1){this.timeLastSkill2_boss1=Date.now();var e=this.bulletObj,t=1,a={1:{x:223,y:210},2:{x:156,y:186},3:{x:107,y:177}};for(t;4>t;t++){var n=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);n.pos(this.enmeySprite.x+a[t].x,this.enmeySprite.y+a[t].y),n.vars_||(n.vars_={}),n.vars_.propertyObj=i["default"].copydata(e),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.display,n.vars_.propertyObj.fromNick=this.nick,n.getChildByName("img").skin="face/花种子弹.png",n.rotation=-90+45*t,n.vars_.propertyObj.directType=45*t,this.bSkillObj1_boss1.push(n),l["default"].instance.bulletParent_enemy.addChild(n)}Laya.timer.once(1e3,this,this.removeBaoZiFromParent)}},t.prototype.attackSkill2_boss1=function(e){var t=0,a=this.bulletObj;for(t;4>t;t++){var n=Laya.Pool.getItemByCreateFun(a.nick,a.res.create,a.res);n.pos(e.x,e.y),n.vars_||(n.vars_={}),n.vars_.propertyObj=i["default"].copydata(a),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill2,n.vars_.propertyObj.directType=45+90*t,n.vars_.propertyObj.fromNick=this.nick;var o=n.getChildByName("img");o.skin="face/花种分裂子弹.png",o.visible=!0,n.rotation=45+90*t,this.bSkillObj1_boss1.push(n),l["default"].instance.bulletParent_enemy.addChild(n)}},t.prototype.removeBaoZiFromParent=function(){if(Array.isArray(this.bSkillObj1_boss1)){Laya.timer.clear(this,this.removeBaoZiFromParent);var e=[],t=0;for(t;t<this.bSkillObj1_boss1.length;t++)e.push(this.bSkillObj1_boss1[t]);if(Array.isArray(e)){var a=0;for(a;a<e.length;a++)p["default"].getInstance().play(s["default"].templetType.other,"baozha","baozi",!1,{x:e[a].x,y:e[a].y},Laya.stage,null,"sk"),this.attackSkill2_boss1({x:e[a].x,y:e[a].y}),e[a].removeSelf();this.bSkillObj1_boss1=[]}}},t.prototype.attack_boss3=function(){!this.triggerSkill&&this.hp/this.startHp<.5&&(this.triggerSkill=!0,"endFollowUp"===this.bossStatus),this.triggerSkill&&("endFollowUp"===this.bossStatus?this.isWaring_boss3?this.warnSK&&Date.now()-this.skillWarnTime_boss3>=this.skillWarnInterval_boss3?(this.warnSK.removeSelf(),Laya.Pool.recover("focusRole",this.warnSK),this.warnSK=null,this.isWaring_boss3=!1,this.skillWarnTime_boss3=Date.now(),this.skillShotndex_boss3=0,this.skillShotTime_boss3=0):this.warnSK||(this.warnSK=Laya.Pool.getItemByCreateFun("focusRole",this.focusRole,this),this.warnSK.name="focusRole",l["default"].instance.roleObj.addChild(this.warnSK),this.skillWarnTime_boss3=Date.now()):Date.now()-this.skillShotTime_boss3>=this.skillBInterval_boss3&&(this.attackSkill_boss3(),this.skillShotTime_boss3=Date.now(),this.skillWarnTime_boss3=Date.now()):"followUping"===this.bossStatus?Date.now()-this.bossFollowUpTime>=this.bossFollowUpInterval?this.bossStatus="endFollowUping":this.followUpBoss3():this.followUpBackBoss3()),"endFollowUp"===this.bossStatus&&("shot"===this.cbStatus1_boss3?Date.now()-this.cbTime1_boss3>=this.cbIntervar1_boss3&&(this.attackComm_boss3(),this.cbTime1_boss3=Date.now()):Date.now()-this.cbTime1_boss3>=this.cbStopInterval1_boss3&&(this.cbStatus1_boss3="shot",this.cbShotIndex1_boss3=0),"shot"===this.cbStatus2_boss3?Date.now()-this.shotBTime_boss3>=this.shotBInterval2&&(this.shotBTime_boss3=Date.now(),this.attackComm2_boss3()):Date.now()-this.shotBTime_boss3>=(1===this.shotWave2_boss3?1e3:this.shotWaveStopTime_boss3)&&(this.cbStatus2_boss3="shot"))},t.prototype.attack_boss5=function(){!this.triggerSkill&&this.hp/this.startHp<.5&&(this.triggerSkill=!0,this.skillStartTime_boss5=Date.now()),!this.triggerNBSkill&&this.hp/this.startHp<.2,this.triggerNBSkill||(this.triggerSkill?(this.isBSkill2?Date.now()-this.skillStartTime_boss5<this.skillContinuedTime2_boss5?Date.now()-this.skillLastTime_boss5>=this.skillInterval2_boss5&&(this.skillLastTime_boss5=Date.now(),this.attackSkill2_boss5(),this.skillStopStartTime=Date.now()):Date.now()-this.skillStopStartTime>=this.skillChangeStopTime2&&(this.isBSkill2=!1,this.skillStartTime_boss5=Date.now()):Date.now()-this.skillStartTime_boss5<this.skillContinuedTime1_boss5?Date.now()-this.skillLastTime_boss5>=this.skillInterval1_boss5&&(this.skillLastTime_boss5=Date.now(),this.attackSkill_boss5(),this.skillStopStartTime=Date.now()):Date.now()-this.skillStopStartTime>=this.skillChangeStopTime1&&(this.isBSkill2=!0,this.skillStartTime_boss5=Date.now()),this.attackJudge_boss5()):this.attackJudge_boss5())},t.prototype.attack_boss4=function(){!this.triggerSkill&&this.hp/this.startHp<.5&&(this.triggerSkill=!0),!this.triggerNBSkill&&this.hp/this.startHp<.2,this.triggerNBSkill||(this.triggerSkill?(this.isBSkill2&&Date.now()-this.skillStartTime_boss4<=this.skillContinued2_boss4&&Date.now()-this.skillBStartTime_boss4>=this.skillInterval2_boss4&&(this.skillBStartTime_boss4=Date.now(),this.attackSkill2_boss4()),this.isBSkill1?0!==this.skillNum1_boss4||this.needChangeAni||(this.needChangeAni=!0,this.changeAni_boss4()):Date.now()-this.skillStopTime_boss4>this.skillStopInterval1_boss4&&(this.isBSkill1=!0,0===this.skillNum1_boss4,this.needChangeAni=null),this.attackJudge_boss4()):this.attackJudge_boss4())},t.prototype.changeAni_boss4=function(){this.playAction(u.skill1)},t.prototype.attackJudge_boss5=function(){"b1"===this.bCommStatus?this.bCommWaveIndex1<8?Date.now()-this.waveLastTime_boss5>=this.bCommInterval1_boss5&&(this.waveLastTime_boss5=Date.now(),this.attackComm_boss5(),this.bCommWaveIndex1+=2):(this.bCommWaveIndex1=0,this.bCommStatus="b2",this.canB2_boss5=!0):this.canB2_boss5&&(this.canB2_boss5=!1,this.attackComm2_boss5(),this.waveLastTime_boss5=Date.now())},t.prototype.attackSkill_boss5=function(){var e={0:{x:164,y:412},1:{x:212.1,y:412},2:{x:265.5,y:412}},t=this.bulletObj,a=0;for(a;1>a;a++){var n=Laya.Pool.getItemByCreateFun(t.nick,t.res.create,t.res);n.vars_||(n.vars_={}),n.pos(this.enmeySprite.x+e[a].x,this.enmeySprite.y+e[a].x),n.vars_.propertyObj=i["default"].copydata(t),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,n.vars_.propertyObj.directType=90,n.vars_.propertyObj.fromNick=this.nick,p["default"].getInstance().play(s["default"].templetType.other,"huozhu","boss5texiao",!0,{x:25.5,y:56},n,null,"sk"),n.scale(2.5,2.5),l["default"].instance.bulletParent_enemy.addChild(n)}},t.prototype.attackSkill2_boss5=function(){var e=this.bulletObj,t={x:i.tools.random(86,375),y:-100},a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);a.vars_||(a.vars_={}),a.pos(this.enmeySprite.x+t.x,this.enmeySprite.y+t.y),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill2;var n=i.tools.random(210,330),o=i.tools.speedLabelByAngle(n,e.defaultSpeedY,.3);a.vars_.propertyObj.directType={x:o.x,y:o.y},a.vars_.propertyObj.fromNick=this.nick,p["default"].getInstance().play(s["default"].templetType.other,"huoqiu","boss5texiao",!0,{x:25.5,y:56},a,null,"sk"),l["default"].instance.bulletParent_enemy.addChild(a)},t.prototype.attackComm2_boss5=function(){var e=this.bulletObj,t=0;for(t;2>t;t++){var a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);a.vars_||(a.vars_={}),a.pos(this.enmeySprite.x+229,this.enmeySprite.y+410),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common2,a.vars_.propertyObj.directType=i.tools.random(30,150),a.vars_.propertyObj.fromNick=this.nick,a.vars_.propertyObj.createSpreadB_boss5=this.createSpreadB_boss5,a.vars_.propertyObj.functionThis=this,l["default"].instance.bulletParent_enemy.addChild(a)}},t.prototype.createSpreadB_boss5=function(e,t){var a=this.bulletObj,n=0;for(n;n<this.bCommBomeNum2_boss5;n++){var o=Laya.Pool.getItemByCreateFun(a.nick,a.res.create,a.res);o.vars_||(o.vars_={}),o.pos(e,t),o.vars_.propertyObj=i["default"].copydata(a),o.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common2,o.vars_.propertyObj.isBomb=!0,o.vars_.propertyObj.directType=360/this.bCommBomeNum2_boss5*n,o.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParent_enemy.addChild(o)}"b1"!==this.bCommStatus&&(this.bCommStatus="b1")},t.prototype.fireBossCreateB1=function(){var e=new f["default"];return e},t.prototype.attackComm_boss5=function(){var e=this.bulletObj,t=1,a=60,n=388,o=Laya.Pool.getItemByCreateFun("fireBossB1",this.fireBossCreateB1,this);for(o.pos(0,0),o.startLoop(),Laya.stage.addChild(o),t;9>t;t++){var l=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);l.vars_||(l.vars_={}),l.vars_.propertyObj=i["default"].copydata(e),l.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common;var r=0,h={x:0,y:0};t>4?(0==this.bCommWaveIndex1||4==this.bCommWaveIndex1?h.x=Laya.stage.width/6*5:h.x=Laya.stage.width/6*4,h.y=n,l.vars_.propertyObj.circleDotObj={x:h.x,y:h.y},r=270+90*(t-1-4),r>=360&&(r-=360),l.vars_.propertyObj.directType=r):(0==this.bCommWaveIndex1||4==this.bCommWaveIndex1?h.x=Laya.stage.width/6:h.x=Laya.stage.width/6*2,h.y=n,l.vars_.propertyObj.circleDotObj={x:h.x,y:h.y},r=270+90*(t-1),r>=360&&(r-=360),l.vars_.propertyObj.directType=r),l.pos(h.x,h.y),l.vars_.propertyObj.createOneBullet1_boss5=this.createOneBullet1_boss5,l.vars_.propertyObj.functionThis=this,l.vars_.propertyObj.fromNick=this.nick,l.vars_.propertyObj.canCreateChild=!1,l.vars_.propertyObj.createIndex=0,l.vars_.propertyObj.nowStep=1,l.vars_.propertyObj.ridus=a,o.addChild(l)}},t.prototype.createOneBullet1_boss5=function(e,t,a,n,o){var l=this.bulletObj,r=Laya.Pool.getItemByCreateFun(l.nick,l.res.create,l.res);r.vars_||(r.vars_={}),r.vars_.propertyObj=i["default"].copydata(l),r.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,r.vars_.propertyObj.circleDotObj=t,r.pos(e.x,e.y),r.vars_.propertyObj.canCreateChild=!0,r.vars_.propertyObj.createIndex=n,r.vars_.propertyObj.nowStep=2,r.vars_.propertyObj.ridus=60+6*n,r.vars_.propertyObj.directType=a,r.vars_.propertyObj.createOneBullet1_boss5=this.createOneBullet1_boss5,r.vars_.propertyObj.functionThis=this,r.scaleX=Math.pow(.8,n),r.scaleY=r.scaleX,r.vars_.propertyObj.fromNick=this.nick,o.addChild(r)},t.prototype.attackJudge_boss4=function(){"b1"===this.bCommStatus?Date.now()-this.btime1_boss4<=this.continuedTime1_boss4?(this.createCloud_boss4(),Date.now()-this.bShotTime1_boss4<=this.bInterval1_boss4&&(this.bShotTime1_boss4=Date.now(),this.attackComm_boss4())):(this.cancelCloud_boss4(),this.bCommStatus="b2",this.btime2_boss4=Date.now(),this.bGasTime2_boss4=Date.now(),this.bShotIndex2=0,this.handerGas()):Date.now()-this.bGasTime2_boss4<=this.continuedTime2_boss4?Date.now()-this.bGasTime2_boss4>this.bStartInterval2_boss4&&(this.cancelHanderGas(),Date.now()-this.btime2_boss4>=this.bInterval2_boss4&&(this.btime2_boss4=Date.now(),this.attackComm2_boss4())):(this.bShotIndex1=0,this.bShotLeft1=!1,this.bCommStatus="b1",this.btime1_boss4=Date.now(),this.bShotTime1_boss4=Date.now())},t.prototype.attackSkill_boss4=function(){if(this.isBSkill1){var e=this.bulletObj,t=new Laya.Point(this.enmeySprite.x-l["default"].instance.roleObj.x,this.enmeySprite.y-l["default"].instance.roleObj.y);t.normalize();var a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);this.skillNum1_boss4%2?a.pos(this.enmeySprite.x+469,this.enmeySprite.y+298):a.pos(this.enmeySprite.x+0,this.enmeySprite.y+298),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,a.vars_.propertyObj.directType={x:t.x,y:t.y},a.vars_.propertyObj.fromNick=this.nick,a.getChildByName("img").visible=!1,p["default"].getInstance().play(s["default"].templetType.other,"bzhui","bingzhui",!0,{x:23,y:107},a,null,"sk"),l["default"].instance.bulletParent_enemy.addChild(a)}},t.prototype.attackSkill2_boss4=function(){var e=this.bulletObj,t=0;for(t;6>t;t++){var a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill2,3>t?(a.pos(this.enmeySprite.x+161,this.enmeySprite.y+126),a.vars_.propertyObj.directType=45+4*t):(a.pos(this.enmeySprite.x+293,this.enmeySprite.y+126),a.vars_.propertyObj.directType=135+4*(t-3)),a.getChildByName("img").skin="face/飞弹3_boss4.png",a.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParent_enemy.addChild(a)}},t.prototype.attackComm_boss4=function(){var e=this.bulletObj,t=7,a={x:0,y:388};this.bShotLeft1?this.bShotIndex1<0&&(this.bShotIndex1=0,this.bShotLeft1=!1):this.bShotIndex1>=t&&(this.bShotLeft1=!0,this.bShotIndex1=t-1),a.x=423/t*this.bShotIndex1;var n=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);n.pos(this.enmeySprite.x+a.x,this.enmeySprite.y+a.y),n.vars_||(n.vars_={}),n.vars_.propertyObj=i["default"].copydata(e),n.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,n.vars_.propertyObj.directType=90,n.vars_.propertyObj.fromNick=this.nick,n.getChildByName("img").skin="face/飞弹1_boss4.png",l["default"].instance.bulletParent_enemy.addChild(n),this.bShotLeft1?this.bShotIndex1--:this.bShotIndex1++},t.prototype.attackComm2_boss4=function(){var e=this.bulletObj,t={x:1.5,y:302},a={x:459,y:302},n=36;this.bShotIndex2>=n&&(this.bShotIndex2=0);var o=0;for(o;6>o;o++){var r=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);r.vars_||(r.vars_={});
var h=void 0;h=o>=3?360/n*this.bShotIndex2+120*(o-3):360/n*this.bShotIndex2+120*o,h>360&&(h-=360);var c=i.tools.speedXYByAngle(h,10);o>=3?r.pos(this.enmeySprite.x+c.x+t.x,this.enmeySprite.y+c.y+t.y):r.pos(this.enmeySprite.x+c.x+a.x,this.enmeySprite.y+c.y+a.y),r.rotation=h-90,r.vars_.propertyObj=i["default"].copydata(e),r.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common2,r.vars_.propertyObj.directType=h,r.vars_.propertyObj.fromNick=this.nick,r.getChildByName("img").skin="face/飞弹2_boss4.png",l["default"].instance.bulletParent_enemy.addChild(r)}this.bShotIndex2++},t.prototype.createCloud_boss4=function(){var e=this.enmeySprite.getChildByName("sk_cloud");e?e.visible=!0:p["default"].getInstance().play(s["default"].templetType.other,"wuqi","boos4texiao",!0,{x:248,y:402},this.enmeySprite,null,"sk_cloud")},t.prototype.cancelCloud_boss4=function(){var e=this.enmeySprite.getChildByName("sk_cloud");e.visible=!1},t.prototype.handerGas=function(){var e=this.enmeySprite.getChildByName("sk_left"),t=this.enmeySprite.getChildByName("sk_right");e?(t.visible=!0,e.visible=!0):(p["default"].getInstance().play(s["default"].templetType.other,"jq","boos4texiao",!0,{x:38.9,y:322},this.enmeySprite,null,"sk_left"),p["default"].getInstance().play(s["default"].templetType.other,"jq","boos4texiao",!0,{x:500,y:322},this.enmeySprite,null,"sk_right"))},t.prototype.cancelHanderGas=function(){var e=this.enmeySprite.getChildByName("sk_left"),t=this.enmeySprite.getChildByName("sk_right");e&&(e.visible=!1),t&&(t.visible=!1)},t.prototype.attackComm_boss3=function(){var e=this.bulletObj,t=i.tools.random(this.cb1AngleRange[0],this.cb1AngleRange[1]),a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);a.pos(this.enmeySprite.x+127,this.enmeySprite.y+301),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,a.vars_.propertyObj.directType=t,a.getChildByName("img").skin="face/泡沫子弹_大.png",a.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParent_enemy.addChild(a),++this.cbShotIndex1_boss3>=7&&(this.cbStatus1_boss3="stop",this.cbTime1_boss3=Date.now())},t.prototype.attackComm2_boss3=function(){var e=this.bulletObj,t=0;for(t;t<this.shotNumsCb2_boss3;t++){var a=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);a.pos(this.enmeySprite.x+127,this.enmeySprite.y+301),a.vars_||(a.vars_={}),a.vars_.propertyObj=i["default"].copydata(e),a.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.common,a.vars_.propertyObj.directType=360/this.shotNumsCb2_boss3*t-.8*this.shotNumInWave_boss3,a.getChildByName("img").skin="face/子弹类型2.png",a.rotation=a.vars_.propertyObj.directType-90,a.vars_.propertyObj.fromNick=this.nick,l["default"].instance.bulletParent_enemy.addChild(a)}++this.shotNumInWave_boss3>=9&&(this.shotNumInWave_boss3=0,++this.shotWave2_boss3>=2&&(this.shotWave2_boss3=0),this.cbStatus2_boss3="stop")},t.prototype.attackSkill_boss3=function(){var e=this.bulletObj,t=Laya.Pool.getItemByCreateFun(e.nick,e.res.create,e.res);t.pos(this.enmeySprite.x+127,this.enmeySprite.y+301),t.vars_||(t.vars_={}),t.vars_.propertyObj=i["default"].copydata(e),t.vars_.propertyObj.bossBulletType=s["default"].bossBulletType.skill,t.vars_.propertyObj.directType=90,t.getChildByName("img").skin="face/螃蟹子弹.png",t.rotation=0,t.vars_.propertyObj.fromNick=this.nick,t.vars_.propertyObj.setBossFollowVar=this.setBossFollowVar,t.vars_.propertyObj.functionThis=this,l["default"].instance.bulletParent_enemy.addChild(t),++this.skillShotndex_boss3>=3&&(this.isWaring_boss3=!0)},t.prototype.setBossFollowVar=function(){this.bossStatus="followUping",this.bossFollowUpTime=Date.now()},t.prototype.followUpBoss3=function(){var e=new Laya.Point(this.enmeySprite.x-l["default"].instance.roleObj.x,this.enmeySprite.y-l["default"].instance.roleObj.y);e.normalize(),this.enmeySprite.x-=this.defaultSpeedY*e.x,this.enmeySprite.y-=this.defaultSpeedY*e.y,this.judgeFollowSuccess()},t.prototype.judgeFollowSuccess=function(){var e=new Laya.Point(this.enmeySprite.x+265.5,this.enmeySprite.y+235);e.distance(l["default"].instance.roleObj.x,l["default"].instance.roleObj.y)},t.prototype.followUpBackBoss3=function(){var e=this,t={x:i.tools.random(200,400),y:Laya.stage.height/3-this.enmeySprite.height/2},a=function(){var a=new Laya.Point(e.enmeySprite.x,e.enmeySprite.y),s=a.distance(t.x,t.y);return s/100};Laya.Tween.to(this.enmeySprite,{x:t.x,y:t.y},a(),null,Laya.Handler.create(this,this.bossBackFinish))},t.prototype.bossBackFinish=function(){this.bossStatus="endFollowUp"},t.prototype.playDeadSK=function(){},t.prototype.clearTimes=function(){Laya.Tween.clearAll(this.enmeySprite),Laya.timer.clearAll(this)},t}(n["default"]);a["default"]=_},{"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../MediumEnemy/MediumEnemy_Move":35,"../Tools/Tool":40,"../manage/Music":56,"../manage/Playing_var":58,"../manage/SkeletonTempletManage":60,"../playing/PlayingSceneControl":67,"./BulletCommon":72,"./EnemyCommon":74,"./FireBossBullet1":77}],76:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/SecondWeaponData"),i=e("../Data/JsonEnum"),n=function(e){function t(){var t=e.call(this)||this;return t.intType=1e3,t.numType=1e3,t.strType="hello laya",t.boolType=!0,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;switch(this.sk_status=null,this.self=this.owner,this.buffType=s["default"].getInstance().buffType[0],this.buffType){case"3":this.skObj=this.self.getChildAt(0),Laya.timer.frameOnce(3,this,function(){e.skObj.play(2,!0,!0)});break;case"4":this.skObj=this.self.getChildByName("sk_name"),Laya.timer.frameOnce(2,this,function(){e.skObj.on(Laya.Event.STOPPED,e,e.stopLister),e.skObj.play(2,!1,!0),e.sk_status=3})}},t.prototype.stopLister=function(){this.sk_status&&3===this.sk_status&&this.self.removeSelf()},t.prototype.onDisable=function(){Laya.Pool.recover(i["default"].muzzlePrefabEnemy[this.buffType],this.owner)},t}(Laya.Script);a["default"]=n},{"../Data/JsonEnum":27,"../manage/SecondWeaponData":59}],77:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){var a=e.call(this)||this;return t._items.push(a),a}return __extends(t,e),t.getItems=function(){return this._items||[]},t.prototype.updateDate=function(){if(this.y+=2,this.y>=this.stage.height-100){this.y=0,Laya.timer.clearAll(this);this.removeChildren(),Laya.Pool.recover("fireBossB1",this)}},t.prototype.startLoop=function(){Laya.timer.clearAll(this),Laya.timer.frameLoop(2,this,this.updateDate)},t._items=[],t}(Laya.Sprite);a["default"]=s},{}],78:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../playing/PlayingSceneControl"),i=e("../manage/Music"),n=e("../Data/MusicEnum"),o=n["default"].musicToUrl,l=function(e){function t(){var t=e.call(this)||this;return t.speedValue=15,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.roleObj=s["default"].instance.roleObj},t.prototype.onUpdate=function(){var e=new Laya.Point(this.self.x,this.self.y),t=e.distance(this.roleObj.x+this.roleObj.width/2,this.roleObj.y+this.roleObj.height/2);if(65>=t)this.self.removeSelf(),i["default"].getInstance().playSound(o.get_coin);else{var a=new Laya.Point(this.self.x-(this.roleObj.x+this.roleObj.width/2),this.self.y-(this.roleObj.y+this.roleObj.height/2));a.normalize(),this.self.x-=this.speedValue*a.x,this.self.y-=this.speedValue*a.y}},t.prototype.onDisable=function(){Laya.Pool.recover("DropGold",this.self)},t}(Laya.Script);a["default"]=l},{"../Data/MusicEnum":28,"../manage/Music":56,"../playing/PlayingSceneControl":67}],79:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/SecondWeaponData"),i=e("../playing/PlayingSceneControl"),n=e("../Data/JsonEnum"),o=function(e){function t(){var t=e.call(this)||this;return t.intType=1e3,t.numType=1e3,t.strType="hello laya",t.boolType=!0,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;switch(this.self=this.owner,this.sk=this.self.getChildAt(0),this.sk.on(Laya.Event.STOPPED,this,this.listerStop),this.secondData=s["default"].getInstance(),this._bulletType=this.secondData.buffType,this.canCreateB=!0,this._bulletType[0]){case"3":Laya.timer.frameOnce(3,this,function(){e.sk.play(0,!1),e.skStatus=0});break;case"4":case"1":case"6":case"7":case"8":case"9":case"10":case"11":Laya.timer.frameOnce(3,this,function(){e.sk.play(1,!1),e.skStatus=2});break;case"5":Laya.timer.frameOnce(3,this,function(){e.sk.play("fs",!1),e.skStatus=1})}},t.prototype.listerStop=function(e){switch(this._bulletType[0]){case"3":0===this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"4":2===this.skStatus?(this.sk.play(0,!1),this.skStatus=1):1==this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"5":1===this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"6":2===this.skStatus?(this.sk.play(0,!1),this.skStatus=1):1==this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"7":2===this.skStatus?(this.sk.play(0,!1),this.skStatus=1):1==this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"1":2===this.skStatus?(this.sk.play(0,!1),this.skStatus=1):1==this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"8":2===this.skStatus?(this.sk.play(0,!1),this.skStatus=1):1==this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"9":2===this.skStatus?(this.sk.play(0,!1),this.skStatus=1):1==this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond());break;case"10":case"11":2===this.skStatus?(this.sk.play(0,!1),this.skStatus=1):1==this.skStatus&&this.canCreateB&&(this.canCreateB=!1,this.createBulletSecond())}},t.prototype.createBulletSecond=function(){this.sk.stop(),Laya.timer.clearAll(this),this.self.removeSelf(),i["default"].instance.createBulletSecond()},t.prototype.onDisable=function(){var e=n["default"].muzzlePrefab[Number(this._bulletType[0])];Laya.Pool.recover(e||"Bullet_skill4_enemy",this.owner)},t}(Laya.Script);a["default"]=o},{"../Data/JsonEnum":27,"../manage/SecondWeaponData":59,"../playing/PlayingSceneControl":67}],80:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("./role"),i=e("../Tools/Tool"),n=e("../Data/JsonEnum"),o=n["default"].secondSkill,l=i["default"].random,r=function(e){function t(){var t=e.call(this)||this;return t.boolType=!0,t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this._role=s["default"].instance.owner,this.propertyObj=this.owner.vars_.propertyObj,this.monsterTypeJudgment(),this.script_enemy=this.owner.getComponent(Laya.Script)},t.prototype.onDisable=function(){this.clearTimeline()},t.prototype.monsterTypeJudgment=function(){var e=this.propertyObj.way;switch(e){case 1:this.snakeLikeMobile();break;case 3:this.wirelessTracking();break;case 2:this.fixedCrash()}},t.prototype.fixedCrash=function(){var e=this.owner;Laya.Tween.to(e,{x:e.x,y:Laya.stage.height/4},2e3,Laya.Ease.elasticInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:this._role.x,y:this._role.y},500,Laya.Ease.sineIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:e.x,y:Laya.stage.height},1e3,Laya.Ease.sineIn,Laya.Handler.create(this,function(){},[]),0)},[]),0)},[]),0)},t.prototype.snakeLikeMobile=function(){var e=this.owner;this._number=1,this._number+=.25,Laya.Tween.to(e,{x:Laya.stage.width-this.propertyObj.mark_w,y:Laya.stage.height/4},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:0,y:2*Laya.stage.height/4},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:Laya.stage.width-this.propertyObj.mark_w,y:3*Laya.stage.height/4},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:0,y:Laya.stage.height},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:Laya.stage.width-this.propertyObj.mark_w,y:5*Laya.stage.height/4},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,function(){},[]),0)},[]),0)},[]),0)},[]),0)},[]),0)},t.prototype.wirelessTracking=function(){var e=this.owner,t=new Laya.Point(this._role.x-e.x,this._role.y-e.y);t.normalize(),Laya.Tween.to(e,{x:e.x+3*t.x,y:e.y+3*t.y},10,Laya.Ease.linearIn,Laya.Handler.create(this,function(){this.wirelessTracking()},[]),0)},t.prototype.clearTimeline=function(){Laya.Tween.clearAll(this.owner),Laya.timer.clearAll(this)},t.prototype.onUpdate=function(){return 2===this.propertyObj.e_type||this.propertyObj.way||this.script_enemy._moveOff&&(this.self.x>=Laya.stage.width-this.propertyObj.mark_w?(this.script_enemy._steering="left",this.script_enemy.setSpeedRecover()):this.self.x<0&&(this.script_enemy._steering="right",this.script_enemy.setSpeedRecover())),this.self.vars_.skillType&&this.self.vars_.skillType===o.flottant&&this.self.y<0?void this.self.getComponent(Laya.RigidBody).setVelocity({x:0,y:0}):void(this.self.y>=Laya.stage.height+this.propertyObj.mark_h+10&&(this.clearTimeline(),this.self.pos(l(0,Laya.stage.width-this.propertyObj.mark_w-5),l(-30-this.propertyObj.mark_h,-5-this.propertyObj.mark_h)),this.script_enemy.setSpeedRecover(),this.monsterTypeJudgment()))},t}(Laya.Script);a["default"]=r},{"../Data/JsonEnum":27,"../Tools/Tool":40,"./role":81}],81:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/Playing_var"),i=e("../manage/BitmapFontMananage"),n=e("../Data/JsonEnum"),o=e("../playing/PlayingSceneControl"),l=e("../manage/Music"),r=e("../Data/MusicEnum"),h=r["default"].musicToUrl,c=e("../manage/OpenWx"),u=e("../Effect/UpBlackEffect"),p=e("../manage/SkeletonTempletManage"),f=e("../manage/EndlessParseSkill"),d=function(e){function t(){var a=e.call(this)||this;return t.instance=a,a}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.hurtedBg=o["default"].instance.owner.hurted_img,this.self.vars_||(this.self.vars_={}),this.self.vars_.propertyObj={prefabType:n["default"].prefabType.role},this.self.vars_.propertyObj.camp=2,this.self.vars_.propertyObj.hitRadius={w:60,h:55},this.noHurt=!1,this.haveSheild=!1},t.prototype.onUpdate=function(){this.noHurt&&(Date.now()-this.markNoHurtStartTime<=3e3?(void 0==this.markShowAndHideIndex&&(this.markShowAndHideIndex=0),this.markShowAndHideIndex%10===0&&(this.self.visible=!this.self.visible),this.markShowAndHideIndex%25===0&&(this.hurtedBg.visible=!this.hurtedBg.visible,!this.hurtedBg.parent&&Laya.stage.addChild(this.hurtedBg)),this.markShowAndHideIndex++):(this.noHurt=!1,this.self.visible=!0,this.hurtedBg&&(this.hurtedBg.visible=!1),delete this.markShowAndHideIndex)),this.haveSheild&&Date.now()-this.markHaveSheildStartTime>=this.keepSheildTime&&(this.haveSheild=!1,this.cancelSheildEffect()),this.updateWuDiSkill()},t.prototype.updateWuDiSkill=function(){"endless"===s["default"].getInstance().gameModel&&f["default"].getInstance().isUpgraded(5)&&(void 0==this.isWuDiSkill&&this.initWudiSkill(),this.isWuDiSkill?Date.now()-this.wuDiStartTime>=this.wuDiKeepTime&&(this.isWuDiSkill=!1,this.wuDiEndTime=Date.now()):Date.now()-this.wuDiEndTime>=1e4&&(this.wuDiStartTime=Date.now(),this.isWuDiSkill=!0))},t.prototype.initWudiSkill=function(){this.wuDiStartTime=Date.now(),this.isWuDiSkill=!0},t.prototype.updateWuDiKeepTime=function(){var e=f["default"].getInstance().getSkillNum(5);this.wuDiKeepTime=1e3*e},t.prototype.onTriggerEnter=function(e,t){if("playing"===s["default"].getInstance().gameStatus){var a=e.owner.vars_&&e.owner.vars_.propertyObj;if(a&&a.prefabType&&e.owner.visible&&e.owner.parent){var i=a.prefabType===n["default"].prefabType.bullletBoss||a.prefabType===n["default"].prefabType.enemy,l="bullet"===a.prefabType;if((i||l)&&s["default"].getInstance().invincible&&!this.noHurt){var r=e.owner.vars_.propertyObj.hurtValue;o["default"].instance.roleHp-=r,o["default"].instance.roleHp<=0?this.setRoleDead():this.startRoleNoHurt();var h=o["default"].instance.roleHp<=0?0:o["default"].instance.roleHp,c=o["default"].instance.hpBar.mask.graphics;c.clear();var u=49+213/o["default"].instance.roleTotal*h;c.drawRect(0,0,u,44,"#ff0000"),o["default"].instance.delayHpBar2(u)}}}},t.prototype.setRoleHp=function(e,t){if(e>0){if(this.haveSheild)return;if(this.isWuDiSkill)return}if(e>0){var a=this.getReduceHurt(t);e-=a}var s=o["default"].instance;s.roleHp-=e,s.roleHp<=0?this.setRoleDead():e>0&&this.startRoleNoHurt();var i;i=s.roleHp<=0?0:s.roleHp>s.roleTotal?s.roleTotal:s.roleHp;var n=s.hpBar.mask.graphics;n.clear();var l=49+213/s.roleTotal*i;n.drawRect(0,0,l,44,"#ff0000"),s.delayHpBar2(l),o["default"].instance.label_hpNum.text=""+i+"/"+s.roleTotal},t.prototype.startRoleNoHurt=function(){this.noHurt=!0,this.markNoHurtStartTime=Date.now()},t.prototype.getReduceHurt=function(e){var t=0,a=f["default"].getInstance();return"endless"===s["default"].getInstance().gameModel?((e&&"子弹"===e||!e)&&a.isUpgraded(6)&&(t+=a.getSkillNum(6)),e&&"敌人"===e&&a.isUpgraded(7)&&(t+=a.getSkillNum(7)),a.isUpgraded(8)&&(t+=a.getSkillNum(8)),t):t},t.prototype.startRoleSheild=function(e){this.keepSheildTime=1e3*e,this.haveSheild=!0,this.markHaveSheildStartTime=Date.now(),this.createSheildEffect()},t.prototype.setRoleDead=function(){Laya.Browser.onMiniGame&&c["default"].getInstance().vibrateShort(),this.createEffectInEneny(n["default"].baozhaAni.fjbaozha),console.log("游戏失败~!"),s["default"].getInstance().gameStatus="settlement",this.self.visible=!1,o["default"].instance.mainPlane.visible=!1,o["default"].instance.leftSecondWeapon.visible=!1,o["default"].instance.rightSecondWeapon.visible=!1,o["default"].instance.fighting=!1,Laya.Browser.window.game.overLevel=!1,Laya.timer.once(1200,this,this.openFailScene),l["default"].getInstance().playSound(h.bomb_hero),u["default"].getInstance().setHide()},t.prototype.openFailScene=function(){Laya.timer.clear(this,this.openFailScene),new i["default"].BitmapManage("bitmapFont/settlement_number.fnt","settlement_number",Laya.Handler.create(this,function(){Laya.Scene.open("test/GameFail_dialog.scene",!1)})),o["default"].instance.clearObjParent(),o["default"].instance.clearObjectPool(),o["default"].instance.clearStageSprite()},t.prototype.onDisable=function(){},t.prototype.moveRoleInMain=function(e){var t="up"===e?737:1012;this.self.y!==t&&Laya.Tween.to(this.self,{y:"up"===e?737:1012},200,null,null,null,null,!0)},t.prototype.createEffectInEneny=function(e){var t=Laya.loader.getRes("prefab/xg_baozha.json"),a=Laya.Pool.getItemByCreateFun("xg_baozha",t.create,t);a.aniName="baozha1",a.prefabName="xg_baozha",a.pos(this.self.x,this.self.y+55),Laya.stage.addChild(a)},t.prototype.createSheildEffect=function(){var e=this.self.getChildByName("fanghudun");if(e)return void(e.visible=!0);var t=Laya.Pool.getItemByCreateFun("fanghudun",function(){var e=p["default"].getInstance().templets.fanghudun,t=e.buildArmature(0);return t},this);t.pos(62,22),t.visible=!0,t.name="fanghudun",t.play(0,!0),this.self.addChild(t)},t.prototype.cancelSheildEffect=function(){var e=this.self.getChildByName("fanghudun");e&&(e.visible=!1)},t}(Laya.Script);a["default"]=d},{"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../Effect/UpBlackEffect":32,"../manage/BitmapFontMananage":45,"../manage/EndlessParseSkill":51,"../manage/Music":56,"../manage/OpenWx":57,"../manage/Playing_var":58,"../manage/SkeletonTempletManage":60,"../playing/PlayingSceneControl":67}],82:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=s["default"].FixedDataTables,n=e("../Data/JsonEnum"),o=e("../manage/Playing_var"),l=function(e){function t(){var t=e.call(this)||this;return t.notReachArr=[],t}return __extends(t,e),t.prototype.onEnable=function(){this.eventRegistration(),this.initData()},t.prototype.initData=function(){this.achieve=o["default"].getInstance().achieve,this.playerAchieve=o["default"].getInstance().playerAchieve,this.indexData=i.getInstance().getData(n["default"].DataType.achievement),this.canReceiveAndeRedDot()},t.prototype.contrastTable=function(e,t){var a=[];for(var s in this.indexData)if(this.indexData.hasOwnProperty(s)){var i=this.indexData[s];i.type===e&&(t>=i.value?a.push(i.id):this.notReachArr.push(i.id))}return a},t.prototype.contrastPlayerAchieve=function(e,t){for(var a in this.playerAchieve[e])if(this.playerAchieve[e].hasOwnProperty(a))for(var s=0;s<t.length;s++)Number(a)===t[s]&&t.splice(s,1);return t},t.prototype.canReceiveAndeRedDot=function(){this.reachButtonArr=[];var e=this.contrastTable(1,this.achieve.battleTopNum),t=this.contrastTable(2,this.achieve.killTopNum),a=this.contrastTable(3,this.achieve.endlessTopScore),s=this.contrastTable(4,this.achieve.unlockTopNum),i=this.contrastPlayerAchieve(1,e),n=this.contrastPlayerAchieve(2,t),o=this.contrastPlayerAchieve(3,a),l=this.contrastPlayerAchieve(4,s);this.reachButtonArr.push(i),this.reachButtonArr.push(n),this.reachButtonArr.push(o),this.reachButtonArr.push(l),0===i.length&&0===n.length&&0===o.length&&0===l.length?this.redDot.visible=!1:this.redDot.visible=!0},t.prototype.eventRegistration=function(){this.self=this.owner,this.startScale=this.self.scaleX,this.redDot=this.self.getChildAt(0),this.self.on(Laya.Event.MOUSE_DOWN,this,this.DOWN),this.self.on(Laya.Event.MOUSE_MOVE,this,this.MOVE),this.self.on(Laya.Event.MOUSE_UP,this,this.UP),this.self.on(Laya.Event.MOUSE_OUT,this,this.OUT)},t.prototype.DOWN=function(){this.self.scale(.9*this.startScale,.9*this.startScale)},t.prototype.MOVE=function(){this.self.scale(.9*this.startScale,.9*this.startScale)},t.prototype.UP=function(){this.self.scale(this.startScale,this.startScale),Laya.Scene.open("test/Achievement_dialog.scene",null,null,Laya.Handler.create(this,function(){console.log("场景打开")},[]))},t.prototype.OUT=function(){this.self.scale(this.startScale,this.startScale)},t}(Laya.Script);a["default"]=l},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../manage/Playing_var":58}],83:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=s["default"].FixedDataTables,n=e("../Data/JsonEnum"),o=e("../manage/Playing_var"),l=e("./AchievementButton"),r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.initScene(),this.closeButtonClick(),this.dataTypeCount(),this.listInit(),this.tapControl()},t.prototype.dataTypeCount=function(){this.dataTypeArray=[];var e=[],t=[],a=[],s=[],o=i.getInstance().getData(n["default"].DataType.achievement);for(var l in o)if(o.hasOwnProperty(l)){var r=o[l];1===r.type?e.push([r.type,r.id]):2===r.type?t.push([r.type,r.id]):3===r.type?a.push([r.type,r.id]):4===r.type&&s.push([r.type,r.id])}this.dataTypeArray.push(e),this.dataTypeArray.push(t),this.dataTypeArray.push(a),this.dataTypeArray.push(s)},t.prototype.initScene=function(){var e=Laya.Pool.getItemByCreateFun("getDiamond",this.getDiamond.create,this.getDiamond);console.log(e),this.self=this.owner,this.self.pos(0,0),this.contentSet=this.owner.getChildByName("contentSet"),this.tap=this.self.m_tap,this.tap.selectedIndex=0,this.list=this.self.m_list,this.achievementBtn=Laya.stage._children[0]._children[0].achievementBtn,this.achieve=o["default"].getInstance().achieve,this.playerAchieve=o["default"].getInstance().playerAchieve,this.background=this.owner.getChildByName("background"),Laya.Tween.to(this.background,{alpha:.8},20,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),Laya.Tween.to(this.contentSet,{x:0},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),0),this.adaptive()},t.prototype.adaptive=function(){var e=this.owner.getChildByName("background"),t=this.owner.getChildByName("contentSet");t.y+=40,e.height=Laya.stage.height,t.y+=(Laya.stage.height-1334)/2},t.prototype.tapControl=function(){this.tap.selectHandler=new Laya.Handler(this,this.onSelect_Tap),this.tapRedDotRrompt(),this.getStick()},t.prototype.onSelect_Tap=function(e){this.listAssignment(),this.list.refresh(),this.tapRedDotRrompt(),this.getStick()},t.prototype.tapRedDotRrompt=function(){this.achievementBtn.getComponent(l["default"]).onEnable();for(var e=this.achievementBtn.getComponent(l["default"]).reachButtonArr,t=0;t<e.length;t++)0!==e[t].length?this.tap._children[t]._children[0].visible=!0:this.tap._children[t]._children[0].visible=!1},t.prototype.getStick=function(){this.achievementBtn.getComponent(l["default"]).onEnable();var e=this.achievementBtn.getComponent(l["default"]).reachButtonArr,t=this.dataTypeArray[0].length,a=this.dataTypeArray[1].length,s=this.dataTypeArray[2].length,i=(this.dataTypeArray[3].length,this.tap.selectedIndex);0===i?0!==e[0].length&&(this.list.tweenTo(e[0][0]-1,100),this.topID=e[0][0]-1):1===i?0!==e[1].length&&this.list.tweenTo(e[1][0]-t-1,100):2===i?0!==e[2].length&&(this.topID=e[2][0]-t-a-1,this.list.tweenTo(e[2][0]-t-a-1,100)):3===i&&0!==e[3].length&&(this.topID=e[3][0]-t-a-s-1,this.list.tweenTo(e[3][0]-t-a-s-1,100))},t.prototype.stateJudgement=function(e){this.achievementBtn.getComponent(l["default"]).onEnable();for(var t=this.achievementBtn.getComponent(l["default"]).reachButtonArr,a=this.achievementBtn.getComponent(l["default"]).notReachArr,s=(i.getInstance().getData(n["default"].DataType.achievement),null),o={},r=0;r<t.length;r++)for(var h=0;h<t[r].length;h++)t[r][h]===e&&(s="reachButton");if(null===s)for(var c=0;c<a.length;c++)a[c]===e&&(s="notReach");return null===s&&(s="getComplete",o={getState:"getComplete",tap:null}),s},t.prototype.listInit=function(){this.list.scrollBar.hide=!0,this.list.scrollBar.elasticBackTime=200,this.list.scrollBar.elasticDistance=50,this.list.selectEnable=!0,this.listAssignment(),this.list.selectHandler=new Laya.Handler(this,this.onSelect_List),this.list.renderHandler=new Laya.Handler(this,this.updateItem)},t.prototype.listAssignment=function(){var e=i.getInstance().getData(n["default"].DataType.achievement),t=this.tap.selectedIndex,a=[];for(var s in e)if(e.hasOwnProperty(s)){var o=e[s];if(o.type===t+1){var l=void 0;0===t?l=this.achieve.battleTopNum:1===t?l=this.achieve.killTopNum:2===t?l=this.achieve.endlessTopScore:3===t&&(l=this.achieve.unlockTopNum),l>=o.value&&(l=o.value),a.push({describe:o.dec+"("+l+"/"+o.value+")",diamondsNumber:o.diamond,getState:this.stateJudgement(o.id),tapIndex:t+1,id:o.id})}}this.list.array=a},t.prototype.updateItem=function(e,t){e.name=("item"+t).toString();var a=e.getChildByName("describeLabel");a.text=this.list.array[t].describe;var s=e.getChildByName("diamondsNumber ");s.value=this.list.array[t].diamondsNumber,this.getState=this.list.array[t].getState;var i=e.getChildByName("reach"),n=e.getChildByName("notReach"),o=e.getChildByName("reachButton"),l=e.getChildByName("baseboard"),r=e.getChildByName("blueBaseboard");"reachButton"===this.getState?(o.visible=!0,i.visible=!1,n.visible=!1,l.visible=!0,r.visible=!1):"notReach"===this.getState?(o.visible=!1,i.visible=!1,n.visible=!0,l.visible=!0,r.visible=!1):"getComplete"===this.getState&&(o.visible=!1,i.visible=!0,n.visible=!1,l.visible=!1,r.visible=!0)},t.prototype.onSelect_List=function(e){},t.prototype.closeButtonClick=function(){this.startScale=this.closeButton.scaleX,this.closeButton.on(Laya.Event.MOUSE_DOWN,this,this.closeButtonDOWN),this.closeButton.on(Laya.Event.MOUSE_MOVE,this,this.closeButtonMOVE),this.closeButton.on(Laya.Event.MOUSE_UP,this,this.closeButtonUP),this.closeButton.on(Laya.Event.MOUSE_OUT,this,this.closeButtonOUT)},t.prototype.closeButtonDOWN=function(){this.closeButton.scale(this.startScale,this.startScale)},t.prototype.closeButtonMOVE=function(){this.closeButton.scale(.9*this.startScale,.9*this.startScale)},t.prototype.closeButtonUP=function(){this.closeButton.scale(this.startScale,this.startScale),Laya.Tween.to(this.contentSet,{x:-800,Y:0},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){Laya.Scene.close("test/Achievement_dialog.scene","Achievement_dialog")},[]),0),Laya.Tween.to(this.background,{alpha:1},100,Laya.Ease.circIn,Laya.Handler.create(this,function(){},[]),50)},t.prototype.closeButtonOUT=function(){this.closeButton.scale(this.startScale,this.startScale)},t.prototype.onDisable=function(){},t}(Laya.Script);a["default"]=r},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../manage/Playing_var":58,"./AchievementButton":82}],84:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/Playing_var"),i=e("../Connect/HttpClass"),n=e("../Connect/HttpEnum"),o=e("../Connect/HttpError"),l=e("../manage/BagDataControl"),r=e("./AchievementControl"),h=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.init(),this.reachButtonClick()},t.prototype.init=function(){this.self=this.owner,this.box=this.self.parent,this.list=this.owner.scene.m_list,this.contentSet=this.list.parent,this.selfScene=this.self.scene},t.prototype.reachButtonClick=function(){this.self.on(Laya.Event.MOUSE_DOWN,this,this.reachButtonDOWN),this.self.on(Laya.Event.MOUSE_MOVE,this,this.reachButtonMOVE),this.self.on(Laya.Event.MOUSE_UP,this,this.reachButtonUP),this.self.on(Laya.Event.MOUSE_OUT,this,this.reachButtonOUT)},t.prototype.reachButtonDOWN=function(){},t.prototype.reachButtonMOVE=function(){},t.prototype.reachButtonUP=function(){var e=this,t=this.box.name,a=t.substring(4),h=this.list.array[a],c=h.tapIndex,u=h.id,p={};p[c]={},p[c][u]=1;var f=n["default"].URLSERVER+n["default"].httpUrls.AchieveFetch,d={uuId:s["default"].getInstance().uuId,achieveType:c,achieveId:u};Laya.Dialog.showLoadingPage();new i["default"].HttpClass(Laya.Handler.create(this,function(t){t.ret?new o["default"].HttpError(t.ret,e.owner):(s["default"].getInstance().updatePlayerAchieve(p),l["default"].getInstance().updateBagDate_new(t),e.list.array[a].getState="getComplete",e.list.refresh(),e.selfScene.getComponent(r["default"]).tapRedDotRrompt(),e.selfScene.getComponent(r["default"]).getStick(),e.diamondIconAnimation(h)),Laya.Dialog.hideLoadingPage(),console.error(t)}),f,JSON.stringify(d))},t.prototype.diamondIconAnimation=function(e){var t=this.selfScene.getComponent(r["default"]).getDiamond,a=Laya.Pool.getItemByCreateFun("getDiamond",t.create,t);a.alpha=0,a.scale(0,0);var s=a.getChildByName("numberDiamonds");s.value="x"+e.diamondsNumber.toString(),a.pos(Laya.stage.width/3+30,Laya.stage.height/3+50),Laya.stage.addChild(a),a.zOrder=5e3;var i=Laya.stage._children[0]._children[0].img_mainDiamond,n=i.x+i.parent.x,o=i.y+i.parent.y,l=new Laya.TimeLine;l.addLabel("appear",0).to(a,{scaleX:1,scaleY:1,alpha:1},500,Laya.Ease.circInOut,0).addLabel("move",0).to(a,{x:n-10,y:o+50,scaleX:.5,scaleY:.5},700,Laya.Ease.circInOut,0).addLabel("vanish",0).to(a,{x:n,y:o,alpha:0},500,Laya.Ease.circInOut,0),l.play("appear",!1),l.on(Laya.Event.COMPLETE,this,this.onComplete),l.on(Laya.Event.LABEL,this,this.onLabel)},t.prototype.onComplete=function(){console.log("timeLine complete!!!!")},t.prototype.onLabel=function(e){console.log("LabelName:"+e)},t.prototype.reachButtonOUT=function(){},t.prototype.onDisable=function(){},t}(Laya.Script);a["default"]=h},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Connect/HttpError":25,"../manage/BagDataControl":44,"../manage/Playing_var":58,"./AchievementControl":83}],85:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/Music"),i=e("../Data/MusicEnum"),n=i["default"].musicToUrl,o=e("../playing/PlayingSceneControl"),l=function(e){function t(){var t=e.call(this)||this;return t.markIndex=0,t}return __extends(t,e),t.prototype.onEnable=function(){var e=(Laya.Image,this.owner.getChildAt(0));e.height=Laya.stage.height;var t=this.owner.getChildByName("boss"),a=this.owner.getChildByName("enemy"),s=o["default"].instance.isWaveEffect||!1;t.visible=!s,a.visible=s,o["default"].instance.isWaveEffect=null,Laya.timer.loop(150,this,this.setWarning,[e])},t.prototype.setWarning=function(e){this.markIndex++%2===0?e.visible=!1:e.visible=!0,this.markIndex>=20&&this.owner.removeSelf();
},t.prototype.onDisable=function(){this.owner.destroy(),this.destroy(),this.reSetMusic()},t.prototype.reSetMusic=function(){s["default"].getInstance().playMusic(n.bg_boss)},t}(Laya.Script);a["default"]=l},{"../Data/MusicEnum":28,"../manage/Music":56,"../playing/PlayingSceneControl":67}],86:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=e("../manage/toast"),o=e("../manage/Playing_var"),l=e("../playing/PlayingSceneControl"),r=e("../Tools/GoldFly"),h=e("../manage/BagDataControl"),c=e("../Connect/HttpClass"),u=e("../Connect/HttpEnum"),p=e("../manage/Music"),f=e("../Data/MusicEnum"),d=e("../manage/DialogEffect"),y=f["default"].musicToUrl,_=function(e){function t(){var t=e.call(this)||this;return t.posXY={},t.alreadyCheckImgArr=[],t.goldIconArr=[],t.numsArr=[],t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.initVar(),this.initListen(),this.initItems(),Laya.Browser.window.dialog=this.self,p["default"].getInstance().playSound(y.ui_popup),this.dialogE=new d["default"](this.self)},t.prototype.initVar=function(){this.itemParent=this.self.parentItem,this.oneRewardBtn=this.self.btn_oneReward,this.twoRewardBtn=this.self.btn_twoReward,this.posXY.initx1=151,this.posXY.inity1=108,this.posXY.initw1=155,this.posXY.initx2=73.5,this.posXY.inity2=320,this.posXY.initw2=154.5,this.signConfig=s["default"].FixedDataTables.getInstance().getData(i["default"].DataType.sign),this.itemConfig=s["default"].FixedDataTables.getInstance().getData(i["default"].DataType.item)},t.prototype.initListen=function(){var e=this;this.oneRewardBtn.on(Laya.Event.CLICK,this,this.rewardGold,[1]),this.twoRewardBtn.on(Laya.Event.CLICK,this,this.rewardGold,[2]),this.self.btn_close.on(Laya.Event.CLICK,this,function(){e.dialogE.removeAnimation(Laya.Handler.create(e,e.closeDialog))})},t.prototype.closeDialog=function(){p["default"].getInstance().playSound(f["default"].musicToUrl.button_normal),this.self.close()},t.prototype.initItems=function(){for(var e=o["default"].getInstance().checkInData,t=0;7>t;t++){var a=Laya.Pool.getItemByCreateFun("checkItem",this.checkItem.create,this.checkItem);t>=3?a.pos(this.posXY.initx2+t%4*this.posXY.initw2,this.posXY.inity2):a.pos(this.posXY.initx1+t%3*this.posXY.initw1,this.posXY.inity1);var s=this.signConfig[t+1],i=s.reward.split("|");a.getChildByName("goldIcon").skin="commonPic/"+this.itemConfig[i[0]].icon+".png";var n=a.getChildByName("alreadyIcon");a.getChildByName("dayIcon").value=""+(t+1),a.getChildByName("goldNum").text=""+i[1],t<=e.day-1?n.visible=!0:n.visible=!1,this.alreadyCheckImgArr.push(n),this.goldIconArr.push(a.getChildByName("goldIcon")),this.numsArr.push(i),this.itemParent.addChild(a)}Laya.Browser.window.goldIconArr=this.goldIconArr},t.prototype.rewardGold=function(e){var t=this;p["default"].getInstance().playSound(y.button_buy);var a=o["default"].getInstance().checkInData;if(a.already)n["default"].noBindScript("已经签到过了",this.self);else{var s={uuId:o["default"].getInstance().uuId,rate:e};new c["default"].HttpClass(Laya.Handler.create(this,function(s){var i,n,o,n=JSON.parse(s.signIn),i=JSON.parse(s.bagCommon);a.already=!0,a.day=n.signTimes;var l=i[102].num-h["default"].getInstance().getBagDataById("102").num;h["default"].getInstance().updateBagCommon({bagCommon:i});var o=t.getXYStart();new r["default"](o[0],o[1],null,t.self,t.moveFinish,e,t,l),console.error(s)}),u["default"].URLSERVER+u["default"].httpUrls.SignUp,JSON.stringify(s))}},t.prototype.moveFinish=function(e){var t=this;console.log("已经移动完成"),l["default"].instance.setRedDotStatus();var a=o["default"].getInstance().checkInData.day;l["default"].instance.setMoneyData(),this.alreadyCheckImgArr[a-1].visible=!0,this.dialogE.removeAnimation(Laya.Handler.create(this,function(){t.self.close(),t.dialogE=null,n["default"].noBindScript("签到成功!")}))},t.prototype.getXYStart=function(){var e,t=o["default"].getInstance().checkInData.day,a=this.goldIconArr[t],s=new Laya.Point(a.x,a.y),i=[];e=this.goldIconArr[t].parent.localToGlobal(s,!1,this.self);var n=l["default"].instance.owner.img_mainDiamond,r=new Laya.Point(n.x,n.y);return r=this.self.globalToLocal(r),i.push(e,r),i},t}(Laya.Script);a["default"]=_},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../Tools/GoldFly":37,"../manage/BagDataControl":44,"../manage/DialogEffect":46,"../manage/Music":56,"../manage/Playing_var":58,"../manage/toast":61,"../playing/PlayingSceneControl":67}],87:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=e("../manage/BagDataControl"),o=e("../manage/toast"),l=e("../manage/Music"),r=e("../Data/MusicEnum"),h=e("../manage/DialogEffect"),c=r["default"].musicToUrl,u=e("../Connect/HttpClass"),p=e("../Connect/HttpEnum"),f=e("../Connect/HttpError"),d=e("../manage/Playing_var"),y=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.game=Laya.Browser.window.game,this.self.onOpened=this.opened,this.initVar(),this.initListener(),this.dilogEffect=new h["default"](this.self)},t.prototype.setOpenType=function(e){this.openType=e||0;var t=this.self.img_goldInfo,a=this.self.img_title;this.openType?(this.consumeByOne=s["default"].FixedDataTables.getInstance().getDataByKey(i["default"].DataType.buy_gold,this.game.nowLevel,"gold"),this.icon_gold.skin="commonPic/金币图标.png",this.label_exchangeBate.text="1钻石="+this.consumeByOne+"金币",t.skin="exchange/信息布局.png",a.skin="exchange/兑换金币.png"):(this.icon_gold.skin="face/体力图标.png",this.consumeByOne=s["default"].FixedDataTables.getInstance().getDataByKey(i["default"].DataType.buy_power,1,"power")/s["default"].FixedDataTables.getInstance().getDataByKey(i["default"].DataType.buy_power,1,"diamond"),this.label_exchangeBate.text="1钻石="+this.consumeByOne+"体力",t.skin="exchange/信息布局_体力.png",a.skin="exchange/兑换体力.png"),this.setShow()},t.prototype.initVar=function(){this.icon_stone=this.self.icon_stone,this.icon_gold=this.self.iconGold,this.btn_exchange=this.self.btn_exchange,this.btn_add=this.self.btn_add,this.btn_reduce=this.self.btn_reduce,this.fc_consume=this.self.fc_consume,this.label_get=this.self.label_get,this.btn_close=this.self.btn_close,this.label_myHave=this.self.label_myHave,this.label_exchangeBate=this.self.label_exchangeBate},t.prototype.initListener=function(){this.btn_exchange.on(Laya.Event.CLICK,this,this.exchangeGold),this.btn_add.on(Laya.Event.CLICK,this,this.addExchangeNum),this.btn_reduce.on(Laya.Event.CLICK,this,this.reduceExchangeNum),this.btn_close.on(Laya.Event.CLICK,this,this.closeDialog),this.self.btn_max.on(Laya.Event.CLICK,this,this.maxExchangeNum)},t.prototype.closeDialog=function(){var e=this;l["default"].getInstance().playSound(c.button_normal),this.dilogEffect.removeAnimation(Laya.Handler.create(this,function(){e.self.close(),e.dilogEffect=null}))},t.prototype.addExchangeNum=function(){void 0===this.nowExchangeNum&&(this.nowExchangeNum=0);var e=n["default"].getInstance().getBagDataById("102").num,t=Math.floor(e/10),a=!1;2!==this.openType&&(t>=e?this.nowExchangeNum<e?this.nowExchangeNum=e:a=!0:this.nowExchangeNum+t<=e?this.nowExchangeNum+=t:this.nowExchangeNum<e?this.nowExchangeNum=e:a=!0),a?o["default"].noBindScript("没有更多钻石了哦~",this.self):this.setShow()},t.prototype.setShow=function(){void 0===this.nowExchangeNum&&(this.nowExchangeNum=0),this.btn_exchange.gray=0===this.nowExchangeNum,this.fc_consume.value=""+this.nowExchangeNum,this.label_get.text=""+this.nowExchangeNum*this.consumeByOne,this.label_myHave.text=n["default"].getInstance().getBagDataById("102").num},t.prototype.reduceExchangeNum=function(){void 0===this.nowExchangeNum&&(this.nowExchangeNum=0);var e=n["default"].getInstance().getBagDataById("102").num,t=Math.floor(e/10);this.nowExchangeNum<=0?o["default"].noBindScript("不能更少了哦~"):this.nowExchangeNum-t>=0?(this.nowExchangeNum-=t,this.setShow()):(this.nowExchangeNum=0,this.setShow())},t.prototype.maxExchangeNum=function(){var e=n["default"].getInstance().getBagDataById("102").num;this.nowExchangeNum=e,this.setShow()},t.prototype.exchangeGold=function(){l["default"].getInstance().playSound(c.coin_charge);var e,t={uuId:d["default"].getInstance().uuId,DIAMOND:Number(this.label_myHave.text)-this.nowExchangeNum};console.error("发送的钻石参数~~~:",Number(this.label_myHave.text)-this.nowExchangeNum),e=this.openType?p["default"].URLSERVER+p["default"].httpUrls.ExchangeGold:p["default"].URLSERVER+p["default"].httpUrls.ExchangeEnergy,new u["default"].HttpClass(Laya.Handler.create(this,this.exchangeResult),e,JSON.stringify(t))},t.prototype.exchangeResult=function(e){console.error("兑换的回调:",e),e.ret?new f["default"].HttpError(e.ret,this.owner):(n["default"].getInstance().updateBagDate_new(e),o["default"].noBindScript("兑换成功!",this.self,{y:399}),this.nowExchangeNum=0,this.setShow())},t.prototype.opened=function(e){var t=this._components[0];t.setOpenType(e)},t.prototype.changeShow=function(e){},t}(Laya.Script);a["default"]=y},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Connect/HttpError":25,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../manage/BagDataControl":44,"../manage/DialogEffect":46,"../manage/Music":56,"../manage/Playing_var":58,"../manage/toast":61}],88:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){if(this.detailName){this.visible=!0;var e=this.getChildByName("icon");e.texture=Laya.loader.getRes(this.detailIcon),e.scale(.8,.8),e.x=140,this.getChildByName("describe").text=this.detailDec,this.getChildByName("name").text=this.detailName}},t.prototype.onDisable=function(){this.visible=!1,Laya.Pool.recover("ItemDetail",this)},t}(Laya.Image);a["default"]=s},{}],89:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/BitmapFontMananage"),i=e("../Data/DataTables"),n=e("../manage/Playing_var"),o=e("../Connect/HttpClass"),l=e("../Connect/HttpEnum"),r=e("../manage/BagDataControl"),h=i["default"].FixedDataTables,c=Laya.Handler,u=o["default"].HttpClass,p=e("../manage/AdaptScene"),f=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAwake=function(){p["default"].getInstance().setSceneAdaptHeight()},t.prototype.onEnable=function(){var e=this;Laya.Browser.window.loadingScene=this.owner,this.adaptBate(),this.canEnterMainScene=!1,this.img_touchStartGame=this.owner.img_touchStartGame,this.loadingLabel=this.owner.loadingLabel,this.sk_loading=this.owner.sk_loading,this.progressBar_up=this.owner.progressBar_up,this.sk=this.owner.sk,Laya.Browser.window.skBg=this.sk;var t,a={main_resources:"bitmapFont/main_resources.fnt",customs_pass:"bitmapFont/customs_pass.fnt","升级按钮":"bitmapFont/升级按钮.fnt","复活字体":"bitmapFont/复活字体.fnt","胜利关卡字体":"bitmapFont/胜利关卡字体.fnt"},i=Object.keys(a),n=i.length,o=0;for(t in a)var l=new s["default"].BitmapManage(a[t],t,Laya.Handler.create(this,function(){console.log("index",o),++o>=n&&Laya.timer.frameOnce(50,e,function(){e.loadJsonZip(),console.log("zip加载完成")})}));Laya.Browser.window.sk=this.owner.getChildAt(0),Laya.Browser.window.loadingLabel=this.owner.loadingLabel,this.setLoadingScene()},t.prototype.adaptBate=function(){var e=this.owner.view_sk,t=this.owner.view_bar,a=this.owner.img_title,s=Laya.stage.height;e.y=s/2,a.y=1/7.25*s,t.y=.75*s,Laya.Browser.window.view_sk=e,Laya.Browser.window.view_bar=t,Laya.Browser.window.img_title=a},t.prototype.createSKLoading=function(){},t.prototype.loadJsonZip=function(){var e=this;h.loadFixedTables(c.create(this,function(t){Laya.loader.resetProgress();var a=new Laya.SceneLoader;a.on("progress",e,e.progressing),a.once("complete",e,e.completePre),a.load("test/FacePlaying.scene")}))},t.prototype.completePre=function(){Laya.loader.resetProgress();var e=new Laya.SceneLoader;e.on("progress",this,this.progressingPre),e.once("complete",this,this.complete),e.load(["test/CheckIn_dialog.scene"])},t.prototype.complete=function(e){var t,a=l["default"].URLSERVER+l["default"].httpUrls.uuid;t=Laya.Browser.onMiniGame?{code:n["default"].getInstance().wecode}:{weId:"ww1a30add20"};var s=JSON.stringify(t);new u(Laya.Handler.create(this,this.requestUUID),a,s)},t.prototype.requestUUID=function(e){n["default"].getInstance().uuId=e.uuId;var t=l["default"].URLSERVER+l["default"].httpUrls.GetPlayerData,a=JSON.stringify({uuId:n["default"].getInstance().uuId});new u(Laya.Handler.create(this,this.requestUserData),t,a)},t.prototype.requestUserData=function(e){var t=JSON.parse(e.PlayerData),a=JSON.parse(e.PlayerAchieve);n["default"].getInstance().updateGameVar(t,a),r["default"].getInstance().initBagData(t),this.setTouchStartGame()},t.prototype.progressingPre=function(e){console.error("p----------",e);var t=94+6*e;this.loadingLabel.value=Math.floor(t)+"%",this.progressBar_up.mask.graphics.clear(),this.progressBar_up.mask.graphics.drawRect(0,0,604*t,57,"#ff0000")},t.prototype.progressing=function(e){var t=100*e*.94;this.loadingLabel.value=Math.floor(t)+"%",this.progressBar_up.mask.graphics.clear(),this.progressBar_up.mask.graphics.drawRect(0,0,604*e,57,"#ff0000")},t.prototype.onStageClick=function(){this.canEnterMainScene&&(Laya.timer.clear(this,this.hideAndShow),Laya.Scene.open("test/FacePlaying.scene",!0))},t.prototype.setTouchStartGame=function(){this.progressBar_up.visible=!1,this.owner.progressBar.visible=!1,this.loadingLabel.visible=!1,this.canEnterMainScene=!0,this.sk_loading.visible=!1,this.img_touchStartGame.visible=!0,Laya.Tween.to(this.img_touchStartGame,{},800),this.hideAndShow()},t.prototype.hideAndShow=function(){var e=this.img_touchStartGame.alpha?0:1;Laya.Tween.to(this.img_touchStartGame,{alpha:e},800,null,Laya.Handler.create(this,this.hideAndShow),null,!0,!0)},t.prototype.setLoadingScene=function(){Laya.Scene.open("test/ReqLoading.scene",!1,null,Laya.Handler.create(this,function(e){p["default"].getInstance().setBg(e.blackSprite),e.close(),e.zOrder=3500,Laya.Scene.setLoadingPage(e)}))},t.prototype.sendHttp=function(){var e=new Laya.HttpRequest;e.http.timeout=1e4,e.once(Laya.Event.COMPLETE,this,this.completeHandler),e.once(Laya.Event.ERROR,this,this.errorHandler),e.on(Laya.Event.PROGRESS,this,this.processHandler),e.send("https://192.168.1.181:5001/api/UserMgr/Login","{weId:'zhaojihui'}","post","json",["Content-Type","application/json"]),console.log("aaaa")},t.prototype.completeHandler=function(e){console.error(e)},t.prototype.errorHandler=function(e){console.error("错误:",e)},t.prototype.processHandler=function(e){console.error("进程:",e)},t}(Laya.Script);a["default"]=f},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../manage/AdaptScene":43,"../manage/BagDataControl":44,"../manage/BitmapFontMananage":45,"../manage/Playing_var":58}],90:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/Music"),i=e("../Data/MusicEnum"),n=e("../manage/DialogEffect"),o=i["default"].musicToUrl,l=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){var e=this;this.self=this.owner,this.self.closeHandler=new Laya.Handler(this,this.closeNowDialog),this.showText=this.self.showText,this.showText.leading=9,this.dialogE=new n["default"](this.self),this.self.btn_closeDialog.on(Laya.Event.CLICK,this,function(){e.self.close(),e.dialogE=null})},t.prototype.closeNowDialog=function(e){s["default"].getInstance().playSound(o.button_normal),"sure"===e&&Laya.Scene.open("test/ExchangeDialog.scene",!1,1),this.dialogE=null,this.owner.destroy(),this.destroy()},t.prototype.setPopText=function(e){e&&(this.showText.text=e)},t}(Laya.Script);a["default"]=l},{"../Data/MusicEnum":28,"../manage/DialogEffect":46,"../manage/Music":56}],91:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../ui/layaMaxUI"),i=e("../manage/DialogEffect"),n=e("../manage/Music"),o=e("../Data/MusicEnum"),l=o["default"].musicToUrl,r=e("../manage/toast"),h=e("../manage/EndlessManage"),c=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){var e=this;this.showText.leading=9,this.dialogE=new i["default"](this),this.closeHandler=new Laya.Handler(this,this.closeNowDialog),this.btn_closeDialog.on(Laya.Event.CLICK,this,function(){e.close(),e.dialogE=null})},t.prototype.onOpened=function(e){e.txt&&this.setPopText(e.txt),this.popType=e.type},t.prototype.closeNowDialog=function(e){n["default"].getInstance().playSound(l.button_normal),"sure"===e?this.goActionByType():"cancel"===e&&this.cancelActionByType()},t.prototype.setPopText=function(e){e&&(this.showText.text=e)},t.prototype.cancelActionByType=function(){switch(this.popType){case 2:this.dialogE=null,this.destroy(),h["default"].getInstance().selectSkillBack()}},t.prototype.goActionByType=function(){var e=this;switch(this.popType){case 1:Laya.Scene.open("test/ExchangeDialog.scene",!1,1),this.dialogE=null,this.destroy(),this.destroy();break;case 2:Laya.Dialog.showLoadingPage(),Laya.timer.once(5e3,this,function(){e.dialogE=null,e.destroy(),r["default"].noBindScript("广告观看完成~!"),h["default"].getInstance().createSelectSkill()})}},t}(s.ui.test.popDialogUI);a["default"]=c},{"../../ui/layaMaxUI":99,"../Data/MusicEnum":28,"../manage/DialogEffect":46,"../manage/EndlessManage":49,"../manage/Music":56,"../manage/toast":61}],92:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../ui/layaMaxUI"),i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.setListener()},t.prototype.onOpened=function(e){Laya.Browser.onMiniGame&&this.onSelect(1)},t.prototype.setListener=function(){this.btn_level.on(Laya.Event.CLICK,this,this.onSelect,[1]),this.btn_endless.on(Laya.Event.CLICK,this,this.onSelect,[2]),this.btn_close.on(Laya.Event.CLICK,this,this.closeRank)},t.prototype.onSelect=function(e){if(1===e?(this.btn_level.skin="ranking/选中页签.png",this.btn_endless.skin="ranking/页签.png"):(this.btn_level.skin="ranking/页签.png",this.btn_endless.skin="ranking/选中页签.png"),Laya.Browser.onMiniGame){var t={type:1,value:1};t.type=1===e?1:3,t.value=null,this.openDataView.postMsg(t)}},t.prototype.closeRank=function(){this.close()},t}(s.ui.test.RankingUI);a["default"]=i},{"../../ui/layaMaxUI":99}],93:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=i["default"].DataType,o=e("../manage/BagDataControl"),l=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.configInstance=s["default"].FixedDataTables.getInstance(),this.initVars(),this.initListener()},t.prototype.initListener=function(){var e=this;this.self.img_close.on(Laya.Event.CLICK,this,function(){e.self.close()})},t.prototype.initVars=function(){this.label_name=this.self.label_name,this.item0=this.self.item0,this.item1=this.self.item1,this.num1=this.self.num1},t.prototype.onOpened=function(e){var t=JSON.parse(e.bagSecondaryWeapon),a=(JSON.parse(e.bagCommon),this.configInstance.getDataByKey(n.secondaryWeapon,Number(Object.keys(t)[0]),"pic")),s=this.item0.getChildAt(2);s.skin="shop/"+a+"_shop.png",s.scaleX=.8,s.scaleY=.8;var i=!o["default"].getInstance().hasId(Object.keys(t)[0]);this.item0.getChildAt(3).visible=i,this.item0.getChildAt(0).visible=i,this.item0.getChildAt(4).visible=!1,this.item1.getChildAt(4).visible=!0,this.item1.getChildAt(3).visible=!1,this.item1.getChildAt(0).visible=!1;var l=this.item1.getChildAt(2);l.skin="shop/商城体力图标.png",l.scaleX=1,l.scaleY=1,this.label_name.text=this.configInstance.getDataByKey(n.secondaryWeapon,Number(Object.keys(t)[0]),"name")},t.prototype.onDisable=function(){},t}(Laya.Script);a["default"]=l},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../manage/BagDataControl":44}],94:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Data/DataTables"),i=e("../Data/JsonEnum"),n=e("../manage/BagDataControl"),o=i["default"].DataType,l=function(e){function t(){var t=e.call(this)||this;return t.initPosXY={x:137,y:315},t.initwh={w:181,h:159},t}return __extends(t,e),t.prototype.onEnable=function(){this.self=this.owner,this.initVars(),this.initListener()},t.prototype.initVars=function(){this.itemParent=this.self.itemParent,this.fc_newNum=this.self.fc_newNum,this.configInstance=s["default"].FixedDataTables.getInstance()},t.prototype.opened=function(e){this.initRewardItem(e),n["default"].getInstance().updateBagDate_new(e)},t.prototype.initRewardItem=function(e){function t(e){var t,a=[];for(t in e){var s=0,i=n["default"].getInstance().getBagDataById(t),o=i?i.num:0,l=e[t].num-o;for(s;l>s;s++)a.push(e[t].id)}return a}var a=JSON.parse(e.bagSecondaryWeapon),s=t(a),i=(JSON.parse(e.bagCommon),0),l=0;for(i;i<s.length;i++){var r=this.configInstance.getDataByKey(o.secondaryWeapon,s[i],"pic"),h=Laya.Pool.getItemByCreateFun("rewardItem",this.rewardItem.create,this.rewardItem);9===i?h.pos(219,315+this.initwh.h*Math.floor(i/3)):h.pos(137+this.initwh.w*(i%3),315+this.initwh.h*Math.floor(i/3)),h.getChildAt(2).skin="shop/"+r+"_shop.png";var c=!n["default"].getInstance().hasId(s[i].toString());h.getChildAt(3).visible=c,h.getChildAt(0).visible=c,h.getChildAt(4).visible=!1,this.itemParent.addChild(h),c&&l++}var u=Laya.Pool.getItemByCreateFun("rewardItem",this.rewardItem.create,this.rewardItem);u.pos(410,792);var p=u.getChildAt(4);p.visible=!0,p.skin="shop/tenBuy/X10.png",u.getChildAt(3).visible=!1,u.getChildAt(0).visible=!1;var f=u.getChildAt(2);f.skin="shop/商城体力图标.png",Laya.Browser.window.powerIcon=f,f.scaleX=1,f.scaleY=1,this.fc_newNum.value=""+l,this.itemParent.addChild(u)},t.prototype.initListener=function(){var e=this;this.self.sprite_close.on(Laya.Event.CLICK,this,function(){e.itemParent.removeChildren(),e.self.close()})},t}(Laya.Script);a["default"]=l},{"../Data/DataTables":26,"../Data/JsonEnum":27,"../manage/BagDataControl":44}],95:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/Music"),i=e("../Data/MusicEnum"),n=e("../manage/DialogEffect"),o=i["default"].musicToUrl,l=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnable=function(){var e=this;s["default"].getInstance().playSound(o.ui_popup),this.owner.btn_close.on(Laya.Event.CLICK,this,function(){e.playCommonSound(),e.dilogEffect.removeAnimation(Laya.Handler.create(e,function(){e.owner.close(),e.dilogEffect=null}))}),this.setSound=this.owner.btn_sound,this.setMusic=this.owner.btn_music,this.setListerner(),this.changeStart(0),this.dilogEffect=new n["default"](this.owner)},t.prototype.setListerner=function(){this.setMusic.on(Laya.Event.CLICK,this,this.changeStart,[1]),this.setSound.on(Laya.Event.CLICK,this,this.changeStart,[2])},t.prototype.changeStart=function(e){switch(e){case 1:this.setMusic.skin=s["default"].getInstance().musicOn?"set/关按钮.png":"set/开按钮.png",s["default"].getInstance().musicOn=!s["default"].getInstance().musicOn,s["default"].getInstance().musicOn?s["default"].getInstance().startNowMusic():s["default"].getInstance().stopNowMusic(),this.playCommonSound(s["default"].getInstance().musicOn);break;case 2:this.setSound.skin=s["default"].getInstance().soundOn?"set/关按钮.png":"set/开按钮.png",s["default"].getInstance().soundOn=!s["default"].getInstance().soundOn,this.playCommonSound(s["default"].getInstance().soundOn);break;default:this.setMusic.skin=s["default"].getInstance().musicOn?"set/开按钮.png":"set/关按钮.png",this.setSound.skin=s["default"].getInstance().soundOn?"set/开按钮.png":"set/关按钮.png"}},t.prototype.playCommonSound=function(e){s["default"].getInstance().playSound(e?o.set_on:o.set_off)},t}(Laya.Script);a["default"]=l},{"../Data/MusicEnum":28,"../manage/DialogEffect":46,"../manage/Music":56}],96:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/toast"),i=e("../playing/BattleParse"),n=e("../manage/BagDataControl"),o=e("../Connect/HttpClass"),l=e("../Connect/HttpEnum"),r=e("../manage/Playing_var"),h=e("../Data/DataTables"),c=e("../Data/JsonEnum"),u=e("../playing/PlayingSceneControl"),p=e("../manage/Music"),f=e("../Data/MusicEnum"),d=f["default"].musicToUrl,y=h["default"].FixedDataTables,_=o["default"].HttpClass,m=e("../manage/AdaptScene"),g=function(e){function t(){var t=e.call(this)||this;return t.dragonNames={0:"zhutichibang_01",1:"shanguang_02",3:"beijingguang_02"},t}return __extends(t,e),t.prototype.onAwake=function(){var e=this.owner.bg_black;m["default"].getInstance().setBg(e),e.on(Laya.Event.CLICK,this,function(e){e.stopPropagation()})},t.prototype.onEnable=function(){this.initVar(),this.successAndFail(),this.controlSuccessMusic()},t.prototype.initVar=function(){this.game=Laya.Browser.window.game,this.self=this.owner;var e=this.self;this.progressInstance=e.progress_bar,Laya.Browser.window.progressInstance=this.progressInstance,this.oneGold=e.oneGold,this.doubleGold=e.doubleGold,e.btn_rewardOne.on(Laya.Event.CLICK,this,this.rewardClick,[0]),e.btn_rewardTwo.on(Laya.Event.CLICK,this,this.rewardClick,[1]),this.sk_settlement=e.sk_settlement,this.sk_settlement.on(Laya.Event.STOPPED,this,this.stopedSK)},t.prototype.controlSuccessMusic=function(){p["default"].getInstance().playSound(d.win_bg),p["default"].getInstance().playSound(d.win_noise)},t.prototype.successAndFail=function(){var e=this,t=this.self.nowLevel;t.text=JSON.stringify(this.game.nowLevel);var a=i["default"].getInstance().goldsInLevel.toString();this.oneGold.text=""+parseInt(a),Laya.timer.frameOnce(3,this,function(){e.sk_settlement.play(e.dragonNames[0],!1)});var s=0;for(s;2>s;s++){var n=this.self["sprite_"+s];Laya.Tween.from(n,{alpha:0},1400)}this.showLuckyValue()},t.prototype.showLuckyValue=function(){var e,t=y.getInstance().getData(c["default"].DataType.misc);e=this.game.overLevel?t[3].value:t[4].value;var a=Number(e)+r["default"].getInstance().luckyValue,s=a/100,i=this.progressInstance.mask;i.graphics.clear(!0);var n=647*(s>1?1:s);i.graphics.drawRect(0,0,n,38,"#ffffff")},t.prototype.rewardClick=function(e){p["default"].getInstance().playSound(d.bullet_normal);var t,a=n["default"].getInstance().getBagDataById("101").num,s=y.getInstance().getData(c["default"].DataType.misc);t=this.game.overLevel?s[3].value:s[4].value;var o={};o.uuId=r["default"].getInstance().uuId,e?o.bagCommon={101:{id:101,num:a+2*i["default"].getInstance().goldsInLevel}}:o.bagCommon={101:{id:101,num:a+i["default"].getInstance().goldsInLevel}};var u=h["default"].FixedDataTables.getInstance().getDataByKey(c["default"].DataType.battle,this.game.nowLevel,"cost"),f=n["default"].getInstance().getBagDataById("103").num;o.bagCommon[103]={id:103,num:f-u>0?f-u:0},this.game.overLevel&&this.game.nowLevel++,o.barrier={curBarrier:this.game.nowLevel,luckyValue:Number(t)+r["default"].getInstance().luckyValue};var m=i["default"].getInstance().killEnemyS;o.achieve={killTopNum:r["default"].getInstance().getKillMaxNum(m)},n["default"].getInstance().updateBagCommon({bagCommon:o.bagCommon}),r["default"].getInstance().luckyValue=o.barrier.luckyValue;var g=o.barrier.luckyValue/100,b=this.progressInstance.mask;b.graphics.clear(!0);var v=647*(g>1?1:g);b.graphics.drawRect(0,0,v,38,"#ffffff"),console.error("PlayingVar.getInstance().luckyValue",r["default"].getInstance().luckyValue),this.receiveType=e;new _(Laya.Handler.create(this,this.openTipsAndBack),l["default"].URLSERVER+l["default"].httpUrls.PassedBarrier,JSON.stringify(o))},t.prototype.openTipsAndBack=function(e){var t,a=this;t=this.receiveType?"暂无广告双倍奖励已经领取!":"奖励已经领取";JSON.parse(e.bagSecondaryWeapon);n["default"].getInstance().updateBagDate_new(e),s["default"].noBindScript(t,this.owner),u["default"].instance.EnemySpite.numChildren&&u["default"].instance.EnemySpite.removeChildren(0,u["default"].instance.EnemySpite.numChildren-1),Laya.timer.once(500,this,function(){i["default"].deleteInstance(),Laya.Resource.destroyUnusedResources(),a.self.close(),Laya.Scene.open("test/FacePlaying.scene",!0)})},t.prototype.stopedSK=function(){var e;for(e in this.dragonNames)if("0"!==e){var t=this.self["sk"+e];t.visible=!0,t.play(this.dragonNames[e],!0)}},t}(Laya.Script);a["default"]=g},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../manage/AdaptScene":43,"../manage/BagDataControl":44,"../manage/Music":56,"../manage/Playing_var":58,"../manage/toast":61,"../playing/BattleParse":62,"../playing/PlayingSceneControl":67}],97:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/toast"),i=e("../playing/BattleParse"),n=e("../manage/Music"),o=e("../Data/MusicEnum"),l=e("../manage/BagDataControl"),r=e("../Connect/HttpClass"),h=e("../Connect/HttpEnum"),c=e("../manage/Playing_var"),u=e("../Data/DataTables"),p=e("../Data/JsonEnum"),f=e("../playing/PlayingSceneControl"),d=u["default"].FixedDataTables,y=r["default"].HttpClass,_=o["default"].musicToUrl,m=e("../manage/AdaptScene"),g=e("../manage/EndlessManage"),b=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onAwake=function(){var e=this.owner.bg_black;m["default"].getInstance().setBg(e),e.on(Laya.Event.CLICK,this,function(e){e.stopPropagation()})},t.prototype.onEnable=function(){this.game=Laya.Browser.window.game;var e=this.owner;this.self=e;var t=Laya.Browser.window.game;e.nowLevel.text=t.nowLevel;var a=e.btn_revival,s=this.self.oneGold,n=i["default"].getInstance().goldsInLevel.toString();s.text=""+parseInt(n),a.alpha=0,a.on(Laya.Event.CLICK,this,this.clickRevival),this.btn_revival=a,this.setProgressBar(),this.sk_settlement=e.sk_settlement,this.sk_settlement.y=579,this.setSK(),this.self.btn_rewardOne.on(Laya.Event.CLICK,this,this.getReward,[0]),this.self.btn_rewardTwo.on(Laya.Event.CLICK,this,this.getReward,[1]),this.setEndlessShow(),this.setFailBgMusic(),Laya.Browser.window.settlement=this.self},t.prototype.setFailBgMusic=function(){n["default"].getInstance().playMusic(_.lose_bg),n["default"].getInstance().playSound(_.lose_noise)},t.prototype.setEndlessShow=function(){var e=this,t=["label_distance","label_0"];"endless"===c["default"].getInstance().gameModel&&(this.self.nowLevel.text=g["default"].getInstance().scoreNum,this.self.label_distance.value=g["default"].getInstance().distanceNum+"km"),t.forEach(function(t,a){e.self[t].visible="endless"===c["default"].getInstance().gameModel})},t.prototype.onUpdate=function(){this.owner.nowLevel&&(this.owner.nowLevel.y=this.sk_settlement.y+100.5),this.ani1Playing&&(this.self.ani1.isPlaying||(this.ani1Playing=null,this.progressShow()))},t.prototype.progressShow=function(){var e=this,t=["label_enmeyDec","progress_sm"];t.forEach(function(t){e.self[t].visible="endless"!==c["default"].getInstance().gameModel})},t.prototype.setSK=function(){Laya.timer.frameOnce(3,this,this.playSK)},t.prototype.getReward=function(e){if(n["default"].getInstance().playSound(_.bullet_normal),"endless"===c["default"].getInstance().gameModel)return void this.getRewardInEndless();var t,a=l["default"].getInstance().getBagDataById("101").num,s=d.getInstance().getData(p["default"].DataType.misc);t=this.game.overLevel?s[3].value:s[4].value;var o={};o.uuId=c["default"].getInstance().uuId,e?o.bagCommon={101:{id:101,num:a+2*i["default"].getInstance().goldsInLevel}}:o.bagCommon={101:{id:101,num:a+i["default"].getInstance().goldsInLevel}},this.game.overLevel&&this.game.nowLevel++,o.barrier={curBarrier:this.game.nowLevel,luckyValue:c["default"].getInstance().luckyValue};var r=i["default"].getInstance().killEnemyS;o.achieve={killTopNum:c["default"].getInstance().getKillMaxNum(r)},l["default"].getInstance().updateBagCommon({bagCommon:o.bagCommon}),console.error("PlayingVar.getInstance().luckyValue",c["default"].getInstance().luckyValue),this.receiveType=e;new y(Laya.Handler.create(this,this.openTipsAndBack),h["default"].URLSERVER+h["default"].httpUrls.PassedBarrier,JSON.stringify(o));
},t.prototype.getRewardInEndless=function(e){var t={};t.uuId=c["default"].getInstance().uuId;var a=l["default"].getInstance().getBagDataById("101").num;e?t.bagCommon={101:{id:101,num:a+2*i["default"].getInstance().goldsInLevel}}:t.bagCommon={101:{id:101,num:a+i["default"].getInstance().goldsInLevel}};var s=["104","105"],n=0;for(n;n<s.length;n++){var o=l["default"].getInstance().getBagDataById(s[n]);o&&o.num?t.bagCommon[s[n]]={id:s[n],num:o.num}:t.bagCommon[s[n]]={id:s[n],num:0}}var r=g["default"].getInstance().scoreNum,u=i["default"].getInstance().killEnemyS;t.achieve={endlessTopScore:c["default"].getInstance().getScoresMaxNum(r),killTopNum:c["default"].getInstance().getScoresMaxNum(u)};new y(Laya.Handler.create(this,this.openTipsAndBack),h["default"].URLSERVER+h["default"].httpUrls.EndlessStop,JSON.stringify(t))},t.prototype.openTipsAndBack=function(e){var t,a=this;return t=this.receiveType?"暂无广告双倍奖励已经领取!":"奖励已经领取","endless"===c["default"].getInstance().gameModel?void(0===e.ret&&(l["default"].getInstance().updateBagDate_new(e),s["default"].noBindScript(t,this.owner),f["default"].instance.EnemySpite.numChildren&&f["default"].instance.EnemySpite.removeChildren(0,f["default"].instance.EnemySpite.numChildren-1),Laya.timer.once(500,this,function(){i["default"].deleteInstance(),a.self.close(),g["default"].getInstance().endlessSettlement(),Laya.Scene.open("test/FacePlaying.scene",!0)}))):(e.bagSecondaryWeapon&&"{}"!==e.bagSecondaryWeapon&&l["default"].getInstance().updateBagDate_new(e),s["default"].noBindScript(t,this.owner),f["default"].instance.EnemySpite.numChildren&&f["default"].instance.EnemySpite.removeChildren(0,f["default"].instance.EnemySpite.numChildren-1),void Laya.timer.once(500,this,function(){i["default"].deleteInstance(),a.self.close(),Laya.Scene.open("test/FacePlaying.scene",!0)}))},t.prototype.setAlpha=function(){Laya.Tween.from(this.self.bg_black,{alpha:0},1400),Laya.Tween.from(this.self.progressParent,{alpha:0},1400)},t.prototype.playSK=function(){var e=10900;f["default"].instance.roleHp>0&&(this.initiativeSettle=!0,e=1e3),Laya.timer.once(e,this,this.playAni),"endless"===c["default"].getInstance().gameModel?(this.initiativeSettle&&this.sk_settlement.playbackRate(1e3),this.sk_settlement.play("wujin_shibaifuhuo",!1)):this.sk_settlement.play("shibaifuhuo",!1),this.stopListenerObj=this.sk_settlement.on(Laya.Event.STOPPED,this,this.playStoped),this.initiativeSettle=!1},t.prototype.playStoped=function(){},t.prototype.setProgressBar=function(){this.label_haveEnemy=this.owner.label_haveEnemy,this.progress_b=this.owner.progress_b;var e=i["default"].getInstance().getTotalNums(),t=i["default"].getInstance().killEnemyS;this.label_haveEnemy.text=t+"/"+e,this.progress_b.mask.graphics.clear(),this.progress_b.mask.graphics.drawRect(0,0,t/e*647,50,"#ff0000"),this.self.label_enmeyDec.text="剩余怪物数量："+(e-t)},t.prototype.clickRevival=function(e){var t=this;return"endless"===c["default"].getInstance().gameModel?void s["default"].noBindScript("暂无广告,无法复活!",this.owner):(s["default"].noBindScript("广告观看完成!",this.owner),void Laya.timer.once(500,this,function(){t.cownDown()}))},t.prototype.playAni=function(){var e=this;Laya.Tween.to(this.sk_settlement,{x:this.sk_settlement.x,y:379},400);var t=["label_distance","label_0"];t.forEach(function(t){Laya.Tween.to(e.self[t],{x:e.self[t].x,y:25},400)}),this.btn_revival.offAll();var a=this.self.ani1;a.play(0,!1),this.ani1Playing=a.isPlaying,console.error("状态~！！！！！！！",a.isPlaying),"endless"===c["default"].getInstance().gameModel&&g["default"].getInstance().exitEndless()},t.prototype.cownDown=function(){i["default"].deleteInstance(),this.self.close(),Laya.Scene.open("test/FacePlaying.scene",!0)},t}(Laya.Script);a["default"]=b},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../manage/AdaptScene":43,"../manage/BagDataControl":44,"../manage/EndlessManage":49,"../manage/Music":56,"../manage/Playing_var":58,"../manage/toast":61,"../playing/BattleParse":62,"../playing/PlayingSceneControl":67}],98:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("../manage/toast"),i=e("../Data/DataTables"),n=e("../Data/JsonEnum"),o=e("../manage/Music"),l=e("../Data/MusicEnum"),r=l["default"].musicToUrl,h=n["default"].DataType,c=i["default"].FixedDataTables,u=e("../manage/BagDataControl"),p=e("../manage/DialogEffect"),f=e("../manage/Playing_var"),d=e("../Connect/HttpClass"),y=e("../Connect/HttpEnum"),_=e("../Connect/HttpError"),m=function(e){function t(){var t=e.call(this)||this;return t.turnNum=10,t.turnSlowNum=9,t.speed=60,t.minSpeed=200,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;o["default"].getInstance().playSound(r.ui_popup);var t=this.owner;this.canTouch=!0,this.myGold=u["default"].getInstance().getBagDataById("101").num,this.weaponList=t.weapon_list,this.weaponList.vScrollBarSkin="",this.weaponList.selectEnable=!1,this.weaponList.renderHandler=new Laya.Handler(this,this.updateItemWeaponData);for(var a=c.getInstance().getData(h.secondaryWeapon),s=Object.keys(a),i=[],n=0;n<s.length;n++){var l=a[s[n]].unlock;1!==JSON.parse(l.split("|")[0])&&i.push(a[s[n]])}this.weaponList.array=i,this.config_shop=c.getInstance().getData(h.shop),this.consumeGold=this.config_shop[1].one.split("#")[0].split("|"),this.consumeGold_ten=this.config_shop[1].ten.split("#")[0].split("|"),t.btn_buyOne.on(Laya.Event.CLICK,this,this.requestData,[1]),t.btn_buyTen.on(Laya.Event.CLICK,this,this.requestData,[2]),t.btn_close.on(Laya.Event.CLICK,this,function(){o["default"].getInstance().playSound(r.button_normal),e.dialogE.removeAnimation(Laya.Handler.create(e,e.closeDialog))}),t.fc_cosumeOne.value=""+this.consumeGold[1],t.fc_consumeTen.value=""+this.consumeGold_ten[1],this.dialogE=new p["default"](t)},t.prototype.requestData=function(e){var t=this;if(this.canTouch){Laya.Scene.showLoadingPage(),this.canTouch=!1;var a={uuId:f["default"].getInstance().uuId},s=1==e?y["default"].URLSERVER+y["default"].httpUrls.ShopOnce:y["default"].URLSERVER+y["default"].httpUrls.ShopTen;new d["default"].HttpClass(Laya.Handler.create(this,function(a){Laya.Scene.hideLoadingPage(),o["default"].getInstance().playSound(1===e?r.lottery_single:r.lottery_ten),1===e?t.buyOne(a):(t.buyTen(a),console.error("10连抽~~~~~~~"))}),s,JSON.stringify(a))}},t.prototype.buyOne=function(e){e.ret?-7==e.ret?s["default"].noBindScript("体力不足,请前往购买!",this.owner):new _["default"].HttpError(e.ret,this.owner):(this.markE=e,this.markTime=0,this.nowTurn=0,this.stopIndex=210-Number(Object.keys(JSON.parse(e.bagSecondaryWeapon))),console.error("抽卡需要停止的位置~",this.stopIndex),this.nowIndex=0,this.speed=60,this.runLight=!0,u["default"].getInstance().updateBagDate_new(e))},t.prototype.openObtainGoodsScene=function(){var e=this,t=this.markE;Laya.Scene.open("test/obtainGoods.scene",!1,t,Laya.Handler.create(this,function(a){var s=a.getComponent(Laya.Script);s.onOpened(t),e.canTouch=!0}))},t.prototype.buyTen=function(e){var t=this;Laya.Scene.open("test/obtainGoodsTen.scene",!1,e,Laya.Handler.create(this,function(a){var s=a.getComponent(Laya.Script);s.opened(e),t.canTouch=!0}))},t.prototype.updateItemWeaponData=function(e,t){var a=e.dataSource,s=e.getChildAt(0);s.skin="shop/商品框.png",e.getChildByName("weaponName").text=a.name,e.getChildByName("img_icon").skin="shop/"+a.pic+"_shop.png"},t.prototype.onUpdate=function(){if(this.runLight&&void 0!==this.markTime&&Date.now()-this.markTime>=this.speed){this.markTime=Date.now();var e=this.weaponList.cells,t=0;for(t;5>t;t++){var a=e[t].getChildAt(1);a.visible=t===this.nowIndex}this.nowIndex++,this.nowIndex>=5&&(this.nowIndex=0,void 0===this.nowTurn&&(this.nowTurn=0),this.nowTurn++),this.nowTurn>=this.turnSlowNum-1&&(this.speed+=10,this.speed<=this.minSpeed&&(this.speed=this.minSpeed)),this.nowTurn===this.turnNum-1&&this.nowIndex===this.stopIndex&&(this.runLight=!1,Laya.timer.once(100,this,this.openObtainGoodsScene))}},t.prototype.closeDialog=function(){Laya.timer.clearAll(this),this.owner.close(),this.dialogE=null},t}(Laya.Script);a["default"]=m},{"../Connect/HttpClass":23,"../Connect/HttpEnum":24,"../Connect/HttpError":25,"../Data/DataTables":26,"../Data/JsonEnum":27,"../Data/MusicEnum":28,"../manage/BagDataControl":44,"../manage/DialogEffect":46,"../manage/Music":56,"../manage/Playing_var":58,"../manage/toast":61}],99:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,i=Laya.View,n=Laya.Dialog,o=Laya.Scene,l=Laya.ClassUtils.regClass;!function(e){var t;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/Achievement_dialog")},t}(n);e.Achievement_dialogUI=t,l("ui.test.Achievement_dialogUI",t);var a=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/CheckIn_dialog")},t}(n);e.CheckIn_dialogUI=a,l("ui.test.CheckIn_dialogUI",a);var s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/ExchangeDialog")},t}(n);e.ExchangeDialogUI=s,l("ui.test.ExchangeDialogUI",s);var r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/faceFighting_loadingScene")},t}(o);e.faceFighting_loadingSceneUI=r,l("ui.test.faceFighting_loadingSceneUI",r);var h=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/FacePlaying")},t}(o);e.FacePlayingUI=h,l("ui.test.FacePlayingUI",h);var c=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/GameFail_dialog")},t}(n);e.GameFail_dialogUI=c,l("ui.test.GameFail_dialogUI",c);var u=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/GameFail_dialogbak")},t}(n);e.GameFail_dialogbakUI=u,l("ui.test.GameFail_dialogbakUI",u);var p=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/Lottery")},t}(n);e.LotteryUI=p,l("ui.test.LotteryUI",p);var f=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/obtainGoods")},t}(n);e.obtainGoodsUI=f,l("ui.test.obtainGoodsUI",f);var d=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/obtainGoodsTen")},t}(n);e.obtainGoodsTenUI=d,l("ui.test.obtainGoodsTenUI",d);var y=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/popDialog")},t}(n);e.popDialogUI=y,l("ui.test.popDialogUI",y);var _=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/Ranking")},t}(i);e.RankingUI=_,l("ui.test.RankingUI",_);var m=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/ReqLoading")},t}(n);e.ReqLoadingUI=m,l("ui.test.ReqLoadingUI",m);var g=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/Set")},t}(n);e.SetUI=g,l("ui.test.SetUI",g);var b=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/Settlement_dialog")},t}(n);e.Settlement_dialogUI=b,l("ui.test.Settlement_dialogUI",b);var v=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/ShopDialog")},t}(n);e.ShopDialogUI=v,l("ui.test.ShopDialogUI",v);var k=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/skillsToChoose")},t}(n);e.skillsToChooseUI=k,l("ui.test.skillsToChooseUI",k);var S=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/suspendInterface")},t}(n);e.suspendInterfaceUI=S,l("ui.test.suspendInterfaceUI",S);var B=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadScene("test/TestScene")},t}(o);e.TestSceneUI=B,l("ui.test.TestSceneUI",B)}(t=e.test||(e.test={}))}(s=a.ui||(a.ui={}))},{}]},{},[2]);